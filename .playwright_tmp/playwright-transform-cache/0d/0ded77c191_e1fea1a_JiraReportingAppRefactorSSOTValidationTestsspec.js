/**
 * Refactor SSOT Validation Tests
 * Validates: Boards column order, leader-friendly tooltips, capacity columns,
 * CSV/Excel column consistency, and no console errors during preview/export flow.
 */

import { test, expect } from '@playwright/test';
import { runDefaultPreview, waitForPreview } from './JiraReporting-Tests-Shared-PreviewExport-Helpers.js';
const BOARD_COLUMN_ORDER = ['Board ID', 'Board', 'Type', 'Projects', 'Sprints', 'Sprint Days', 'Avg Sprint Days', 'Done Stories', 'Done SP', 'Committed SP', 'Delivered SP', 'SP Estimation %', 'Stories / Sprint', 'SP / Story', 'Stories / Day', 'SP / Day', 'SP / Sprint', 'SP Variance', 'Indexed Delivery', 'On-Time %', 'Planned', 'Ad-hoc', 'Active Assignees', 'Stories / Assignee', 'SP / Assignee', 'Assumed Capacity (PD)', 'Assumed Waste %', 'Sprint Window', 'Latest End'];
test.describe('Jira Reporting App - Refactor SSOT Validation Tests', () => {
  test.beforeEach(async ({
    page
  }) => {
    const consoleErrors = [];
    page.on('console', msg => {
      if (msg.type() === 'error') {
        consoleErrors.push({
          text: msg.text(),
          location: msg.location()
        });
      }
    });
    page.setExtraHTTPHeaders({
      'Accept': 'text/html'
    });
  });
  test('Boards table headers appear in agreed order when boards exist', async ({
    page
  }) => {
    await page.goto('/report');
    await runDefaultPreview(page);
    await page.click('.tab-btn[data-tab="project-epic-level"]');
    const boardsSection = page.locator('#project-epic-level-content');
    await expect(boardsSection).toBeVisible({
      timeout: 5000
    });
    const sectionText = await boardsSection.textContent();
    if (!sectionText || !sectionText.includes('Board ID')) {
      await expect(boardsSection).toContainText(/No boards|discovered|date window/i);
      return;
    }
    const firstTable = boardsSection.locator('table.data-table').first();
    await expect(firstTable).toBeVisible({
      timeout: 5000
    });
    const ths = firstTable.locator('thead th');
    const count = await ths.count();
    expect(count).toBe(BOARD_COLUMN_ORDER.length);
    for (let i = 0; i < BOARD_COLUMN_ORDER.length; i++) {
      await expect(ths.nth(i)).toContainText(BOARD_COLUMN_ORDER[i]);
    }
  });
  test('Boards table has tooltips on key columns (Type, Planned, Ad-hoc, Latest End)', async ({
    page
  }) => {
    await page.goto('/report');
    await runDefaultPreview(page);
    await page.click('.tab-btn[data-tab="project-epic-level"]');
    const boardsSection = page.locator('#project-epic-level-content');
    const sectionText = await boardsSection.textContent();
    if (!sectionText || !sectionText.includes('Board ID')) {
      test.skip('No boards table (no boards in window)');
      return;
    }
    const table = boardsSection.locator('table.data-table').first();
    await expect(table).toBeVisible({
      timeout: 5000
    });
    const typeTh = table.locator('th').filter({
      hasText: 'Type'
    }).first();
    await expect(typeTh).toHaveAttribute('title', /Board type|Scrum|Kanban/i);
    const plannedTh = table.locator('th').filter({
      hasText: 'Planned'
    }).first();
    await expect(plannedTh).toHaveAttribute('title', /Epic|planned/i);
    const adhocTh = table.locator('th').filter({
      hasText: 'Ad-hoc'
    }).first();
    await expect(adhocTh).toHaveAttribute('title', /without an Epic|unplanned/i);
    const latestEndTh = table.locator('th').filter({
      hasText: 'Latest End'
    }).first();
    await expect(latestEndTh).toHaveAttribute('title', /sprint end|window/i);
  });
  test('Boards table shows capacity proxy columns (Active Assignees, Assumed Capacity, Assumed Waste)', async ({
    page
  }) => {
    await page.goto('/report');
    await runDefaultPreview(page);
    await page.click('.tab-btn[data-tab="project-epic-level"]');
    const boardsSection = page.locator('#project-epic-level-content');
    const sectionText = await boardsSection.textContent();
    if (!sectionText || !sectionText.includes('Board ID')) {
      test.skip('No boards table (no boards in window)');
      return;
    }
    const boardsTable = boardsSection.locator('table.data-table').first();
    await expect(boardsTable).toBeVisible({
      timeout: 5000
    });
    await expect(boardsTable.locator('th', {
      hasText: 'Active Assignees'
    })).toBeVisible();
    await expect(boardsTable.locator('th', {
      hasText: 'Assumed Capacity (PD)'
    })).toBeVisible();
    await expect(boardsTable.locator('th', {
      hasText: 'Assumed Waste %'
    })).toBeVisible();
  });
  test('API /api/csv-columns returns columns matching Boards SSOT contract', async ({
    request
  }) => {
    const response = await request.get('/api/csv-columns');
    if (response.status() === 401) {
      test.skip('Auth required');
      return;
    }
    if (response.status() === 404) {
      test.skip('Route /api/csv-columns not found (restart server with latest code)');
      return;
    }
    expect(response.status()).toBe(200);
    const body = await response.json();
    expect(Array.isArray(body.columns)).toBe(true);
    expect(body.columns.length).toBeGreaterThan(40);
    expect(body.columns).toContain('issueKey');
    expect(body.columns).toContain('storyPoints');
    expect(body.columns).toContain('epicKey');
  });
  test('Preview and Boards tab render without console errors', async ({
    page
  }) => {
    const consoleErrors = [];
    page.on('console', msg => {
      if (msg.type() === 'error') {
        consoleErrors.push(msg.text());
      }
    });
    await page.goto('/report');
    await runDefaultPreview(page);
    await page.click('.tab-btn[data-tab="project-epic-level"]');
    await page.waitForTimeout(500);
    const relevant = consoleErrors.filter(t => !t.includes('favicon') && !t.includes('404'));
    expect(relevant).toEqual([]);
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ0ZXN0IiwiZXhwZWN0IiwicnVuRGVmYXVsdFByZXZpZXciLCJ3YWl0Rm9yUHJldmlldyIsIkJPQVJEX0NPTFVNTl9PUkRFUiIsImRlc2NyaWJlIiwiYmVmb3JlRWFjaCIsInBhZ2UiLCJjb25zb2xlRXJyb3JzIiwib24iLCJtc2ciLCJ0eXBlIiwicHVzaCIsInRleHQiLCJsb2NhdGlvbiIsInNldEV4dHJhSFRUUEhlYWRlcnMiLCJnb3RvIiwiY2xpY2siLCJib2FyZHNTZWN0aW9uIiwibG9jYXRvciIsInRvQmVWaXNpYmxlIiwidGltZW91dCIsInNlY3Rpb25UZXh0IiwidGV4dENvbnRlbnQiLCJpbmNsdWRlcyIsInRvQ29udGFpblRleHQiLCJmaXJzdFRhYmxlIiwiZmlyc3QiLCJ0aHMiLCJjb3VudCIsInRvQmUiLCJsZW5ndGgiLCJpIiwibnRoIiwic2tpcCIsInRhYmxlIiwidHlwZVRoIiwiZmlsdGVyIiwiaGFzVGV4dCIsInRvSGF2ZUF0dHJpYnV0ZSIsInBsYW5uZWRUaCIsImFkaG9jVGgiLCJsYXRlc3RFbmRUaCIsImJvYXJkc1RhYmxlIiwicmVxdWVzdCIsInJlc3BvbnNlIiwiZ2V0Iiwic3RhdHVzIiwiYm9keSIsImpzb24iLCJBcnJheSIsImlzQXJyYXkiLCJjb2x1bW5zIiwidG9CZUdyZWF0ZXJUaGFuIiwidG9Db250YWluIiwid2FpdEZvclRpbWVvdXQiLCJyZWxldmFudCIsInQiLCJ0b0VxdWFsIl0sInNvdXJjZXMiOlsiSmlyYS1SZXBvcnRpbmctQXBwLVJlZmFjdG9yLVNTT1QtVmFsaWRhdGlvbi1UZXN0cy5zcGVjLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogUmVmYWN0b3IgU1NPVCBWYWxpZGF0aW9uIFRlc3RzXG4gKiBWYWxpZGF0ZXM6IEJvYXJkcyBjb2x1bW4gb3JkZXIsIGxlYWRlci1mcmllbmRseSB0b29sdGlwcywgY2FwYWNpdHkgY29sdW1ucyxcbiAqIENTVi9FeGNlbCBjb2x1bW4gY29uc2lzdGVuY3ksIGFuZCBubyBjb25zb2xlIGVycm9ycyBkdXJpbmcgcHJldmlldy9leHBvcnQgZmxvdy5cbiAqL1xuXG5pbXBvcnQgeyB0ZXN0LCBleHBlY3QgfSBmcm9tICdAcGxheXdyaWdodC90ZXN0JztcbmltcG9ydCB7IHJ1bkRlZmF1bHRQcmV2aWV3LCB3YWl0Rm9yUHJldmlldyB9IGZyb20gJy4vSmlyYVJlcG9ydGluZy1UZXN0cy1TaGFyZWQtUHJldmlld0V4cG9ydC1IZWxwZXJzLmpzJztcblxuY29uc3QgQk9BUkRfQ09MVU1OX09SREVSID0gW1xuICAnQm9hcmQgSUQnLCAnQm9hcmQnLCAnVHlwZScsICdQcm9qZWN0cycsICdTcHJpbnRzJywgJ1NwcmludCBEYXlzJywgJ0F2ZyBTcHJpbnQgRGF5cycsXG4gICdEb25lIFN0b3JpZXMnLCAnRG9uZSBTUCcsICdDb21taXR0ZWQgU1AnLCAnRGVsaXZlcmVkIFNQJywgJ1NQIEVzdGltYXRpb24gJScsXG4gICdTdG9yaWVzIC8gU3ByaW50JywgJ1NQIC8gU3RvcnknLCAnU3RvcmllcyAvIERheScsICdTUCAvIERheScsICdTUCAvIFNwcmludCcsICdTUCBWYXJpYW5jZScsXG4gICdJbmRleGVkIERlbGl2ZXJ5JyxcbiAgJ09uLVRpbWUgJScsICdQbGFubmVkJywgJ0FkLWhvYycsICdBY3RpdmUgQXNzaWduZWVzJywgJ1N0b3JpZXMgLyBBc3NpZ25lZScsICdTUCAvIEFzc2lnbmVlJyxcbiAgJ0Fzc3VtZWQgQ2FwYWNpdHkgKFBEKScsICdBc3N1bWVkIFdhc3RlICUnLCAnU3ByaW50IFdpbmRvdycsICdMYXRlc3QgRW5kJyxcbl07XG5cbnRlc3QuZGVzY3JpYmUoJ0ppcmEgUmVwb3J0aW5nIEFwcCAtIFJlZmFjdG9yIFNTT1QgVmFsaWRhdGlvbiBUZXN0cycsICgpID0+IHtcbiAgdGVzdC5iZWZvcmVFYWNoKGFzeW5jICh7IHBhZ2UgfSkgPT4ge1xuICAgIGNvbnN0IGNvbnNvbGVFcnJvcnMgPSBbXTtcbiAgICBwYWdlLm9uKCdjb25zb2xlJywgKG1zZykgPT4ge1xuICAgICAgaWYgKG1zZy50eXBlKCkgPT09ICdlcnJvcicpIHtcbiAgICAgICAgY29uc29sZUVycm9ycy5wdXNoKHsgdGV4dDogbXNnLnRleHQoKSwgbG9jYXRpb246IG1zZy5sb2NhdGlvbigpIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHBhZ2Uuc2V0RXh0cmFIVFRQSGVhZGVycyh7ICdBY2NlcHQnOiAndGV4dC9odG1sJyB9KTtcbiAgfSk7XG5cbiAgdGVzdCgnQm9hcmRzIHRhYmxlIGhlYWRlcnMgYXBwZWFyIGluIGFncmVlZCBvcmRlciB3aGVuIGJvYXJkcyBleGlzdCcsIGFzeW5jICh7IHBhZ2UgfSkgPT4ge1xuICAgIGF3YWl0IHBhZ2UuZ290bygnL3JlcG9ydCcpO1xuICAgIGF3YWl0IHJ1bkRlZmF1bHRQcmV2aWV3KHBhZ2UpO1xuICAgIGF3YWl0IHBhZ2UuY2xpY2soJy50YWItYnRuW2RhdGEtdGFiPVwicHJvamVjdC1lcGljLWxldmVsXCJdJyk7XG4gICAgY29uc3QgYm9hcmRzU2VjdGlvbiA9IHBhZ2UubG9jYXRvcignI3Byb2plY3QtZXBpYy1sZXZlbC1jb250ZW50Jyk7XG4gICAgYXdhaXQgZXhwZWN0KGJvYXJkc1NlY3Rpb24pLnRvQmVWaXNpYmxlKHsgdGltZW91dDogNTAwMCB9KTtcbiAgICBjb25zdCBzZWN0aW9uVGV4dCA9IGF3YWl0IGJvYXJkc1NlY3Rpb24udGV4dENvbnRlbnQoKTtcbiAgICBpZiAoIXNlY3Rpb25UZXh0IHx8ICFzZWN0aW9uVGV4dC5pbmNsdWRlcygnQm9hcmQgSUQnKSkge1xuICAgICAgYXdhaXQgZXhwZWN0KGJvYXJkc1NlY3Rpb24pLnRvQ29udGFpblRleHQoL05vIGJvYXJkc3xkaXNjb3ZlcmVkfGRhdGUgd2luZG93L2kpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBmaXJzdFRhYmxlID0gYm9hcmRzU2VjdGlvbi5sb2NhdG9yKCd0YWJsZS5kYXRhLXRhYmxlJykuZmlyc3QoKTtcbiAgICBhd2FpdCBleHBlY3QoZmlyc3RUYWJsZSkudG9CZVZpc2libGUoeyB0aW1lb3V0OiA1MDAwIH0pO1xuICAgIGNvbnN0IHRocyA9IGZpcnN0VGFibGUubG9jYXRvcigndGhlYWQgdGgnKTtcbiAgICBjb25zdCBjb3VudCA9IGF3YWl0IHRocy5jb3VudCgpO1xuICAgIGV4cGVjdChjb3VudCkudG9CZShCT0FSRF9DT0xVTU5fT1JERVIubGVuZ3RoKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IEJPQVJEX0NPTFVNTl9PUkRFUi5sZW5ndGg7IGkrKykge1xuICAgICAgYXdhaXQgZXhwZWN0KHRocy5udGgoaSkpLnRvQ29udGFpblRleHQoQk9BUkRfQ09MVU1OX09SREVSW2ldKTtcbiAgICB9XG4gIH0pO1xuXG4gIHRlc3QoJ0JvYXJkcyB0YWJsZSBoYXMgdG9vbHRpcHMgb24ga2V5IGNvbHVtbnMgKFR5cGUsIFBsYW5uZWQsIEFkLWhvYywgTGF0ZXN0IEVuZCknLCBhc3luYyAoeyBwYWdlIH0pID0+IHtcbiAgICBhd2FpdCBwYWdlLmdvdG8oJy9yZXBvcnQnKTtcbiAgICBhd2FpdCBydW5EZWZhdWx0UHJldmlldyhwYWdlKTtcbiAgICBhd2FpdCBwYWdlLmNsaWNrKCcudGFiLWJ0bltkYXRhLXRhYj1cInByb2plY3QtZXBpYy1sZXZlbFwiXScpO1xuICAgIGNvbnN0IGJvYXJkc1NlY3Rpb24gPSBwYWdlLmxvY2F0b3IoJyNwcm9qZWN0LWVwaWMtbGV2ZWwtY29udGVudCcpO1xuICAgIGNvbnN0IHNlY3Rpb25UZXh0ID0gYXdhaXQgYm9hcmRzU2VjdGlvbi50ZXh0Q29udGVudCgpO1xuICAgIGlmICghc2VjdGlvblRleHQgfHwgIXNlY3Rpb25UZXh0LmluY2x1ZGVzKCdCb2FyZCBJRCcpKSB7XG4gICAgICB0ZXN0LnNraXAoJ05vIGJvYXJkcyB0YWJsZSAobm8gYm9hcmRzIGluIHdpbmRvdyknKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgdGFibGUgPSBib2FyZHNTZWN0aW9uLmxvY2F0b3IoJ3RhYmxlLmRhdGEtdGFibGUnKS5maXJzdCgpO1xuICAgIGF3YWl0IGV4cGVjdCh0YWJsZSkudG9CZVZpc2libGUoeyB0aW1lb3V0OiA1MDAwIH0pO1xuICAgIGNvbnN0IHR5cGVUaCA9IHRhYmxlLmxvY2F0b3IoJ3RoJykuZmlsdGVyKHsgaGFzVGV4dDogJ1R5cGUnIH0pLmZpcnN0KCk7XG4gICAgYXdhaXQgZXhwZWN0KHR5cGVUaCkudG9IYXZlQXR0cmlidXRlKCd0aXRsZScsIC9Cb2FyZCB0eXBlfFNjcnVtfEthbmJhbi9pKTtcbiAgICBjb25zdCBwbGFubmVkVGggPSB0YWJsZS5sb2NhdG9yKCd0aCcpLmZpbHRlcih7IGhhc1RleHQ6ICdQbGFubmVkJyB9KS5maXJzdCgpO1xuICAgIGF3YWl0IGV4cGVjdChwbGFubmVkVGgpLnRvSGF2ZUF0dHJpYnV0ZSgndGl0bGUnLCAvRXBpY3xwbGFubmVkL2kpO1xuICAgIGNvbnN0IGFkaG9jVGggPSB0YWJsZS5sb2NhdG9yKCd0aCcpLmZpbHRlcih7IGhhc1RleHQ6ICdBZC1ob2MnIH0pLmZpcnN0KCk7XG4gICAgYXdhaXQgZXhwZWN0KGFkaG9jVGgpLnRvSGF2ZUF0dHJpYnV0ZSgndGl0bGUnLCAvd2l0aG91dCBhbiBFcGljfHVucGxhbm5lZC9pKTtcbiAgICBjb25zdCBsYXRlc3RFbmRUaCA9IHRhYmxlLmxvY2F0b3IoJ3RoJykuZmlsdGVyKHsgaGFzVGV4dDogJ0xhdGVzdCBFbmQnIH0pLmZpcnN0KCk7XG4gICAgYXdhaXQgZXhwZWN0KGxhdGVzdEVuZFRoKS50b0hhdmVBdHRyaWJ1dGUoJ3RpdGxlJywgL3NwcmludCBlbmR8d2luZG93L2kpO1xuICB9KTtcblxuICB0ZXN0KCdCb2FyZHMgdGFibGUgc2hvd3MgY2FwYWNpdHkgcHJveHkgY29sdW1ucyAoQWN0aXZlIEFzc2lnbmVlcywgQXNzdW1lZCBDYXBhY2l0eSwgQXNzdW1lZCBXYXN0ZSknLCBhc3luYyAoeyBwYWdlIH0pID0+IHtcbiAgICBhd2FpdCBwYWdlLmdvdG8oJy9yZXBvcnQnKTtcbiAgICBhd2FpdCBydW5EZWZhdWx0UHJldmlldyhwYWdlKTtcbiAgICBhd2FpdCBwYWdlLmNsaWNrKCcudGFiLWJ0bltkYXRhLXRhYj1cInByb2plY3QtZXBpYy1sZXZlbFwiXScpO1xuICAgIGNvbnN0IGJvYXJkc1NlY3Rpb24gPSBwYWdlLmxvY2F0b3IoJyNwcm9qZWN0LWVwaWMtbGV2ZWwtY29udGVudCcpO1xuICAgIGNvbnN0IHNlY3Rpb25UZXh0ID0gYXdhaXQgYm9hcmRzU2VjdGlvbi50ZXh0Q29udGVudCgpO1xuICAgIGlmICghc2VjdGlvblRleHQgfHwgIXNlY3Rpb25UZXh0LmluY2x1ZGVzKCdCb2FyZCBJRCcpKSB7XG4gICAgICB0ZXN0LnNraXAoJ05vIGJvYXJkcyB0YWJsZSAobm8gYm9hcmRzIGluIHdpbmRvdyknKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgYm9hcmRzVGFibGUgPSBib2FyZHNTZWN0aW9uLmxvY2F0b3IoJ3RhYmxlLmRhdGEtdGFibGUnKS5maXJzdCgpO1xuICAgIGF3YWl0IGV4cGVjdChib2FyZHNUYWJsZSkudG9CZVZpc2libGUoeyB0aW1lb3V0OiA1MDAwIH0pO1xuICAgIGF3YWl0IGV4cGVjdChib2FyZHNUYWJsZS5sb2NhdG9yKCd0aCcsIHsgaGFzVGV4dDogJ0FjdGl2ZSBBc3NpZ25lZXMnIH0pKS50b0JlVmlzaWJsZSgpO1xuICAgIGF3YWl0IGV4cGVjdChib2FyZHNUYWJsZS5sb2NhdG9yKCd0aCcsIHsgaGFzVGV4dDogJ0Fzc3VtZWQgQ2FwYWNpdHkgKFBEKScgfSkpLnRvQmVWaXNpYmxlKCk7XG4gICAgYXdhaXQgZXhwZWN0KGJvYXJkc1RhYmxlLmxvY2F0b3IoJ3RoJywgeyBoYXNUZXh0OiAnQXNzdW1lZCBXYXN0ZSAlJyB9KSkudG9CZVZpc2libGUoKTtcbiAgfSk7XG5cbiAgdGVzdCgnQVBJIC9hcGkvY3N2LWNvbHVtbnMgcmV0dXJucyBjb2x1bW5zIG1hdGNoaW5nIEJvYXJkcyBTU09UIGNvbnRyYWN0JywgYXN5bmMgKHsgcmVxdWVzdCB9KSA9PiB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0LmdldCgnL2FwaS9jc3YtY29sdW1ucycpO1xuICAgIGlmIChyZXNwb25zZS5zdGF0dXMoKSA9PT0gNDAxKSB7XG4gICAgICB0ZXN0LnNraXAoJ0F1dGggcmVxdWlyZWQnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHJlc3BvbnNlLnN0YXR1cygpID09PSA0MDQpIHtcbiAgICAgIHRlc3Quc2tpcCgnUm91dGUgL2FwaS9jc3YtY29sdW1ucyBub3QgZm91bmQgKHJlc3RhcnQgc2VydmVyIHdpdGggbGF0ZXN0IGNvZGUpJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMoKSkudG9CZSgyMDApO1xuICAgIGNvbnN0IGJvZHkgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgZXhwZWN0KEFycmF5LmlzQXJyYXkoYm9keS5jb2x1bW5zKSkudG9CZSh0cnVlKTtcbiAgICBleHBlY3QoYm9keS5jb2x1bW5zLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDQwKTtcbiAgICBleHBlY3QoYm9keS5jb2x1bW5zKS50b0NvbnRhaW4oJ2lzc3VlS2V5Jyk7XG4gICAgZXhwZWN0KGJvZHkuY29sdW1ucykudG9Db250YWluKCdzdG9yeVBvaW50cycpO1xuICAgIGV4cGVjdChib2R5LmNvbHVtbnMpLnRvQ29udGFpbignZXBpY0tleScpO1xuICB9KTtcblxuICB0ZXN0KCdQcmV2aWV3IGFuZCBCb2FyZHMgdGFiIHJlbmRlciB3aXRob3V0IGNvbnNvbGUgZXJyb3JzJywgYXN5bmMgKHsgcGFnZSB9KSA9PiB7XG4gICAgY29uc3QgY29uc29sZUVycm9ycyA9IFtdO1xuICAgIHBhZ2Uub24oJ2NvbnNvbGUnLCAobXNnKSA9PiB7XG4gICAgICBpZiAobXNnLnR5cGUoKSA9PT0gJ2Vycm9yJykge1xuICAgICAgICBjb25zb2xlRXJyb3JzLnB1c2gobXNnLnRleHQoKSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgYXdhaXQgcGFnZS5nb3RvKCcvcmVwb3J0Jyk7XG4gICAgYXdhaXQgcnVuRGVmYXVsdFByZXZpZXcocGFnZSk7XG4gICAgYXdhaXQgcGFnZS5jbGljaygnLnRhYi1idG5bZGF0YS10YWI9XCJwcm9qZWN0LWVwaWMtbGV2ZWxcIl0nKTtcbiAgICBhd2FpdCBwYWdlLndhaXRGb3JUaW1lb3V0KDUwMCk7XG4gICAgY29uc3QgcmVsZXZhbnQgPSBjb25zb2xlRXJyb3JzLmZpbHRlcih0ID0+ICF0LmluY2x1ZGVzKCdmYXZpY29uJykgJiYgIXQuaW5jbHVkZXMoJzQwNCcpKTtcbiAgICBleHBlY3QocmVsZXZhbnQpLnRvRXF1YWwoW10pO1xuICB9KTtcbn0pO1xuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLFNBQVNBLElBQUksRUFBRUMsTUFBTSxRQUFRLGtCQUFrQjtBQUMvQyxTQUFTQyxpQkFBaUIsRUFBRUMsY0FBYyxRQUFRLHVEQUF1RDtBQUV6RyxNQUFNQyxrQkFBa0IsR0FBRyxDQUN6QixVQUFVLEVBQUUsT0FBTyxFQUFFLE1BQU0sRUFBRSxVQUFVLEVBQUUsU0FBUyxFQUFFLGFBQWEsRUFBRSxpQkFBaUIsRUFDcEYsY0FBYyxFQUFFLFNBQVMsRUFBRSxjQUFjLEVBQUUsY0FBYyxFQUFFLGlCQUFpQixFQUM1RSxrQkFBa0IsRUFBRSxZQUFZLEVBQUUsZUFBZSxFQUFFLFVBQVUsRUFBRSxhQUFhLEVBQUUsYUFBYSxFQUMzRixrQkFBa0IsRUFDbEIsV0FBVyxFQUFFLFNBQVMsRUFBRSxRQUFRLEVBQUUsa0JBQWtCLEVBQUUsb0JBQW9CLEVBQUUsZUFBZSxFQUMzRix1QkFBdUIsRUFBRSxpQkFBaUIsRUFBRSxlQUFlLEVBQUUsWUFBWSxDQUMxRTtBQUVESixJQUFJLENBQUNLLFFBQVEsQ0FBQyxxREFBcUQsRUFBRSxNQUFNO0VBQ3pFTCxJQUFJLENBQUNNLFVBQVUsQ0FBQyxPQUFPO0lBQUVDO0VBQUssQ0FBQyxLQUFLO0lBQ2xDLE1BQU1DLGFBQWEsR0FBRyxFQUFFO0lBQ3hC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