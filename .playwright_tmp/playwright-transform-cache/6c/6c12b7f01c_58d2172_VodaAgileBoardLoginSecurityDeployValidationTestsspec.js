import { test, expect } from '@playwright/test';
const testUser = process.env.TEST_LOGIN_USER || process.env.APP_LOGIN_USER || '';
const testPass = process.env.TEST_LOGIN_PASSWORD || process.env.APP_LOGIN_PASSWORD || '';
function captureConsoleErrors(page) {
  const errors = [];
  page.on('console', msg => {
    if (msg.type() === 'error') errors.push({
      type: msg.type(),
      text: msg.text()
    });
  });
  return errors;
}
test.describe('VodaAgileBoard – Login, Security & Deploy Validation', () => {
  test('GET / shows login page or redirects to /report when auth disabled', async ({
    page
  }) => {
    const consoleErrors = captureConsoleErrors(page);
    await page.goto('/', {
      waitUntil: 'load'
    });
    const url = page.url();
    const hasLoginForm = await page.locator('#username').isVisible().catch(() => false);
    if (hasLoginForm) {
      await expect(page.locator('h1')).toContainText('VodaAgileBoard');
      await expect(page.locator('input[name="username"]')).toBeVisible();
      await expect(page.locator('input[name="password"]')).toBeVisible();
      await expect(page.locator('button[type="submit"]')).toBeVisible();
      const honeypot = page.locator('#website');
      await expect(honeypot).toHaveCount(1);
      await expect(honeypot).toBeHidden();
    } else {
      if (!url.match(/\/report$/)) await page.goto('/report');
      await expect(page.locator('h1')).toContainText('VodaAgileBoard');
      await expect(page.locator('#preview-btn')).toBeVisible();
    }
    const errs = consoleErrors.filter(e => e.type === 'error');
    const relevant = errs.filter(e => !(e.text && e.text.includes('404') && (e.text.includes('csv-columns') || e.text.includes('Failed to load resource'))));
    expect(relevant).toHaveLength(0);
  });
  test('honeypot rejection when auth enabled', async ({
    page
  }) => {
    const consoleErrors = captureConsoleErrors(page);
    await page.goto('/');
    const hasLogin = await page.locator('#username').isVisible().catch(() => false);
    if (!hasLogin) {
      test.skip(true, 'Auth disabled – no login form');
      return;
    }
    await page.fill('#username', testUser || 'u');
    await page.fill('#password', testPass || 'p');
    await page.fill('#website', 'bot-filled');
    await page.click('button[type="submit"]');
    await page.waitForURL(/\/(login)?(\?|$)/, {
      timeout: 5000
    }).catch(() => {});
    const finalUrl = page.url();
    expect(finalUrl).not.toMatch(/\/report$/);
    expect(consoleErrors.filter(e => e.type === 'error')).toHaveLength(0);
  });
  test('invalid credentials when auth enabled', async ({
    page
  }) => {
    const consoleErrors = captureConsoleErrors(page);
    await page.goto('/login');
    const hasLogin = await page.locator('#username').isVisible().catch(() => false);
    if (!hasLogin) {
      test.skip(true, 'Auth disabled');
      return;
    }
    await page.fill('#username', 'wronguser');
    await page.fill('#password', 'wrongpass');
    await page.click('button[type="submit"]');
    await page.waitForURL(/\/(login)?(\?|$)/, {
      timeout: 5000
    }).catch(() => {});
    const stayOnLogin = page.url().includes('/login') || (await page.locator('#username').isVisible());
    expect(stayOnLogin).toBeTruthy();
    expect(consoleErrors.filter(e => e.type === 'error')).toHaveLength(0);
  });
  test('valid login redirects to /report when auth enabled', async ({
    page
  }) => {
    const consoleErrors = captureConsoleErrors(page);
    await page.goto('/login');
    const hasLogin = await page.locator('#username').isVisible().catch(() => false);
    if (!hasLogin || !testUser || !testPass) {
      test.skip(true, 'Auth disabled or no test credentials');
      return;
    }
    await page.fill('#username', testUser);
    await page.fill('#password', testPass);
    await page.click('button[type="submit"]');
    await page.waitForURL(/\/report/, {
      timeout: 10000
    });
    await expect(page.locator('h1')).toContainText('VodaAgileBoard');
    await expect(page.locator('#preview-btn')).toBeVisible();
    expect(consoleErrors.filter(e => e.type === 'error')).toHaveLength(0);
  });
  test('protected /report redirects to login when auth enabled and not logged in', async ({
    page
  }) => {
    const consoleErrors = captureConsoleErrors(page);
    await page.goto('/report');
    const url = page.url();
    const hasLogin = await page.locator('#username').isVisible().catch(() => false);
    if (!hasLogin) {
      expect(url).toMatch(/\/report$/);
      test.skip(true, 'Auth disabled – /report accessible');
      return;
    }
    expect(url).toMatch(/\/(login)?(\?|$)/);
    expect(consoleErrors.filter(e => e.type === 'error')).toHaveLength(0);
  });
  test('protected API returns 401 when auth enabled and no session', async ({
    request
  }) => {
    const response = await request.get('/preview.json?projects=MPSA');
    if (response.status() === 200) {
      test.skip(true, 'Auth disabled - API open');
      return;
    }
    if (response.status() === 500) {
      test.skip(true, 'Auth disabled or missing Jira credentials - API returned server error');
      return;
    }
    expect(response.status()).toBe(401);
    const json = await response.json().catch(() => ({}));
    expect(json.error || json.code).toBeTruthy();
  });
  test('post-login report flow when auth enabled', async ({
    page
  }) => {
    const consoleErrors = captureConsoleErrors(page);
    await page.goto('/');
    const hasLogin = await page.locator('#username').isVisible().catch(() => false);
    if (!hasLogin || !testUser || !testPass) {
      test.skip(true, 'Auth disabled or no test credentials');
      return;
    }
    await page.fill('#username', testUser);
    await page.fill('#password', testPass);
    await page.click('button[type="submit"]');
    await page.waitForURL(/\/report/, {
      timeout: 10000
    });
    await expect(page.locator('#preview-btn')).toBeVisible();
    await expect(page.locator('#project-mpsa')).toBeVisible();
    await page.click('#preview-btn');
    await Promise.race([page.waitForSelector('#loading', {
      state: 'visible',
      timeout: 5000
    }).catch(() => null), page.waitForSelector('#preview-content', {
      state: 'visible',
      timeout: 15000
    }).catch(() => null), page.waitForSelector('#error', {
      state: 'visible',
      timeout: 15000
    }).catch(() => null)]);
    const loading = await page.locator('#loading').isVisible().catch(() => false);
    if (loading) await page.waitForSelector('#loading', {
      state: 'hidden',
      timeout: 120000
    });
    const hasContent = await page.locator('#preview-content').isVisible().catch(() => false);
    const hasError = await page.locator('#error').isVisible().catch(() => false);
    expect(hasContent || hasError).toBeTruthy();
    expect(consoleErrors.filter(e => e.type === 'error')).toHaveLength(0);
  });
  test('shows session timeout message when error=timeout', async ({
    page
  }) => {
    const consoleErrors = captureConsoleErrors(page);
    await page.goto('/login?error=timeout&redirect=%2Freport');
    const hasLogin = await page.locator('#username').isVisible().catch(() => false);
    if (!hasLogin) {
      test.skip(true, 'Auth disabled – /login redirects to /report');
      return;
    }
    const message = await page.locator('#login-error').innerText();
    expect(message.toLowerCase()).toContain('session expired');
    expect(consoleErrors.filter(e => e.type === 'error')).toHaveLength(0);
  });
  test('stays on login after repeated invalid attempts (rate limit path)', async ({
    page
  }) => {
    const consoleErrors = captureConsoleErrors(page);
    await page.goto('/login');
    const hasLogin = await page.locator('#username').isVisible().catch(() => false);
    if (!hasLogin) {
      test.skip(true, 'Auth disabled');
      return;
    }
    for (let i = 0; i < 6; i++) {
      await page.fill('#username', `wrong${i}`);
      await page.fill('#password', `wrong${i}`);
      await page.click('button[type="submit"]');
      await page.waitForURL(/\/(login)?(\?|$)/, {
        timeout: 5000
      }).catch(() => {});
    }
    const url = page.url();
    const stayOnLogin = url.includes('/login') || (await page.locator('#username').isVisible());
    expect(stayOnLogin).toBeTruthy();
    expect(consoleErrors.filter(e => e.type === 'error')).toHaveLength(0);
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ0ZXN0IiwiZXhwZWN0IiwidGVzdFVzZXIiLCJwcm9jZXNzIiwiZW52IiwiVEVTVF9MT0dJTl9VU0VSIiwiQVBQX0xPR0lOX1VTRVIiLCJ0ZXN0UGFzcyIsIlRFU1RfTE9HSU5fUEFTU1dPUkQiLCJBUFBfTE9HSU5fUEFTU1dPUkQiLCJjYXB0dXJlQ29uc29sZUVycm9ycyIsInBhZ2UiLCJlcnJvcnMiLCJvbiIsIm1zZyIsInR5cGUiLCJwdXNoIiwidGV4dCIsImRlc2NyaWJlIiwiY29uc29sZUVycm9ycyIsImdvdG8iLCJ3YWl0VW50aWwiLCJ1cmwiLCJoYXNMb2dpbkZvcm0iLCJsb2NhdG9yIiwiaXNWaXNpYmxlIiwiY2F0Y2giLCJ0b0NvbnRhaW5UZXh0IiwidG9CZVZpc2libGUiLCJob25leXBvdCIsInRvSGF2ZUNvdW50IiwidG9CZUhpZGRlbiIsIm1hdGNoIiwiZXJycyIsImZpbHRlciIsImUiLCJyZWxldmFudCIsImluY2x1ZGVzIiwidG9IYXZlTGVuZ3RoIiwiaGFzTG9naW4iLCJza2lwIiwiZmlsbCIsImNsaWNrIiwid2FpdEZvclVSTCIsInRpbWVvdXQiLCJmaW5hbFVybCIsIm5vdCIsInRvTWF0Y2giLCJzdGF5T25Mb2dpbiIsInRvQmVUcnV0aHkiLCJyZXF1ZXN0IiwicmVzcG9uc2UiLCJnZXQiLCJzdGF0dXMiLCJ0b0JlIiwianNvbiIsImVycm9yIiwiY29kZSIsIlByb21pc2UiLCJyYWNlIiwid2FpdEZvclNlbGVjdG9yIiwic3RhdGUiLCJsb2FkaW5nIiwiaGFzQ29udGVudCIsImhhc0Vycm9yIiwibWVzc2FnZSIsImlubmVyVGV4dCIsInRvTG93ZXJDYXNlIiwidG9Db250YWluIiwiaSJdLCJzb3VyY2VzIjpbIlZvZGFBZ2lsZUJvYXJkLUxvZ2luLVNlY3VyaXR5LURlcGxveS1WYWxpZGF0aW9uLVRlc3RzLnNwZWMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdGVzdCwgZXhwZWN0IH0gZnJvbSAnQHBsYXl3cmlnaHQvdGVzdCc7XHJcblxyXG5jb25zdCB0ZXN0VXNlciA9IHByb2Nlc3MuZW52LlRFU1RfTE9HSU5fVVNFUiB8fCBwcm9jZXNzLmVudi5BUFBfTE9HSU5fVVNFUiB8fCAnJztcclxuY29uc3QgdGVzdFBhc3MgPSBwcm9jZXNzLmVudi5URVNUX0xPR0lOX1BBU1NXT1JEIHx8IHByb2Nlc3MuZW52LkFQUF9MT0dJTl9QQVNTV09SRCB8fCAnJztcclxuXHJcbmZ1bmN0aW9uIGNhcHR1cmVDb25zb2xlRXJyb3JzKHBhZ2UpIHtcclxuICBjb25zdCBlcnJvcnMgPSBbXTtcclxuICBwYWdlLm9uKCdjb25zb2xlJywgKG1zZykgPT4ge1xyXG4gICAgaWYgKG1zZy50eXBlKCkgPT09ICdlcnJvcicpIGVycm9ycy5wdXNoKHsgdHlwZTogbXNnLnR5cGUoKSwgdGV4dDogbXNnLnRleHQoKSB9KTtcclxuICB9KTtcclxuICByZXR1cm4gZXJyb3JzO1xyXG59XHJcblxyXG50ZXN0LmRlc2NyaWJlKCdWb2RhQWdpbGVCb2FyZCDigJMgTG9naW4sIFNlY3VyaXR5ICYgRGVwbG95IFZhbGlkYXRpb24nLCAoKSA9PiB7XHJcbiAgdGVzdCgnR0VUIC8gc2hvd3MgbG9naW4gcGFnZSBvciByZWRpcmVjdHMgdG8gL3JlcG9ydCB3aGVuIGF1dGggZGlzYWJsZWQnLCBhc3luYyAoeyBwYWdlIH0pID0+IHtcclxuICAgIGNvbnN0IGNvbnNvbGVFcnJvcnMgPSBjYXB0dXJlQ29uc29sZUVycm9ycyhwYWdlKTtcclxuICAgIGF3YWl0IHBhZ2UuZ290bygnLycsIHsgd2FpdFVudGlsOiAnbG9hZCcgfSk7XHJcbiAgICBjb25zdCB1cmwgPSBwYWdlLnVybCgpO1xyXG4gICAgY29uc3QgaGFzTG9naW5Gb3JtID0gYXdhaXQgcGFnZS5sb2NhdG9yKCcjdXNlcm5hbWUnKS5pc1Zpc2libGUoKS5jYXRjaCgoKSA9PiBmYWxzZSk7XHJcbiAgICBpZiAoaGFzTG9naW5Gb3JtKSB7XHJcbiAgICAgIGF3YWl0IGV4cGVjdChwYWdlLmxvY2F0b3IoJ2gxJykpLnRvQ29udGFpblRleHQoJ1ZvZGFBZ2lsZUJvYXJkJyk7XHJcbiAgICAgIGF3YWl0IGV4cGVjdChwYWdlLmxvY2F0b3IoJ2lucHV0W25hbWU9XCJ1c2VybmFtZVwiXScpKS50b0JlVmlzaWJsZSgpO1xyXG4gICAgICBhd2FpdCBleHBlY3QocGFnZS5sb2NhdG9yKCdpbnB1dFtuYW1lPVwicGFzc3dvcmRcIl0nKSkudG9CZVZpc2libGUoKTtcclxuICAgICAgYXdhaXQgZXhwZWN0KHBhZ2UubG9jYXRvcignYnV0dG9uW3R5cGU9XCJzdWJtaXRcIl0nKSkudG9CZVZpc2libGUoKTtcclxuICAgICAgY29uc3QgaG9uZXlwb3QgPSBwYWdlLmxvY2F0b3IoJyN3ZWJzaXRlJyk7XHJcbiAgICAgIGF3YWl0IGV4cGVjdChob25leXBvdCkudG9IYXZlQ291bnQoMSk7XHJcbiAgICAgIGF3YWl0IGV4cGVjdChob25leXBvdCkudG9CZUhpZGRlbigpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgaWYgKCF1cmwubWF0Y2goL1xcL3JlcG9ydCQvKSkgYXdhaXQgcGFnZS5nb3RvKCcvcmVwb3J0Jyk7XHJcbiAgICAgIGF3YWl0IGV4cGVjdChwYWdlLmxvY2F0b3IoJ2gxJykpLnRvQ29udGFpblRleHQoJ1ZvZGFBZ2lsZUJvYXJkJyk7XHJcbiAgICAgIGF3YWl0IGV4cGVjdChwYWdlLmxvY2F0b3IoJyNwcmV2aWV3LWJ0bicpKS50b0JlVmlzaWJsZSgpO1xyXG4gICAgfVxyXG4gICAgY29uc3QgZXJycyA9IGNvbnNvbGVFcnJvcnMuZmlsdGVyKChlKSA9PiBlLnR5cGUgPT09ICdlcnJvcicpO1xyXG4gICAgY29uc3QgcmVsZXZhbnQgPSBlcnJzLmZpbHRlcigoZSkgPT4gIShlLnRleHQgJiYgZS50ZXh0LmluY2x1ZGVzKCc0MDQnKSAmJiAoZS50ZXh0LmluY2x1ZGVzKCdjc3YtY29sdW1ucycpIHx8IGUudGV4dC5pbmNsdWRlcygnRmFpbGVkIHRvIGxvYWQgcmVzb3VyY2UnKSkpKTtcclxuICAgIGV4cGVjdChyZWxldmFudCkudG9IYXZlTGVuZ3RoKDApO1xyXG4gIH0pO1xyXG5cclxuICB0ZXN0KCdob25leXBvdCByZWplY3Rpb24gd2hlbiBhdXRoIGVuYWJsZWQnLCBhc3luYyAoeyBwYWdlIH0pID0+IHtcclxuICAgIGNvbnN0IGNvbnNvbGVFcnJvcnMgPSBjYXB0dXJlQ29uc29sZUVycm9ycyhwYWdlKTtcclxuICAgIGF3YWl0IHBhZ2UuZ290bygnLycpO1xyXG4gICAgY29uc3QgaGFzTG9naW4gPSBhd2FpdCBwYWdlLmxvY2F0b3IoJyN1c2VybmFtZScpLmlzVmlzaWJsZSgpLmNhdGNoKCgpID0+IGZhbHNlKTtcclxuICAgIGlmICghaGFzTG9naW4pIHtcclxuICAgICAgdGVzdC5za2lwKHRydWUsICdBdXRoIGRpc2FibGVkIOKAkyBubyBsb2dpbiBmb3JtJyk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGF3YWl0IHBhZ2UuZmlsbCgnI3VzZXJuYW1lJywgdGVzdFVzZXIgfHwgJ3UnKTtcclxuICAgIGF3YWl0IHBhZ2UuZmlsbCgnI3Bhc3N3b3JkJywgdGVzdFBhc3MgfHwgJ3AnKTtcclxuICAgIGF3YWl0IHBhZ2UuZmlsbCgnI3dlYnNpdGUnLCAnYm90LWZpbGxlZCcpO1xyXG4gICAgYXdhaXQgcGFnZS5jbGljaygnYnV0dG9uW3R5cGU9XCJzdWJtaXRcIl0nKTtcclxuICAgIGF3YWl0IHBhZ2Uud2FpdEZvclVSTCgvXFwvKGxvZ2luKT8oXFw/fCQpLywgeyB0aW1lb3V0OiA1MDAwIH0pLmNhdGNoKCgpID0+IHt9KTtcclxuICAgIGNvbnN0IGZpbmFsVXJsID0gcGFnZS51cmwoKTtcclxuICAgIGV4cGVjdChmaW5hbFVybCkubm90LnRvTWF0Y2goL1xcL3JlcG9ydCQvKTtcclxuICAgIGV4cGVjdChjb25zb2xlRXJyb3JzLmZpbHRlcigoZSkgPT4gZS50eXBlID09PSAnZXJyb3InKSkudG9IYXZlTGVuZ3RoKDApO1xyXG4gIH0pO1xyXG5cclxuICB0ZXN0KCdpbnZhbGlkIGNyZWRlbnRpYWxzIHdoZW4gYXV0aCBlbmFibGVkJywgYXN5bmMgKHsgcGFnZSB9KSA9PiB7XHJcbiAgICBjb25zdCBjb25zb2xlRXJyb3JzID0gY2FwdHVyZUNvbnNvbGVFcnJvcnMocGFnZSk7XHJcbiAgICBhd2FpdCBwYWdlLmdvdG8oJy9sb2dpbicpO1xyXG4gICAgY29uc3QgaGFzTG9naW4gPSBhd2FpdCBwYWdlLmxvY2F0b3IoJyN1c2VybmFtZScpLmlzVmlzaWJsZSgpLmNhdGNoKCgpID0+IGZhbHNlKTtcclxuICAgIGlmICghaGFzTG9naW4pIHtcclxuICAgICAgdGVzdC5za2lwKHRydWUsICdBdXRoIGRpc2FibGVkJyk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGF3YWl0IHBhZ2UuZmlsbCgnI3VzZXJuYW1lJywgJ3dyb25ndXNlcicpO1xyXG4gICAgYXdhaXQgcGFnZS5maWxsKCcjcGFzc3dvcmQnLCAnd3JvbmdwYXNzJyk7XHJcbiAgICBhd2FpdCBwYWdlLmNsaWNrKCdidXR0b25bdHlwZT1cInN1Ym1pdFwiXScpO1xyXG4gICAgYXdhaXQgcGFnZS53YWl0Rm9yVVJMKC9cXC8obG9naW4pPyhcXD98JCkvLCB7IHRpbWVvdXQ6IDUwMDAgfSkuY2F0Y2goKCkgPT4ge30pO1xyXG4gICAgY29uc3Qgc3RheU9uTG9naW4gPSBwYWdlLnVybCgpLmluY2x1ZGVzKCcvbG9naW4nKSB8fCAoYXdhaXQgcGFnZS5sb2NhdG9yKCcjdXNlcm5hbWUnKS5pc1Zpc2libGUoKSk7XHJcbiAgICBleHBlY3Qoc3RheU9uTG9naW4pLnRvQmVUcnV0aHkoKTtcclxuICAgIGV4cGVjdChjb25zb2xlRXJyb3JzLmZpbHRlcigoZSkgPT4gZS50eXBlID09PSAnZXJyb3InKSkudG9IYXZlTGVuZ3RoKDApO1xyXG4gIH0pO1xyXG5cclxuICB0ZXN0KCd2YWxpZCBsb2dpbiByZWRpcmVjdHMgdG8gL3JlcG9ydCB3aGVuIGF1dGggZW5hYmxlZCcsIGFzeW5jICh7IHBhZ2UgfSkgPT4ge1xyXG4gICAgY29uc3QgY29uc29sZUVycm9ycyA9IGNhcHR1cmVDb25zb2xlRXJyb3JzKHBhZ2UpO1xyXG4gICAgYXdhaXQgcGFnZS5nb3RvKCcvbG9naW4nKTtcclxuICAgIGNvbnN0IGhhc0xvZ2luID0gYXdhaXQgcGFnZS5sb2NhdG9yKCcjdXNlcm5hbWUnKS5pc1Zpc2libGUoKS5jYXRjaCgoKSA9PiBmYWxzZSk7XHJcbiAgICBpZiAoIWhhc0xvZ2luIHx8ICF0ZXN0VXNlciB8fCAhdGVzdFBhc3MpIHtcclxuICAgICAgdGVzdC5za2lwKHRydWUsICdBdXRoIGRpc2FibGVkIG9yIG5vIHRlc3QgY3JlZGVudGlhbHMnKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgYXdhaXQgcGFnZS5maWxsKCcjdXNlcm5hbWUnLCB0ZXN0VXNlcik7XHJcbiAgICBhd2FpdCBwYWdlLmZpbGwoJyNwYXNzd29yZCcsIHRlc3RQYXNzKTtcclxuICAgIGF3YWl0IHBhZ2UuY2xpY2soJ2J1dHRvblt0eXBlPVwic3VibWl0XCJdJyk7XHJcbiAgICBhd2FpdCBwYWdlLndhaXRGb3JVUkwoL1xcL3JlcG9ydC8sIHsgdGltZW91dDogMTAwMDAgfSk7XHJcbiAgICBhd2FpdCBleHBlY3QocGFnZS5sb2NhdG9yKCdoMScpKS50b0NvbnRhaW5UZXh0KCdWb2RhQWdpbGVCb2FyZCcpO1xyXG4gICAgYXdhaXQgZXhwZWN0KHBhZ2UubG9jYXRvcignI3ByZXZpZXctYnRuJykpLnRvQmVWaXNpYmxlKCk7XHJcbiAgICBleHBlY3QoY29uc29sZUVycm9ycy5maWx0ZXIoKGUpID0+IGUudHlwZSA9PT0gJ2Vycm9yJykpLnRvSGF2ZUxlbmd0aCgwKTtcclxuICB9KTtcclxuXHJcbiAgdGVzdCgncHJvdGVjdGVkIC9yZXBvcnQgcmVkaXJlY3RzIHRvIGxvZ2luIHdoZW4gYXV0aCBlbmFibGVkIGFuZCBub3QgbG9nZ2VkIGluJywgYXN5bmMgKHsgcGFnZSB9KSA9PiB7XHJcbiAgICBjb25zdCBjb25zb2xlRXJyb3JzID0gY2FwdHVyZUNvbnNvbGVFcnJvcnMocGFnZSk7XHJcbiAgICBhd2FpdCBwYWdlLmdvdG8oJy9yZXBvcnQnKTtcclxuICAgIGNvbnN0IHVybCA9IHBhZ2UudXJsKCk7XHJcbiAgICBjb25zdCBoYXNMb2dpbiA9IGF3YWl0IHBhZ2UubG9jYXRvcignI3VzZXJuYW1lJykuaXNWaXNpYmxlKCkuY2F0Y2goKCkgPT4gZmFsc2UpO1xyXG4gICAgaWYgKCFoYXNMb2dpbikge1xyXG4gICAgICBleHBlY3QodXJsKS50b01hdGNoKC9cXC9yZXBvcnQkLyk7XHJcbiAgICAgIHRlc3Quc2tpcCh0cnVlLCAnQXV0aCBkaXNhYmxlZCDigJMgL3JlcG9ydCBhY2Nlc3NpYmxlJyk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGV4cGVjdCh1cmwpLnRvTWF0Y2goL1xcLyhsb2dpbik/KFxcP3wkKS8pO1xyXG4gICAgZXhwZWN0KGNvbnNvbGVFcnJvcnMuZmlsdGVyKChlKSA9PiBlLnR5cGUgPT09ICdlcnJvcicpKS50b0hhdmVMZW5ndGgoMCk7XHJcbiAgfSk7XHJcblxyXG4gIHRlc3QoJ3Byb3RlY3RlZCBBUEkgcmV0dXJucyA0MDEgd2hlbiBhdXRoIGVuYWJsZWQgYW5kIG5vIHNlc3Npb24nLCBhc3luYyAoeyByZXF1ZXN0IH0pID0+IHtcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdC5nZXQoJy9wcmV2aWV3Lmpzb24/cHJvamVjdHM9TVBTQScpO1xyXG4gICAgaWYgKHJlc3BvbnNlLnN0YXR1cygpID09PSAyMDApIHtcclxuICAgICAgdGVzdC5za2lwKHRydWUsICdBdXRoIGRpc2FibGVkIC0gQVBJIG9wZW4nKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgaWYgKHJlc3BvbnNlLnN0YXR1cygpID09PSA1MDApIHtcclxuICAgICAgdGVzdC5za2lwKHRydWUsICdBdXRoIGRpc2FibGVkIG9yIG1pc3NpbmcgSmlyYSBjcmVkZW50aWFscyAtIEFQSSByZXR1cm5lZCBzZXJ2ZXIgZXJyb3InKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cygpKS50b0JlKDQwMSk7XHJcbiAgICBjb25zdCBqc29uID0gYXdhaXQgcmVzcG9uc2UuanNvbigpLmNhdGNoKCgpID0+ICh7fSkpO1xyXG4gICAgZXhwZWN0KGpzb24uZXJyb3IgfHwganNvbi5jb2RlKS50b0JlVHJ1dGh5KCk7XHJcbiAgfSk7XHJcblxyXG4gIHRlc3QoJ3Bvc3QtbG9naW4gcmVwb3J0IGZsb3cgd2hlbiBhdXRoIGVuYWJsZWQnLCBhc3luYyAoeyBwYWdlIH0pID0+IHtcclxuICAgIGNvbnN0IGNvbnNvbGVFcnJvcnMgPSBjYXB0dXJlQ29uc29sZUVycm9ycyhwYWdlKTtcclxuICAgIGF3YWl0IHBhZ2UuZ290bygnLycpO1xyXG4gICAgY29uc3QgaGFzTG9naW4gPSBhd2FpdCBwYWdlLmxvY2F0b3IoJyN1c2VybmFtZScpLmlzVmlzaWJsZSgpLmNhdGNoKCgpID0+IGZhbHNlKTtcclxuICAgIGlmICghaGFzTG9naW4gfHwgIXRlc3RVc2VyIHx8ICF0ZXN0UGFzcykge1xyXG4gICAgICB0ZXN0LnNraXAodHJ1ZSwgJ0F1dGggZGlzYWJsZWQgb3Igbm8gdGVzdCBjcmVkZW50aWFscycpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBhd2FpdCBwYWdlLmZpbGwoJyN1c2VybmFtZScsIHRlc3RVc2VyKTtcclxuICAgIGF3YWl0IHBhZ2UuZmlsbCgnI3Bhc3N3b3JkJywgdGVzdFBhc3MpO1xyXG4gICAgYXdhaXQgcGFnZS5jbGljaygnYnV0dG9uW3R5cGU9XCJzdWJtaXRcIl0nKTtcclxuICAgIGF3YWl0IHBhZ2Uud2FpdEZvclVSTCgvXFwvcmVwb3J0LywgeyB0aW1lb3V0OiAxMDAwMCB9KTtcclxuICAgIGF3YWl0IGV4cGVjdChwYWdlLmxvY2F0b3IoJyNwcmV2aWV3LWJ0bicpKS50b0JlVmlzaWJsZSgpO1xyXG4gICAgYXdhaXQgZXhwZWN0KHBhZ2UubG9jYXRvcignI3Byb2plY3QtbXBzYScpKS50b0JlVmlzaWJsZSgpO1xyXG4gICAgYXdhaXQgcGFnZS5jbGljaygnI3ByZXZpZXctYnRuJyk7XHJcbiAgICBhd2FpdCBQcm9taXNlLnJhY2UoW1xyXG4gICAgICBwYWdlLndhaXRGb3JTZWxlY3RvcignI2xvYWRpbmcnLCB7IHN0YXRlOiAndmlzaWJsZScsIHRpbWVvdXQ6IDUwMDAgfSkuY2F0Y2goKCkgPT4gbnVsbCksXHJcbiAgICAgIHBhZ2Uud2FpdEZvclNlbGVjdG9yKCcjcHJldmlldy1jb250ZW50JywgeyBzdGF0ZTogJ3Zpc2libGUnLCB0aW1lb3V0OiAxNTAwMCB9KS5jYXRjaCgoKSA9PiBudWxsKSxcclxuICAgICAgcGFnZS53YWl0Rm9yU2VsZWN0b3IoJyNlcnJvcicsIHsgc3RhdGU6ICd2aXNpYmxlJywgdGltZW91dDogMTUwMDAgfSkuY2F0Y2goKCkgPT4gbnVsbCksXHJcbiAgICBdKTtcclxuICAgIGNvbnN0IGxvYWRpbmcgPSBhd2FpdCBwYWdlLmxvY2F0b3IoJyNsb2FkaW5nJykuaXNWaXNpYmxlKCkuY2F0Y2goKCkgPT4gZmFsc2UpO1xyXG4gICAgaWYgKGxvYWRpbmcpIGF3YWl0IHBhZ2Uud2FpdEZvclNlbGVjdG9yKCcjbG9hZGluZycsIHsgc3RhdGU6ICdoaWRkZW4nLCB0aW1lb3V0OiAxMjAwMDAgfSk7XHJcbiAgICBjb25zdCBoYXNDb250ZW50ID0gYXdhaXQgcGFnZS5sb2NhdG9yKCcjcHJldmlldy1jb250ZW50JykuaXNWaXNpYmxlKCkuY2F0Y2goKCkgPT4gZmFsc2UpO1xyXG4gICAgY29uc3QgaGFzRXJyb3IgPSBhd2FpdCBwYWdlLmxvY2F0b3IoJyNlcnJvcicpLmlzVmlzaWJsZSgpLmNhdGNoKCgpID0+IGZhbHNlKTtcclxuICAgIGV4cGVjdChoYXNDb250ZW50IHx8IGhhc0Vycm9yKS50b0JlVHJ1dGh5KCk7XHJcbiAgICBleHBlY3QoY29uc29sZUVycm9ycy5maWx0ZXIoKGUpID0+IGUudHlwZSA9PT0gJ2Vycm9yJykpLnRvSGF2ZUxlbmd0aCgwKTtcclxuICB9KTtcclxuXHJcbiAgdGVzdCgnc2hvd3Mgc2Vzc2lvbiB0aW1lb3V0IG1lc3NhZ2Ugd2hlbiBlcnJvcj10aW1lb3V0JywgYXN5bmMgKHsgcGFnZSB9KSA9PiB7XHJcbiAgICBjb25zdCBjb25zb2xlRXJyb3JzID0gY2FwdHVyZUNvbnNvbGVFcnJvcnMocGFnZSk7XHJcbiAgICBhd2FpdCBwYWdlLmdvdG8oJy9sb2dpbj9lcnJvcj10aW1lb3V0JnJlZGlyZWN0PSUyRnJlcG9ydCcpO1xyXG4gICAgY29uc3QgaGFzTG9naW4gPSBhd2FpdCBwYWdlLmxvY2F0b3IoJyN1c2VybmFtZScpLmlzVmlzaWJsZSgpLmNhdGNoKCgpID0+IGZhbHNlKTtcclxuICAgIGlmICghaGFzTG9naW4pIHtcclxuICAgICAgdGVzdC5za2lwKHRydWUsICdBdXRoIGRpc2FibGVkIOKAkyAvbG9naW4gcmVkaXJlY3RzIHRvIC9yZXBvcnQnKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IHBhZ2UubG9jYXRvcignI2xvZ2luLWVycm9yJykuaW5uZXJUZXh0KCk7XHJcbiAgICBleHBlY3QobWVzc2FnZS50b0xvd2VyQ2FzZSgpKS50b0NvbnRhaW4oJ3Nlc3Npb24gZXhwaXJlZCcpO1xyXG4gICAgZXhwZWN0KGNvbnNvbGVFcnJvcnMuZmlsdGVyKChlKSA9PiBlLnR5cGUgPT09ICdlcnJvcicpKS50b0hhdmVMZW5ndGgoMCk7XHJcbiAgfSk7XHJcblxyXG4gIHRlc3QoJ3N0YXlzIG9uIGxvZ2luIGFmdGVyIHJlcGVhdGVkIGludmFsaWQgYXR0ZW1wdHMgKHJhdGUgbGltaXQgcGF0aCknLCBhc3luYyAoeyBwYWdlIH0pID0+IHtcclxuICAgIGNvbnN0IGNvbnNvbGVFcnJvcnMgPSBjYXB0dXJlQ29uc29sZUVycm9ycyhwYWdlKTtcclxuICAgIGF3YWl0IHBhZ2UuZ290bygnL2xvZ2luJyk7XHJcbiAgICBjb25zdCBoYXNMb2dpbiA9IGF3YWl0IHBhZ2UubG9jYXRvcignI3VzZXJuYW1lJykuaXNWaXNpYmxlKCkuY2F0Y2goKCkgPT4gZmFsc2UpO1xyXG4gICAgaWYgKCFoYXNMb2dpbikge1xyXG4gICAgICB0ZXN0LnNraXAodHJ1ZSwgJ0F1dGggZGlzYWJsZWQnKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCA2OyBpKyspIHtcclxuICAgICAgYXdhaXQgcGFnZS5maWxsKCcjdXNlcm5hbWUnLCBgd3Jvbmcke2l9YCk7XHJcbiAgICAgIGF3YWl0IHBhZ2UuZmlsbCgnI3Bhc3N3b3JkJywgYHdyb25nJHtpfWApO1xyXG4gICAgICBhd2FpdCBwYWdlLmNsaWNrKCdidXR0b25bdHlwZT1cInN1Ym1pdFwiXScpO1xyXG4gICAgICBhd2FpdCBwYWdlLndhaXRGb3JVUkwoL1xcLyhsb2dpbik/KFxcP3wkKS8sIHsgdGltZW91dDogNTAwMCB9KS5jYXRjaCgoKSA9PiB7fSk7XHJcbiAgICB9XHJcbiAgICBjb25zdCB1cmwgPSBwYWdlLnVybCgpO1xyXG4gICAgY29uc3Qgc3RheU9uTG9naW4gPSB1cmwuaW5jbHVkZXMoJy9sb2dpbicpIHx8IChhd2FpdCBwYWdlLmxvY2F0b3IoJyN1c2VybmFtZScpLmlzVmlzaWJsZSgpKTtcclxuICAgIGV4cGVjdChzdGF5T25Mb2dpbikudG9CZVRydXRoeSgpO1xyXG4gICAgZXhwZWN0KGNvbnNvbGVFcnJvcnMuZmlsdGVyKChlKSA9PiBlLnR5cGUgPT09ICdlcnJvcicpKS50b0hhdmVMZW5ndGgoMCk7XHJcbiAgfSk7XHJcbn0pO1xyXG4iXSwibWFwcGluZ3MiOiJBQUFBLFNBQVNBLElBQUksRUFBRUMsTUFBTSxRQUFRLGtCQUFrQjtBQUUvQyxNQUFNQyxRQUFRLEdBQUdDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyxlQUFlLElBQUlGLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDRSxjQUFjLElBQUksRUFBRTtBQUNoRixNQUFNQyxRQUFRLEdBQUdKLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDSSxtQkFB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