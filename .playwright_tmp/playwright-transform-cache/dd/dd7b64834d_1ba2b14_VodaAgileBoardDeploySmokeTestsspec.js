import { test, expect } from '@playwright/test';
const testUser = process.env.TEST_LOGIN_USER || process.env.APP_LOGIN_USER || '';
const testPass = process.env.TEST_LOGIN_PASSWORD || process.env.APP_LOGIN_PASSWORD || '';
function captureConsoleErrors(page) {
  const errors = [];
  page.on('console', msg => {
    if (msg.type() === 'error') errors.push({
      type: msg.type(),
      text: msg.text()
    });
  });
  return errors;
}

// Smoke tests to validate a running deployment (local or Render)
test.describe('VodaAgileBoard â€“ Deploy Smoke Tests', () => {
  test('core sprint report flow works on current BASE_URL', async ({
    page
  }) => {
    test.setTimeout(300000);
    const consoleErrors = captureConsoleErrors(page);
    await page.goto('/', {
      waitUntil: 'load'
    });
    const hasLogin = await page.locator('#username').isVisible().catch(() => false);
    if (hasLogin) {
      if (!testUser || !testPass) {
        test.skip(true, 'Auth enabled but no test credentials provided');
        return;
      }
      await page.fill('#username', testUser);
      await page.fill('#password', testPass);
      await page.click('button[type="submit"]');
      await page.waitForURL(/\/report/, {
        timeout: 20000
      });
    } else {
      if (!page.url().match(/\/report$/)) {
        await page.goto('/report');
      }
    }
    await expect(page.locator('h1')).toContainText('VodaAgileBoard');
    await expect(page.locator('#preview-btn')).toBeVisible();
    await expect(page.locator('#project-mpsa')).toBeVisible();
    await expect(page.locator('#project-mas')).toBeVisible();
    await page.click('#preview-btn');
    await Promise.race([page.waitForSelector('#loading', {
      state: 'visible',
      timeout: 10000
    }).catch(() => null), page.waitForSelector('#preview-content', {
      state: 'visible',
      timeout: 30000
    }).catch(() => null), page.waitForSelector('#error', {
      state: 'visible',
      timeout: 30000
    }).catch(() => null)]);
    const loading = await page.locator('#loading').isVisible().catch(() => false);
    if (loading) await page.waitForSelector('#loading', {
      state: 'hidden',
      timeout: 240000
    });
    const hasContent = await page.locator('#preview-content').isVisible().catch(() => false);
    const hasError = await page.locator('#error').isVisible().catch(() => false);
    expect(hasContent || hasError).toBeTruthy();
    const errorEvents = consoleErrors.filter(e => e.type === 'error');
    expect(errorEvents).toHaveLength(0);
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ0ZXN0IiwiZXhwZWN0IiwidGVzdFVzZXIiLCJwcm9jZXNzIiwiZW52IiwiVEVTVF9MT0dJTl9VU0VSIiwiQVBQX0xPR0lOX1VTRVIiLCJ0ZXN0UGFzcyIsIlRFU1RfTE9HSU5fUEFTU1dPUkQiLCJBUFBfTE9HSU5fUEFTU1dPUkQiLCJjYXB0dXJlQ29uc29sZUVycm9ycyIsInBhZ2UiLCJlcnJvcnMiLCJvbiIsIm1zZyIsInR5cGUiLCJwdXNoIiwidGV4dCIsImRlc2NyaWJlIiwic2V0VGltZW91dCIsImNvbnNvbGVFcnJvcnMiLCJnb3RvIiwid2FpdFVudGlsIiwiaGFzTG9naW4iLCJsb2NhdG9yIiwiaXNWaXNpYmxlIiwiY2F0Y2giLCJza2lwIiwiZmlsbCIsImNsaWNrIiwid2FpdEZvclVSTCIsInRpbWVvdXQiLCJ1cmwiLCJtYXRjaCIsInRvQ29udGFpblRleHQiLCJ0b0JlVmlzaWJsZSIsIlByb21pc2UiLCJyYWNlIiwid2FpdEZvclNlbGVjdG9yIiwic3RhdGUiLCJsb2FkaW5nIiwiaGFzQ29udGVudCIsImhhc0Vycm9yIiwidG9CZVRydXRoeSIsImVycm9yRXZlbnRzIiwiZmlsdGVyIiwiZSIsInRvSGF2ZUxlbmd0aCJdLCJzb3VyY2VzIjpbIlZvZGFBZ2lsZUJvYXJkLURlcGxveS1TbW9rZS1UZXN0cy5zcGVjLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHRlc3QsIGV4cGVjdCB9IGZyb20gJ0BwbGF5d3JpZ2h0L3Rlc3QnO1xyXG5cclxuY29uc3QgdGVzdFVzZXIgPSBwcm9jZXNzLmVudi5URVNUX0xPR0lOX1VTRVIgfHwgcHJvY2Vzcy5lbnYuQVBQX0xPR0lOX1VTRVIgfHwgJyc7XHJcbmNvbnN0IHRlc3RQYXNzID0gcHJvY2Vzcy5lbnYuVEVTVF9MT0dJTl9QQVNTV09SRCB8fCBwcm9jZXNzLmVudi5BUFBfTE9HSU5fUEFTU1dPUkQgfHwgJyc7XHJcblxyXG5mdW5jdGlvbiBjYXB0dXJlQ29uc29sZUVycm9ycyhwYWdlKSB7XHJcbiAgY29uc3QgZXJyb3JzID0gW107XHJcbiAgcGFnZS5vbignY29uc29sZScsIChtc2cpID0+IHtcclxuICAgIGlmIChtc2cudHlwZSgpID09PSAnZXJyb3InKSBlcnJvcnMucHVzaCh7IHR5cGU6IG1zZy50eXBlKCksIHRleHQ6IG1zZy50ZXh0KCkgfSk7XHJcbiAgfSk7XHJcbiAgcmV0dXJuIGVycm9ycztcclxufVxyXG5cclxuLy8gU21va2UgdGVzdHMgdG8gdmFsaWRhdGUgYSBydW5uaW5nIGRlcGxveW1lbnQgKGxvY2FsIG9yIFJlbmRlcilcclxudGVzdC5kZXNjcmliZSgnVm9kYUFnaWxlQm9hcmQg4oCTIERlcGxveSBTbW9rZSBUZXN0cycsICgpID0+IHtcclxuICB0ZXN0KCdjb3JlIHNwcmludCByZXBvcnQgZmxvdyB3b3JrcyBvbiBjdXJyZW50IEJBU0VfVVJMJywgYXN5bmMgKHsgcGFnZSB9KSA9PiB7XHJcbiAgICB0ZXN0LnNldFRpbWVvdXQoMzAwMDAwKTtcclxuICAgIGNvbnN0IGNvbnNvbGVFcnJvcnMgPSBjYXB0dXJlQ29uc29sZUVycm9ycyhwYWdlKTtcclxuXHJcbiAgICBhd2FpdCBwYWdlLmdvdG8oJy8nLCB7IHdhaXRVbnRpbDogJ2xvYWQnIH0pO1xyXG5cclxuICAgIGNvbnN0IGhhc0xvZ2luID0gYXdhaXQgcGFnZS5sb2NhdG9yKCcjdXNlcm5hbWUnKS5pc1Zpc2libGUoKS5jYXRjaCgoKSA9PiBmYWxzZSk7XHJcbiAgICBpZiAoaGFzTG9naW4pIHtcclxuICAgICAgaWYgKCF0ZXN0VXNlciB8fCAhdGVzdFBhc3MpIHtcclxuICAgICAgICB0ZXN0LnNraXAodHJ1ZSwgJ0F1dGggZW5hYmxlZCBidXQgbm8gdGVzdCBjcmVkZW50aWFscyBwcm92aWRlZCcpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICBhd2FpdCBwYWdlLmZpbGwoJyN1c2VybmFtZScsIHRlc3RVc2VyKTtcclxuICAgICAgYXdhaXQgcGFnZS5maWxsKCcjcGFzc3dvcmQnLCB0ZXN0UGFzcyk7XHJcbiAgICAgIGF3YWl0IHBhZ2UuY2xpY2soJ2J1dHRvblt0eXBlPVwic3VibWl0XCJdJyk7XHJcbiAgICAgIGF3YWl0IHBhZ2Uud2FpdEZvclVSTCgvXFwvcmVwb3J0LywgeyB0aW1lb3V0OiAyMDAwMCB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGlmICghcGFnZS51cmwoKS5tYXRjaCgvXFwvcmVwb3J0JC8pKSB7XHJcbiAgICAgICAgYXdhaXQgcGFnZS5nb3RvKCcvcmVwb3J0Jyk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBhd2FpdCBleHBlY3QocGFnZS5sb2NhdG9yKCdoMScpKS50b0NvbnRhaW5UZXh0KCdWb2RhQWdpbGVCb2FyZCcpO1xyXG4gICAgYXdhaXQgZXhwZWN0KHBhZ2UubG9jYXRvcignI3ByZXZpZXctYnRuJykpLnRvQmVWaXNpYmxlKCk7XHJcbiAgICBhd2FpdCBleHBlY3QocGFnZS5sb2NhdG9yKCcjcHJvamVjdC1tcHNhJykpLnRvQmVWaXNpYmxlKCk7XHJcbiAgICBhd2FpdCBleHBlY3QocGFnZS5sb2NhdG9yKCcjcHJvamVjdC1tYXMnKSkudG9CZVZpc2libGUoKTtcclxuXHJcbiAgICBhd2FpdCBwYWdlLmNsaWNrKCcjcHJldmlldy1idG4nKTtcclxuXHJcbiAgICBhd2FpdCBQcm9taXNlLnJhY2UoW1xyXG4gICAgICBwYWdlLndhaXRGb3JTZWxlY3RvcignI2xvYWRpbmcnLCB7IHN0YXRlOiAndmlzaWJsZScsIHRpbWVvdXQ6IDEwMDAwIH0pLmNhdGNoKCgpID0+IG51bGwpLFxyXG4gICAgICBwYWdlLndhaXRGb3JTZWxlY3RvcignI3ByZXZpZXctY29udGVudCcsIHsgc3RhdGU6ICd2aXNpYmxlJywgdGltZW91dDogMzAwMDAgfSkuY2F0Y2goKCkgPT4gbnVsbCksXHJcbiAgICAgIHBhZ2Uud2FpdEZvclNlbGVjdG9yKCcjZXJyb3InLCB7IHN0YXRlOiAndmlzaWJsZScsIHRpbWVvdXQ6IDMwMDAwIH0pLmNhdGNoKCgpID0+IG51bGwpLFxyXG4gICAgXSk7XHJcblxyXG4gICAgY29uc3QgbG9hZGluZyA9IGF3YWl0IHBhZ2UubG9jYXRvcignI2xvYWRpbmcnKS5pc1Zpc2libGUoKS5jYXRjaCgoKSA9PiBmYWxzZSk7XHJcbiAgICBpZiAobG9hZGluZykgYXdhaXQgcGFnZS53YWl0Rm9yU2VsZWN0b3IoJyNsb2FkaW5nJywgeyBzdGF0ZTogJ2hpZGRlbicsIHRpbWVvdXQ6IDI0MDAwMCB9KTtcclxuXHJcbiAgICBjb25zdCBoYXNDb250ZW50ID0gYXdhaXQgcGFnZS5sb2NhdG9yKCcjcHJldmlldy1jb250ZW50JykuaXNWaXNpYmxlKCkuY2F0Y2goKCkgPT4gZmFsc2UpO1xyXG4gICAgY29uc3QgaGFzRXJyb3IgPSBhd2FpdCBwYWdlLmxvY2F0b3IoJyNlcnJvcicpLmlzVmlzaWJsZSgpLmNhdGNoKCgpID0+IGZhbHNlKTtcclxuICAgIGV4cGVjdChoYXNDb250ZW50IHx8IGhhc0Vycm9yKS50b0JlVHJ1dGh5KCk7XHJcblxyXG4gICAgY29uc3QgZXJyb3JFdmVudHMgPSBjb25zb2xlRXJyb3JzLmZpbHRlcigoZSkgPT4gZS50eXBlID09PSAnZXJyb3InKTtcclxuICAgIGV4cGVjdChlcnJvckV2ZW50cykudG9IYXZlTGVuZ3RoKDApO1xyXG4gIH0pO1xyXG59KTtcclxuXHJcbiJdLCJtYXBwaW5ncyI6IkFBQUEsU0FBU0EsSUFBSSxFQUFFQyxNQUFNLFFBQVEsa0JBQWtCO0FBRS9DLE1BQU1DLFFBQVEsR0FBR0MsT0FBTyxDQUFDQyxHQUFHLENBQUNDLGVBQWUsSUFBSUYsT0FBTyxDQUFDQyxHQUFHLENBQUNFLGNBQWMsSUFBSSxFQUFFO0FBQ2hGLE1BQU1DLFFBQVEsR0FBR0osT0FBTyxDQUFDQyxHQUFHLENBQUNJLG1CQUFtQixJQUFJTCxPQUFPLENBQUNDLEdBQUcsQ0FBQ0ssa0JBQWtCLElBQUksRUFBRTtBQUV4RixTQUFTQyxvQkFBb0JBLENBQUNDLElBQUksRUFBRTtFQUNsQyxNQUFNQyxNQUFNLEdBQUcsRUFBRTtFQUNqQkQs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