{"version":3,"names":["test","expect","runDefaultPreview","waitForPreview","captureBrowserTelemetry","describe","page","telemetry","goto","url","includes","skip","h1","locator","title","h1Text","textContent","catch","hasGeneralPerformance","toBeTruthy","consoleErrors","toEqual","pageErrors","setTimeout","previewVisible","isVisible","click","tableHeaders","headerTexts","allTextContents","joined","join","toMatch","doneIdx","findIndex","t","trim","regIdx","estIdx","strip","first","toBeVisible","timeout","waitForSelector","pills","count","toBeGreaterThanOrEqual","subtitle","meta","subtitleText","metaText","hasProjects","hasDate","match","toContainText","alertsCard","hasAlerts","bodyText","hasOpenSprint"],"sources":["Jira-Reporting-App-General-Performance-Quarters-UI-Validation-Tests.spec.js"],"sourcesContent":["/**\r\n * General Performance, Quarters Strip, Work Hours Columns, Screenshot Context, and Notification UI Validation.\r\n * Uses captureBrowserTelemetry; fails on UI mismatch or console/request errors.\r\n */\r\n\r\nimport { test, expect } from '@playwright/test';\r\nimport { runDefaultPreview, waitForPreview, captureBrowserTelemetry } from './JiraReporting-Tests-Shared-PreviewExport-Helpers.js';\r\n\r\ntest.describe('Jira Reporting App - General Performance Quarters UI Validation', () => {\r\n  test('report page title or heading includes General Performance', async ({ page }) => {\r\n    const telemetry = captureBrowserTelemetry(page);\r\n    await page.goto('/report');\r\n\r\n    if (page.url().includes('login')) {\r\n      test.skip(true, 'Redirected to login; auth may be required');\r\n      return;\r\n    }\r\n\r\n    const h1 = page.locator('h1');\r\n    const title = await page.title();\r\n    const h1Text = await h1.textContent().catch(() => '');\r\n    const hasGeneralPerformance = (h1Text && h1Text.includes('General Performance')) || (title && title.includes('General Performance'));\r\n    expect(hasGeneralPerformance).toBeTruthy();\r\n\r\n    expect(telemetry.consoleErrors).toEqual([]);\r\n    expect(telemetry.pageErrors).toEqual([]);\r\n  });\r\n\r\n  test('boards table has Done Stories, Registered Work Hours, Estimated Work Hours columns after preview', async ({ page }) => {\r\n    test.setTimeout(180000);\r\n    const telemetry = captureBrowserTelemetry(page);\r\n    await runDefaultPreview(page);\r\n\r\n    const previewVisible = await page.locator('#preview-content').isVisible().catch(() => false);\r\n    if (!previewVisible) {\r\n      test.skip(true, 'Preview not visible; may require Jira credentials');\r\n      return;\r\n    }\r\n\r\n    await page.click('.tab-btn[data-tab=\"project-epic-level\"]').catch(() => null);\r\n    const tableHeaders = page.locator('#project-epic-level-content .data-table thead th');\r\n    const headerTexts = await tableHeaders.allTextContents().catch(() => []);\r\n    const joined = (headerTexts || []).join(' ');\r\n    expect(joined).toMatch(/Done Stories/);\r\n    expect(joined).toMatch(/Registered Work Hours/);\r\n    expect(joined).toMatch(/Estimated Work Hours/);\r\n\r\n    const doneIdx = headerTexts.findIndex(t => (t || '').trim() === 'Done Stories');\r\n    const regIdx = headerTexts.findIndex(t => (t || '').trim() === 'Registered Work Hours');\r\n    const estIdx = headerTexts.findIndex(t => (t || '').trim() === 'Estimated Work Hours');\r\n    expect(doneIdx >= 0).toBeTruthy();\r\n    expect(regIdx > doneIdx).toBeTruthy();\r\n    expect(estIdx > doneIdx).toBeTruthy();\r\n\r\n    expect(telemetry.consoleErrors).toEqual([]);\r\n    expect(telemetry.pageErrors).toEqual([]);\r\n  });\r\n\r\n  test('report has quarter strip with at least one quarter pill', async ({ page }) => {\r\n    const telemetry = captureBrowserTelemetry(page);\r\n    await page.goto('/report');\r\n\r\n    if (page.url().includes('login')) {\r\n      test.skip(true, 'Redirected to login; auth may be required');\r\n      return;\r\n    }\r\n\r\n    const strip = page.locator('.quick-range-strip, [aria-label=\"Vodacom quarters\"]').first();\r\n    await expect(strip).toBeVisible({ timeout: 15000 });\r\n    await page.waitForSelector('.quarter-pill', { timeout: 15000 }).catch(() => null);\r\n    const pills = page.locator('.quarter-pill');\r\n    const count = await pills.count();\r\n    expect(count).toBeGreaterThanOrEqual(1);\r\n\r\n    expect(telemetry.consoleErrors).toEqual([]);\r\n    expect(telemetry.pageErrors).toEqual([]);\r\n  });\r\n\r\n  test('leadership has quarter strip with at least one quarter pill', async ({ page }) => {\r\n    const telemetry = captureBrowserTelemetry(page);\r\n    await page.goto('/sprint-leadership');\r\n\r\n    if (page.url().includes('login')) {\r\n      test.skip(true, 'Redirected to login; auth may be required');\r\n      return;\r\n    }\r\n\r\n    const strip = page.locator('.quick-range-strip, [aria-label=\"Vodacom quarters\"]').first();\r\n    await expect(strip).toBeVisible({ timeout: 15000 });\r\n    await page.waitForSelector('.quarter-pill', { timeout: 15000 }).catch(() => null);\r\n    const pills = page.locator('.quarter-pill');\r\n    const count = await pills.count();\r\n    expect(count).toBeGreaterThanOrEqual(1);\r\n\r\n    expect(telemetry.consoleErrors).toEqual([]);\r\n    expect(telemetry.pageErrors).toEqual([]);\r\n  });\r\n\r\n  test('preview header or meta shows Projects and date range when preview loaded', async ({ page }) => {\r\n    test.setTimeout(180000);\r\n    const telemetry = captureBrowserTelemetry(page);\r\n    await runDefaultPreview(page);\r\n\r\n    const previewVisible = await page.locator('#preview-content').isVisible().catch(() => false);\r\n    if (!previewVisible) {\r\n      test.skip(true, 'Preview not visible; may require Jira credentials');\r\n      return;\r\n    }\r\n\r\n    const subtitle = page.locator('#report-subtitle');\r\n    const meta = page.locator('#preview-meta');\r\n    const subtitleText = await subtitle.textContent().catch(() => '');\r\n    const metaText = await meta.textContent().catch(() => '');\r\n    const hasProjects = (subtitleText && subtitleText.includes('Projects')) || (metaText && metaText.includes('Projects'));\r\n    const hasDate = (subtitleText && (subtitleText.includes('to') || subtitleText.match(/\\d/))) || (metaText && (metaText.includes('Window') || metaText.includes('to')));\r\n    expect(hasProjects).toBeTruthy();\r\n    expect(hasDate).toBeTruthy();\r\n\r\n    expect(telemetry.consoleErrors).toEqual([]);\r\n    expect(telemetry.pageErrors).toEqual([]);\r\n  });\r\n\r\n  test('current sprint: time tracking alerts card and Open Current Sprint when applicable', async ({ page }) => {\r\n    test.setTimeout(60000);\r\n    const telemetry = captureBrowserTelemetry(page);\r\n    await page.goto('/current-sprint');\r\n\r\n    if (page.url().includes('login')) {\r\n      test.skip(true, 'Redirected to login; auth may be required');\r\n      return;\r\n    }\r\n\r\n    await expect(page.locator('h1')).toContainText('Current Sprint');\r\n    await expect(page.locator('nav.app-nav a[href=\"/report\"]')).toContainText('Report');\r\n\r\n    const alertsCard = page.locator('#notifications-card, [id*=\"notification\"]');\r\n    const hasAlerts = await alertsCard.isVisible().catch(() => false);\r\n    if (hasAlerts) {\r\n      const bodyText = await page.locator('body').textContent().catch(() => '');\r\n      const hasOpenSprint = bodyText && (bodyText.includes('Open Current Sprint') || bodyText.includes('Current Sprint'));\r\n      expect(hasOpenSprint).toBeTruthy();\r\n    }\r\n\r\n    expect(telemetry.consoleErrors).toEqual([]);\r\n    expect(telemetry.pageErrors).toEqual([]);\r\n  });\r\n});\r\n"],"mappings":"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","ignoreList":[]}