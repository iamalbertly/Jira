{"version":3,"names":["test","expect","runDefaultPreview","DEFAULT_Q2_QUERY","getTableCellText","page","rowIndex","columnIndex","cell","locator","textContent","validateMetricsTabVisible","tab","filter","hasText","toBeVisible","timeout","describe","beforeEach","goto","toContainText","setTimeout","previewVisible","isVisible","catch","errorVisible","skip","resolveRouteHandled","routeHandled","Promise","resolve","route","response","fetch","fulfill","unroute","click","statusBanner","waitForSelector","state","request","console","log","get","status","data","json","rows","length","emptyIssueTypeRow","find","row","issueType","issueKey","includeStoryPoints","issueKeyCell","issueTypeCell","issueTypeText","toContain","metricsContent","hasEmptyStateMessage","includes","meta","epicTTMFallbackCount","undefined","includeEpicTTM","hasFallbackWarning","toBeTruthy","epicTable","first","epicTableHeader","storyLink","href","getAttribute","Array","isArray","generateCSVClient","columns","Object","keys","csv","slice","lines","split","line","trim","toBeGreaterThan","keyLink","firstResponse","waitForTimeout","secondResponse","fromCache","cacheAgeMinutes","toBe","toBeGreaterThanOrEqual","previewMeta","hasCacheAge","previewContent","hasEpicTTMSection"],"sources":["Jira-Reporting-App-UX-Reliability-Fixes-Tests.spec.js"],"sourcesContent":["import { test, expect } from '@playwright/test';\r\nimport { runDefaultPreview } from './JiraReporting-Tests-Shared-PreviewExport-Helpers.js';\r\n\r\nconst DEFAULT_Q2_QUERY = '?projects=MPSA,MAS&start=2025-07-01T00:00:00.000Z&end=2025-09-30T23:59:59.999Z';\r\n\r\n// Helper: Get table cell text by row and column index\r\nasync function getTableCellText(page, rowIndex, columnIndex) {\r\n  const cell = page.locator(`table tbody tr:nth-child(${rowIndex}) td:nth-child(${columnIndex})`);\r\n  return await cell.textContent();\r\n}\r\n\r\n// Helper: Validate metrics tab is visible\r\nasync function validateMetricsTabVisible(page) {\r\n  const tab = page.locator('.tab-btn').filter({ hasText: 'Project & Epic Level' });\r\n  await expect(tab).toBeVisible({ timeout: 5000 });\r\n}\r\n\r\ntest.describe('UX Reliability & Technical Debt Fixes', () => {\r\n  test.beforeEach(async ({ page }) => {\r\n    await page.goto('/report');\r\n    await expect(page.locator('h1')).toContainText('VodaAgileBoard');\r\n  });\r\n\r\n  test('refreshing preview keeps previous results visible while loading', async ({ page }) => {\r\n    test.setTimeout(120000);\r\n\r\n    await runDefaultPreview(page);\r\n    const previewVisible = await page.locator('#preview-content').isVisible().catch(() => false);\r\n    const errorVisible = await page.locator('#error').isVisible().catch(() => false);\r\n    if (!previewVisible || errorVisible) {\r\n      test.skip();\r\n      return;\r\n    }\r\n    await expect(page.locator('#preview-content')).toBeVisible({ timeout: 10000 });\r\n\r\n    let resolveRouteHandled;\r\n    const routeHandled = new Promise(resolve => {\r\n      resolveRouteHandled = resolve;\r\n    });\r\n\r\n    await page.route('**/preview.json*', async route => {\r\n      await new Promise(resolve => setTimeout(resolve, 800));\r\n      const response = await route.fetch();\r\n      await route.fulfill({ response });\r\n      resolveRouteHandled();\r\n      await page.unroute('**/preview.json*').catch(() => {});\r\n    });\r\n\r\n    await page.click('#preview-btn');\r\n\r\n    const statusBanner = page.locator('#preview-status .status-banner.info');\r\n    await expect(statusBanner).toBeVisible({ timeout: 5000 });\r\n    await expect(page.locator('#preview-content')).toBeVisible({ timeout: 5000 });\r\n\r\n    await routeHandled.catch(() => {});\r\n    await page.waitForSelector('#loading', { state: 'hidden', timeout: 120000 }).catch(() => {});\r\n  });\r\n\r\n  test('should display Unknown for empty issueType in Done Stories table', async ({ page, request }) => {\r\n    console.log('[TEST] Starting empty issueType display validation');\r\n    test.setTimeout(300000);\r\n\r\n    // Test via API first to get data\r\n    const response = await request.get(`/preview.json${DEFAULT_Q2_QUERY}&bypassCache=true`, {\r\n      timeout: 120000\r\n    });\r\n\r\n    if (response.status() === 200) {\r\n      const data = await response.json();\r\n      if (data.rows && data.rows.length > 0) {\r\n        // Find a row with empty issueType if any\r\n        const emptyIssueTypeRow = data.rows.find(row => !row.issueType || row.issueType === '');\r\n        \r\n        if (emptyIssueTypeRow) {\r\n          console.log(`[TEST] Found row with empty issueType: ${emptyIssueTypeRow.issueKey}`);\r\n          \r\n          // Load preview in browser\r\n          await runDefaultPreview(page, { includeStoryPoints: true });\r\n          \r\n          // Navigate to Done Stories tab\r\n          await page.click('.tab-btn[data-tab=\"done-stories\"]');\r\n          await page.waitForSelector('#tab-done-stories.active', { state: 'visible', timeout: 10000 });\r\n          \r\n          // Find the row in the table and verify it shows \"Unknown\"\r\n          const issueKeyCell = page.locator(`table tbody td:has-text(\"${emptyIssueTypeRow.issueKey}\")`);\r\n          if (await issueKeyCell.isVisible()) {\r\n            const row = issueKeyCell.locator('..');\r\n            const issueTypeCell = row.locator('td:nth-child(4)'); // Type column is 4th\r\n            const issueTypeText = await issueTypeCell.textContent();\r\n            expect(issueTypeText).toContain('Unknown');\r\n            console.log('[TEST] ✓ Empty issueType displays as Unknown in UI');\r\n          }\r\n        } else {\r\n          console.log('[TEST] ⚠ No rows with empty issueType found in test data');\r\n        }\r\n      }\r\n    }\r\n  });\r\n\r\n  test('should always show Metrics tab when metrics object exists', async ({ page, request }) => {\r\n    console.log('[TEST] Starting metrics tab visibility validation');\r\n    test.setTimeout(300000);\r\n\r\n    // Generate preview with metrics\r\n    await runDefaultPreview(page, { \r\n      // Story Points and Epic TTM are now mandatory (always enabled) \r\n    });\r\n\r\n    // Verify metrics tab is visible (should be visible even if metrics are empty)\r\n    await validateMetricsTabVisible(page);\r\n    console.log('[TEST] ✓ Metrics tab is visible');\r\n\r\n    // Click Project & Epic Level tab to verify metrics section renders\r\n    await page.click('.tab-btn[data-tab=\"project-epic-level\"]');\r\n    await page.waitForSelector('#tab-project-epic-level.active', { state: 'visible', timeout: 10000 });\r\n    console.log('[TEST] ✓ Project & Epic Level tab is clickable and active');\r\n  });\r\n\r\n  test('should show perIssueType empty state message when breakdown unavailable', async ({ page, request }) => {\r\n    console.log('[TEST] Starting perIssueType empty state validation');\r\n    test.setTimeout(300000);\r\n\r\n    // Generate preview with throughput but without bugs (perIssueType will be empty)\r\n    await runDefaultPreview(page, { \r\n      // Story Points and Bugs/Rework are now mandatory (always enabled) \r\n    });\r\n\r\n    // Navigate to Project & Epic Level tab (metrics are embedded)\r\n    await page.click('.tab-btn[data-tab=\"project-epic-level\"]');\r\n    await page.waitForSelector('#tab-project-epic-level.active', { state: 'visible', timeout: 10000 });\r\n    await page.waitForSelector('#project-epic-level-content', { state: 'visible', timeout: 10000 });\r\n\r\n    // Check for empty state message\r\n    const metricsContent = await page.locator('#project-epic-level-content').textContent();\r\n    const hasEmptyStateMessage = metricsContent.includes('No issue type breakdown available') || \r\n                                  metricsContent.includes('Enable \"Include Bugs for Rework\"');\r\n    \r\n    console.log(`[TEST] ${hasEmptyStateMessage ? '✓' : '⚠'} PerIssueType empty state message ${hasEmptyStateMessage ? 'found' : 'not found'}`);\r\n    // Note: Message may not appear if perIssueType has data or throughput doesn't exist\r\n  });\r\n\r\n  test('should display Epic TTM fallback warning when fallback used', async ({ page, request }) => {\r\n    console.log('[TEST] Starting Epic TTM fallback warning validation');\r\n    test.setTimeout(300000);\r\n\r\n    // Test via API to check for fallback count\r\n    const response = await request.get(`/preview.json${DEFAULT_Q2_QUERY}&bypassCache=true`, {\r\n      timeout: 120000\r\n    });\r\n\r\n    if (response.status() === 200) {\r\n      const data = await response.json();\r\n      \r\n      if (data.meta?.epicTTMFallbackCount !== undefined && data.meta.epicTTMFallbackCount > 0) {\r\n        console.log(`[TEST] Epic TTM fallback count: ${data.meta.epicTTMFallbackCount}`);\r\n        \r\n        // Load preview in browser\r\n        await runDefaultPreview(page, { \r\n          includeStoryPoints: true,\r\n          includeEpicTTM: true \r\n        });\r\n\r\n        // Navigate to Project & Epic Level tab (metrics are embedded)\r\n        await page.click('.tab-btn[data-tab=\"project-epic-level\"]');\r\n        await page.waitForSelector('#tab-project-epic-level.active', { state: 'visible', timeout: 10000 });\r\n        await page.waitForSelector('#project-epic-level-content', { state: 'visible', timeout: 10000 });\r\n\r\n        // Check for fallback warning\r\n        const metricsContent = await page.locator('#project-epic-level-content').textContent();\r\n        const hasFallbackWarning = metricsContent.includes('used story date fallback') || \r\n                                   metricsContent.includes('Epic issues unavailable');\r\n        \r\n        expect(hasFallbackWarning).toBeTruthy();\r\n        console.log('[TEST] ✓ Epic TTM fallback warning displayed in UI');\r\n\r\n        const epicTable = page.locator('#project-epic-level-content table').filter({ hasText: 'Epic Key' }).first();\r\n        const epicTableHeader = epicTable.locator('thead tr');\r\n        await expect(epicTableHeader).toContainText('Subtask Spent (Hrs)');\r\n        console.log('[TEST] ✓ Epic TTM subtask hours column visible');\r\n\r\n        const storyLink = page.locator('#project-epic-level-content table tbody tr td .epic-story-list a').first();\r\n        if (await storyLink.isVisible().catch(() => false)) {\r\n          const href = await storyLink.getAttribute('href');\r\n          expect(href || '').toContain('/browse/');\r\n          console.log('[TEST] ✓ Epic TTM story IDs render as Jira links');\r\n        }\r\n      } else {\r\n        console.log('[TEST] ⚠ No Epic TTM fallback detected (may be all Epics available)');\r\n      }\r\n    }\r\n  });\r\n\r\n  test('should validate CSV columns before export', async ({ request }) => {\r\n    console.log('[TEST] Starting CSV column validation');\r\n    test.setTimeout(300000);\r\n\r\n    const response = await request.get(`/preview.json${DEFAULT_Q2_QUERY}`, { timeout: 120000 });\r\n    if (response.status() !== 200) {\r\n      console.log('[TEST] ⚠ Preview request failed; skipping CSV validation');\r\n      test.skip();\r\n      return;\r\n    }\r\n\r\n    const data = await response.json();\r\n    const rows = Array.isArray(data.rows) ? data.rows : [];\r\n    if (rows.length === 0) {\r\n      console.log('[TEST] ⚠ No preview rows available; skipping CSV validation');\r\n      test.skip();\r\n      return;\r\n    }\r\n\r\n    const { generateCSVClient } = await import('../public/Reporting-App-Report-Utils-Data-Helpers.js');\r\n    const columns = Object.keys(rows[0]);\r\n    const csv = generateCSVClient(columns, rows.slice(0, 10));\r\n    const lines = csv.split('\\n').filter(line => line.trim());\r\n\r\n    expect(lines.length).toBeGreaterThan(0);\r\n    expect(lines[0]).toContain('issueType');\r\n    expect(lines[0]).toContain('issueKey');\r\n    expect(lines[0]).toContain('issueStatus');\r\n    console.log('[TEST] ✓ CSV export contains required columns via shared helper');\r\n  });\r\n\r\n  test('done stories table renders issue keys as Jira links', async ({ page }) => {\r\n    console.log('[TEST] Starting Done Stories issue key link validation');\r\n    test.setTimeout(300000);\r\n\r\n    await runDefaultPreview(page, { includeStoryPoints: true });\r\n\r\n    const previewVisible = await page.locator('#preview-content').isVisible().catch(() => false);\r\n    if (!previewVisible) {\r\n      test.skip();\r\n      return;\r\n    }\r\n\r\n    await page.click('.tab-btn[data-tab=\"done-stories\"]');\r\n    await page.waitForSelector('#tab-done-stories.active', { state: 'visible', timeout: 10000 });\r\n\r\n    const keyLink = page.locator('#done-stories-content table tbody tr td:first-child a').first();\r\n    if (!(await keyLink.isVisible().catch(() => false))) {\r\n      console.log('[TEST] ⚠ No Done Stories rows with links found (data may be empty)');\r\n      test.skip();\r\n      return;\r\n    }\r\n\r\n    const href = await keyLink.getAttribute('href');\r\n    expect(href || '').toContain('/browse/');\r\n    console.log('[TEST] ✓ Done Stories issue keys render as Jira links');\r\n  });\r\n\r\n  test('should display cache age in preview meta when from cache', async ({ page, request }) => {\r\n    console.log('[TEST] Starting cache age display validation');\r\n    test.setTimeout(300000);\r\n\r\n    // First request to populate cache\r\n      const firstResponse = await request.get(`/preview.json${DEFAULT_Q2_QUERY}`, {\r\n      timeout: 120000\r\n    });\r\n\r\n    if (firstResponse.status() === 200) {\r\n      // Wait a moment for cache to be set\r\n      await page.waitForTimeout(1000);\r\n      \r\n      // Second request should be from cache\r\n      const secondResponse = await request.get(`/preview.json${DEFAULT_Q2_QUERY}`, {\r\n        timeout: 120000\r\n      });\r\n\r\n      if (secondResponse.status() === 200) {\r\n        const data = await secondResponse.json();\r\n        \r\n        if (data.meta?.fromCache === true) {\r\n          console.log('[TEST] ✓ Response served from cache');\r\n          \r\n          if (data.meta?.cacheAgeMinutes !== undefined) {\r\n            expect(typeof data.meta.cacheAgeMinutes).toBe('number');\r\n            expect(data.meta.cacheAgeMinutes).toBeGreaterThanOrEqual(0);\r\n            console.log(`[TEST] ✓ Cache age in meta: ${data.meta.cacheAgeMinutes} minutes`);\r\n            \r\n            // Load preview in browser to verify UI display\r\n            await runDefaultPreview(page);\r\n            \r\n            // Check preview meta for cache age\r\n            const previewMeta = await page.locator('#preview-meta').textContent();\r\n            const hasCacheAge = previewMeta.includes('Cache age:') || previewMeta.includes('minutes');\r\n            \r\n            console.log(`[TEST] ${hasCacheAge ? '✓' : '⚠'} Cache age ${hasCacheAge ? 'displayed' : 'not displayed'} in UI`);\r\n          } else {\r\n            console.log('[TEST] ⚠ Cache age not in meta (may be first request or cache miss)');\r\n          }\r\n        } else {\r\n          console.log('[TEST] ⚠ Response not from cache (cache may have expired or been bypassed)');\r\n        }\r\n      }\r\n    }\r\n  });\r\n\r\n  test('should recover gracefully when Epic fetch fails', async ({ page, request }) => {\r\n    console.log('[TEST] Starting Epic fetch error recovery validation');\r\n    test.setTimeout(300000);\r\n\r\n    // Generate preview with Epic TTM enabled\r\n    await runDefaultPreview(page, { \r\n      // Story Points and Epic TTM are now mandatory (always enabled) \r\n    });\r\n\r\n    // Verify preview completed successfully (even if Epic fetch failed)\r\n    const previewContent = page.locator('#preview-content');\r\n    await expect(previewContent).toBeVisible({ timeout: 10000 });\r\n    console.log('[TEST] ✓ Preview completed successfully');\r\n\r\n    // Check that Epic TTM section exists (may be empty if Epic fetch failed)\r\n    await page.click('.tab-btn[data-tab=\"project-epic-level\"]');\r\n    await page.waitForSelector('#tab-project-epic-level.active', { state: 'visible', timeout: 10000 });\r\n    \r\n    const metricsContent = await page.locator('#project-epic-level-content').textContent();\r\n    const hasEpicTTMSection = metricsContent.includes('Epic Time-To-Market');\r\n    \r\n    console.log(`[TEST] ${hasEpicTTMSection ? '✓' : '⚠'} Epic TTM section ${hasEpicTTMSection ? 'present' : 'not present'}`);\r\n    // Note: Epic TTM section may be empty if no epics found, but preview should still succeed\r\n  });\r\n});\r\n"],"mappings":"AAAA,SAASA,IAAI,EAAEC,MAAM,QAAQ,kBAAkB;AAC/C,SAASC,iBAAiB,QAAQ,uDAAuD;AAEzF,MAAMC,gBAAgB,GAAG,gFAAgF;;AAEzG;AACA,eAAeC,gBAAgBA,CAACC,IAAI,EAAEC,QAAQ,EAAEC,WAAW,EAAE;EAC3D,MAAMC,IAAI,GAAGH,IAAI,CAACI,OAAO,CAAC,4BAA4BH,QAAQ,kBAAkBC,WAAW,GAAG,CAAC;EAC/F,OAAO,MAAMC,IAAI,CAACE,WAAW,CAAC,CAAC;AACjC;;AAEA;AACA,eAAeC,yBAAyBA,CAACN,IAAI,EAAE;EAC7C,MAAMO,GAAG,GAAGP,IAAI,CAACI,OAAO,CAAC,UAAU,CAAC,CAACI,MAAM,CAAC;IAAEC,OAAO,EAAE;EAAuB,CAAC,CAAC;EAChF,MAAMb,MAAM,CAACW,GAAG,CAAC,CAACG,WAAW,CAAC;IAAEC,OAAO,EAAE;EAAK,CAAC,CAAC;AAClD;AAEAhB,IAAI,CAACiB,QAAQ,CAAC,uCAAuC,EAAE,MAAM;EAC3DjB,IAAI,CAACkB,UAAU,CAAC,OAAO;IAAEb;EAAK,CAAC,KAAK;IAClC,MAAMA,IAAI,CAACc,IAAI,CAAC,SAAS,CAAC;IAC1B,MAAMlB,MAAM,CAACI,IAAI,CAACI,OAAO,CAAC,IAAI,CAAC,CAAC,CAACW,aAAa,CAAC,gBAAgB,CAAC;EAClE,CAAC,CAAC;EAEFpB,IAAI,CAAC,iEAAiE,EAAE,OAAO;IAAEK;EAAK,CAAC,KAAK;IAC1FL,IAAI,CAACqB,UAAU,CAAC,MAAM,CAAC;IAEvB,MAAMnB,iBAAiB,CAACG,IAAI,CAAC;IAC7B,MAAMiB,cAAc,GAAG,MAAMjB,IAAI,CAACI,OAAO,CAAC,kBAAkB,CAAC,CAACc,SAAS,CAAC,CAAC,CAACC,KAAK,CAAC,MAAM,KAAK,CAAC;IAC5F,MAAMC,YAAY,GAAG,MAAMpB,IAAI,CAACI,OAAO,CAAC,QAAQ,CAAC,CAACc,SAAS,CAAC,CAAC,CAACC,KAAK,CAAC,MAAM,KAAK,CAAC;IAChF,IAAI,CAACF,cAAc,IAAIG,YAAY,EAAE;MACnCzB,IAAI,CAAC0B,IAAI,CAAC,CAAC;MACX;IACF;IACA,MAAMzB,MAAM,CAACI,IAAI,CAACI,OAAO,CAAC,kBAAkB,CAAC,CAAC,CAACM,WAAW,CAAC;MAAEC,OAAO,EAAE;IAAM,CAAC,CAAC;IAE9E,IAAIW,mBAAmB;IACvB,MAAMC,YAAY,GAAG,IAAIC,OAAO,CAACC,OAAO,IAAI;MAC1CH,mBAAmB,GAAGG,OAAO;IAC/B,CAAC,CAAC;IAEF,MAAMzB,IAAI,CAAC0B,KAAK,CAAC,kBAAkB,EAAE,MAAMA,KAAK,IAAI;MAClD,MAAM,IAAIF,OAAO,CAACC,OAAO,IAAIT,UAAU,CAACS,OAAO,EAAE,GAAG,CAAC,CAAC;MACtD,MAAME,QAAQ,GAAG,MAAMD,KAAK,CAACE,KAAK,CAAC,CAAC;MACpC,MAAMF,KAAK,CAACG,OAAO,CAAC;QAAEF;MAAS,CAAC,CAAC;MACjCL,mBAAmB,CAAC,CAAC;MACrB,MAAMtB,IAAI,CAAC8B,OAAO,CAAC,kBAAkB,CAAC,CAACX,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC;IACxD,CAAC,CAAC;IAEF,MAAMnB,IAAI,CAAC+B,KAAK,CAAC,cAAc,CAAC;IAEhC,MAAMC,YAAY,GAAGhC,IAAI,CAACI,OAAO,CAAC,qCAAqC,CAAC;IACxE,MAAMR,MAAM,CAACoC,YAAY,CAAC,CAACtB,WAAW,CAAC;MAAEC,OAAO,EAAE;IAAK,CAAC,CAAC;IACzD,MAAMf,MAAM,CAACI,IAAI,CAACI,OAAO,CAAC,kBAAkB,CAAC,CAAC,CAACM,WAAW,CAAC;MAAEC,OAAO,EAAE;IAAK,CAAC,CAAC;IAE7E,MAAMY,YAAY,CAACJ,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC;IAClC,MAAMnB,IAAI,CAACiC,eAAe,CAAC,UAAU,EAAE;MAAEC,KAAK,EAAE,QAAQ;MAAEvB,OAAO,EAAE;IAAO,CAAC,CAAC,CAACQ,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC;EAC9F,CAAC,CAAC;EAEFxB,IAAI,CAAC,kEAAkE,EAAE,OAAO;IAAEK,IAAI;IAAEmC;EAAQ,CAAC,KAAK;IACpGC,OAAO,CAACC,GAAG,CAAC,oDAAoD,CAAC;IACjE1C,IAAI,CAACqB,UAAU,CAAC,MAAM,CAAC;;IAEvB;IACA,MAAMW,QAAQ,GAAG,MAAMQ,OAAO,CAACG,GAAG,CAAC,gBAAgBxC,gBAAgB,mBAAmB,EAAE;MACtFa,OAAO,EAAE;IACX,CAAC,CAAC;IAEF,IAAIgB,QAAQ,CAACY,MAAM,CAAC,CAAC,KAAK,GAAG,EAAE;MAC7B,MAAMC,IAAI,GAAG,MAAMb,QAAQ,CAACc,IAAI,CAAC,CAAC;MAClC,IAAID,IAAI,CAACE,IAAI,IAAIF,IAAI,CAACE,IAAI,CAACC,MAAM,GAAG,CAAC,EAAE;QACrC;QACA,MAAMC,iBAAiB,GAAGJ,IAAI,CAACE,IAAI,CAACG,IAAI,CAACC,GAAG,IAAI,CAACA,GAAG,CAACC,SAAS,IAAID,GAAG,CAACC,SAAS,KAAK,EAAE,CAAC;QAEvF,IAAIH,iBAAiB,EAAE;UACrBR,OAAO,CAACC,GAAG,CAAC,0CAA0CO,iBAAiB,CAACI,QAAQ,EAAE,CAAC;;UAEnF;UACA,MAAMnD,iBAAiB,CAACG,IAAI,EAAE;YAAEiD,kBAAkB,EAAE;UAAK,CAAC,CAAC;;UAE3D;UACA,MAAMjD,IAAI,CAAC+B,KAAK,CAAC,mCAAmC,CAAC;UACrD,MAAM/B,IAAI,CAACiC,eAAe,CAAC,0BAA0B,EAAE;YAAEC,KAAK,EAAE,SAAS;YAAEvB,OAAO,EAAE;UAAM,CAAC,CAAC;;UAE5F;UACA,MAAMuC,YAAY,GAAGlD,IAAI,CAACI,OAAO,CAAC,4BAA4BwC,iBAAiB,CAACI,QAAQ,IAAI,CAAC;UAC7F,IAAI,MAAME,YAAY,CAAChC,SAAS,CAAC,CAAC,EAAE;YAClC,MAAM4B,GAAG,GAAGI,YAAY,CAAC9C,OAAO,CAAC,IAAI,CAAC;YACtC,MAAM+C,aAAa,GAAGL,GAAG,CAAC1C,OAAO,CAAC,iBAAiB,CAAC,CAAC,CAAC;YACtD,MAAMgD,aAAa,GAAG,MAAMD,aAAa,CAAC9C,WAAW,CAAC,CAAC;YACvDT,MAAM,CAACwD,aAAa,CAAC,CAACC,SAAS,CAAC,SAAS,CAAC;YAC1CjB,OAAO,CAACC,GAAG,CAAC,oDAAoD,CAAC;UACnE;QACF,CAAC,MAAM;UACLD,OAAO,CAACC,GAAG,CAAC,0DAA0D,CAAC;QACzE;MACF;IACF;EACF,CAAC,CAAC;EAEF1C,IAAI,CAAC,2DAA2D,EAAE,OAAO;IAAEK,IAAI;IAAEmC;EAAQ,CAAC,KAAK;IAC7FC,OAAO,CAACC,GAAG,CAAC,mDAAmD,CAAC;IAChE1C,IAAI,CAACqB,UAAU,CAAC,MAAM,CAAC;;IAEvB;IACA,MAAMnB,iBAAiB,CAACG,IAAI,EAAE;MAC5B;IAAA,CACD,CAAC;;IAEF;IACA,MAAMM,yBAAyB,CAACN,IAAI,CAAC;IACrCoC,OAAO,CAACC,GAAG,CAAC,iCAAiC,CAAC;;IAE9C;IACA,MAAMrC,IAAI,CAAC+B,KAAK,CAAC,yCAAyC,CAAC;IAC3D,MAAM/B,IAAI,CAACiC,eAAe,CAAC,gCAAgC,EAAE;MAAEC,KAAK,EAAE,SAAS;MAAEvB,OAAO,EAAE;IAAM,CAAC,CAAC;IAClGyB,OAAO,CAACC,GAAG,CAAC,2DAA2D,CAAC;EAC1E,CAAC,CAAC;EAEF1C,IAAI,CAAC,yEAAyE,EAAE,OAAO;IAAEK,IAAI;IAAEmC;EAAQ,CAAC,KAAK;IAC3GC,OAAO,CAACC,GAAG,CAAC,qDAAqD,CAAC;IAClE1C,IAAI,CAACqB,UAAU,CAAC,MAAM,CAAC;;IAEvB;IACA,MAAMnB,iBAAiB,CAACG,IAAI,EAAE;MAC5B;IAAA,CACD,CAAC;;IAEF;IACA,MAAMA,IAAI,CAAC+B,KAAK,CAAC,yCAAyC,CAAC;IAC3D,MAAM/B,IAAI,CAACiC,eAAe,CAAC,gCAAgC,EAAE;MAAEC,KAAK,EAAE,SAAS;MAAEvB,OAAO,EAAE;IAAM,CAAC,CAAC;IAClG,MAAMX,IAAI,CAACiC,eAAe,CAAC,6BAA6B,EAAE;MAAEC,KAAK,EAAE,SAAS;MAAEvB,OAAO,EAAE;IAAM,CAAC,CAAC;;IAE/F;IACA,MAAM2C,cAAc,GAAG,MAAMtD,IAAI,CAACI,OAAO,CAAC,6BAA6B,CAAC,CAACC,WAAW,CAAC,CAAC;IACtF,MAAMkD,oBAAoB,GAAGD,cAAc,CAACE,QAAQ,CAAC,mCAAmC,CAAC,IAC3DF,cAAc,CAACE,QAAQ,CAAC,kCAAkC,CAAC;IAEzFpB,OAAO,CAACC,GAAG,CAAC,UAAUkB,oBAAoB,GAAG,GAAG,GAAG,GAAG,qCAAqCA,oBAAoB,GAAG,OAAO,GAAG,WAAW,EAAE,CAAC;IAC1I;EACF,CAAC,CAAC;EAEF5D,IAAI,CAAC,6DAA6D,EAAE,OAAO;IAAEK,IAAI;IAAEmC;EAAQ,CAAC,KAAK;IAC/FC,OAAO,CAACC,GAAG,CAAC,sDAAsD,CAAC;IACnE1C,IAAI,CAACqB,UAAU,CAAC,MAAM,CAAC;;IAEvB;IACA,MAAMW,QAAQ,GAAG,MAAMQ,OAAO,CAACG,GAAG,CAAC,gBAAgBxC,gBAAgB,mBAAmB,EAAE;MACtFa,OAAO,EAAE;IACX,CAAC,CAAC;IAEF,IAAIgB,QAAQ,CAACY,MAAM,CAAC,CAAC,KAAK,GAAG,EAAE;MAC7B,MAAMC,IAAI,GAAG,MAAMb,QAAQ,CAACc,IAAI,CAAC,CAAC;MAElC,IAAID,IAAI,CAACiB,IAAI,EAAEC,oBAAoB,KAAKC,SAAS,IAAInB,IAAI,CAACiB,IAAI,CAACC,oBAAoB,GAAG,CAAC,EAAE;QACvFtB,OAAO,CAACC,GAAG,CAAC,mCAAmCG,IAAI,CAACiB,IAAI,CAACC,oBAAoB,EAAE,CAAC;;QAEhF;QACA,MAAM7D,iBAAiB,CAACG,IAAI,EAAE;UAC5BiD,kBAAkB,EAAE,IAAI;UACxBW,cAAc,EAAE;QAClB,CAAC,CAAC;;QAEF;QACA,MAAM5D,IAAI,CAAC+B,KAAK,CAAC,yCAAyC,CAAC;QAC3D,MAAM/B,IAAI,CAACiC,eAAe,CAAC,gCAAgC,EAAE;UAAEC,KAAK,EAAE,SAAS;UAAEvB,OAAO,EAAE;QAAM,CAAC,CAAC;QAClG,MAAMX,IAAI,CAACiC,eAAe,CAAC,6BAA6B,EAAE;UAAEC,KAAK,EAAE,SAAS;UAAEvB,OAAO,EAAE;QAAM,CAAC,CAAC;;QAE/F;QACA,MAAM2C,cAAc,GAAG,MAAMtD,IAAI,CAACI,OAAO,CAAC,6BAA6B,CAAC,CAACC,WAAW,CAAC,CAAC;QACtF,MAAMwD,kBAAkB,GAAGP,cAAc,CAACE,QAAQ,CAAC,0BAA0B,CAAC,IACnDF,cAAc,CAACE,QAAQ,CAAC,yBAAyB,CAAC;QAE7E5D,MAAM,CAACiE,kBAAkB,CAAC,CAACC,UAAU,CAAC,CAAC;QACvC1B,OAAO,CAACC,GAAG,CAAC,oDAAoD,CAAC;QAEjE,MAAM0B,SAAS,GAAG/D,IAAI,CAACI,OAAO,CAAC,mCAAmC,CAAC,CAACI,MAAM,CAAC;UAAEC,OAAO,EAAE;QAAW,CAAC,CAAC,CAACuD,KAAK,CAAC,CAAC;QAC3G,MAAMC,eAAe,GAAGF,SAAS,CAAC3D,OAAO,CAAC,UAAU,CAAC;QACrD,MAAMR,MAAM,CAACqE,eAAe,CAAC,CAAClD,aAAa,CAAC,qBAAqB,CAAC;QAClEqB,OAAO,CAACC,GAAG,CAAC,gDAAgD,CAAC;QAE7D,MAAM6B,SAAS,GAAGlE,IAAI,CAACI,OAAO,CAAC,kEAAkE,CAAC,CAAC4D,KAAK,CAAC,CAAC;QAC1G,IAAI,MAAME,SAAS,CAAChD,SAAS,CAAC,CAAC,CAACC,KAAK,CAAC,MAAM,KAAK,CAAC,EAAE;UAClD,MAAMgD,IAAI,GAAG,MAAMD,SAAS,CAACE,YAAY,CAAC,MAAM,CAAC;UACjDxE,MAAM,CAACuE,IAAI,IAAI,EAAE,CAAC,CAACd,SAAS,CAAC,UAAU,CAAC;UACxCjB,OAAO,CAACC,GAAG,CAAC,kDAAkD,CAAC;QACjE;MACF,CAAC,MAAM;QACLD,OAAO,CAACC,GAAG,CAAC,qEAAqE,CAAC;MACpF;IACF;EACF,CAAC,CAAC;EAEF1C,IAAI,CAAC,2CAA2C,EAAE,OAAO;IAAEwC;EAAQ,CAAC,KAAK;IACvEC,OAAO,CAACC,GAAG,CAAC,uCAAuC,CAAC;IACpD1C,IAAI,CAACqB,UAAU,CAAC,MAAM,CAAC;IAEvB,MAAMW,QAAQ,GAAG,MAAMQ,OAAO,CAACG,GAAG,CAAC,gBAAgBxC,gBAAgB,EAAE,EAAE;MAAEa,OAAO,EAAE;IAAO,CAAC,CAAC;IAC3F,IAAIgB,QAAQ,CAACY,MAAM,CAAC,CAAC,KAAK,GAAG,EAAE;MAC7BH,OAAO,CAACC,GAAG,CAAC,0DAA0D,CAAC;MACvE1C,IAAI,CAAC0B,IAAI,CAAC,CAAC;MACX;IACF;IAEA,MAAMmB,IAAI,GAAG,MAAMb,QAAQ,CAACc,IAAI,CAAC,CAAC;IAClC,MAAMC,IAAI,GAAG2B,KAAK,CAACC,OAAO,CAAC9B,IAAI,CAACE,IAAI,CAAC,GAAGF,IAAI,CAACE,IAAI,GAAG,EAAE;IACtD,IAAIA,IAAI,CAACC,MAAM,KAAK,CAAC,EAAE;MACrBP,OAAO,CAACC,GAAG,CAAC,6DAA6D,CAAC;MAC1E1C,IAAI,CAAC0B,IAAI,CAAC,CAAC;MACX;IACF;IAEA,MAAM;MAAEkD;IAAkB,CAAC,GAAG,MAAM,MAAM,CAAC,sDAAsD,CAAC;IAClG,MAAMC,OAAO,GAAGC,MAAM,CAACC,IAAI,CAAChC,IAAI,CAAC,CAAC,CAAC,CAAC;IACpC,MAAMiC,GAAG,GAAGJ,iBAAiB,CAACC,OAAO,EAAE9B,IAAI,CAACkC,KAAK,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;IACzD,MAAMC,KAAK,GAAGF,GAAG,CAACG,KAAK,CAAC,IAAI,CAAC,CAACtE,MAAM,CAACuE,IAAI,IAAIA,IAAI,CAACC,IAAI,CAAC,CAAC,CAAC;IAEzDpF,MAAM,CAACiF,KAAK,CAAClC,MAAM,CAAC,CAACsC,eAAe,CAAC,CAAC,CAAC;IACvCrF,MAAM,CAACiF,KAAK,CAAC,CAAC,CAAC,CAAC,CAACxB,SAAS,CAAC,WAAW,CAAC;IACvCzD,MAAM,CAACiF,KAAK,CAAC,CAAC,CAAC,CAAC,CAACxB,SAAS,CAAC,UAAU,CAAC;IACtCzD,MAAM,CAACiF,KAAK,CAAC,CAAC,CAAC,CAAC,CAACxB,SAAS,CAAC,aAAa,CAAC;IACzCjB,OAAO,CAACC,GAAG,CAAC,iEAAiE,CAAC;EAChF,CAAC,CAAC;EAEF1C,IAAI,CAAC,qDAAqD,EAAE,OAAO;IAAEK;EAAK,CAAC,KAAK;IAC9EoC,OAAO,CAACC,GAAG,CAAC,wDAAwD,CAAC;IACrE1C,IAAI,CAACqB,UAAU,CAAC,MAAM,CAAC;IAEvB,MAAMnB,iBAAiB,CAACG,IAAI,EAAE;MAAEiD,kBAAkB,EAAE;IAAK,CAAC,CAAC;IAE3D,MAAMhC,cAAc,GAAG,MAAMjB,IAAI,CAACI,OAAO,CAAC,kBAAkB,CAAC,CAACc,SAAS,CAAC,CAAC,CAACC,KAAK,CAAC,MAAM,KAAK,CAAC;IAC5F,IAAI,CAACF,cAAc,EAAE;MACnBtB,IAAI,CAAC0B,IAAI,CAAC,CAAC;MACX;IACF;IAEA,MAAMrB,IAAI,CAAC+B,KAAK,CAAC,mCAAmC,CAAC;IACrD,MAAM/B,IAAI,CAACiC,eAAe,CAAC,0BAA0B,EAAE;MAAEC,KAAK,EAAE,SAAS;MAAEvB,OAAO,EAAE;IAAM,CAAC,CAAC;IAE5F,MAAMuE,OAAO,GAAGlF,IAAI,CAACI,OAAO,CAAC,uDAAuD,CAAC,CAAC4D,KAAK,CAAC,CAAC;IAC7F,IAAI,EAAE,MAAMkB,OAAO,CAAChE,SAAS,CAAC,CAAC,CAACC,KAAK,CAAC,MAAM,KAAK,CAAC,CAAC,EAAE;MACnDiB,OAAO,CAACC,GAAG,CAAC,oEAAoE,CAAC;MACjF1C,IAAI,CAAC0B,IAAI,CAAC,CAAC;MACX;IACF;IAEA,MAAM8C,IAAI,GAAG,MAAMe,OAAO,CAACd,YAAY,CAAC,MAAM,CAAC;IAC/CxE,MAAM,CAACuE,IAAI,IAAI,EAAE,CAAC,CAACd,SAAS,CAAC,UAAU,CAAC;IACxCjB,OAAO,CAACC,GAAG,CAAC,uDAAuD,CAAC;EACtE,CAAC,CAAC;EAEF1C,IAAI,CAAC,0DAA0D,EAAE,OAAO;IAAEK,IAAI;IAAEmC;EAAQ,CAAC,KAAK;IAC5FC,OAAO,CAACC,GAAG,CAAC,8CAA8C,CAAC;IAC3D1C,IAAI,CAACqB,UAAU,CAAC,MAAM,CAAC;;IAEvB;IACE,MAAMmE,aAAa,GAAG,MAAMhD,OAAO,CAACG,GAAG,CAAC,gBAAgBxC,gBAAgB,EAAE,EAAE;MAC5Ea,OAAO,EAAE;IACX,CAAC,CAAC;IAEF,IAAIwE,aAAa,CAAC5C,MAAM,CAAC,CAAC,KAAK,GAAG,EAAE;MAClC;MACA,MAAMvC,IAAI,CAACoF,cAAc,CAAC,IAAI,CAAC;;MAE/B;MACA,MAAMC,cAAc,GAAG,MAAMlD,OAAO,CAACG,GAAG,CAAC,gBAAgBxC,gBAAgB,EAAE,EAAE;QAC3Ea,OAAO,EAAE;MACX,CAAC,CAAC;MAEF,IAAI0E,cAAc,CAAC9C,MAAM,CAAC,CAAC,KAAK,GAAG,EAAE;QACnC,MAAMC,IAAI,GAAG,MAAM6C,cAAc,CAAC5C,IAAI,CAAC,CAAC;QAExC,IAAID,IAAI,CAACiB,IAAI,EAAE6B,SAAS,KAAK,IAAI,EAAE;UACjClD,OAAO,CAACC,GAAG,CAAC,qCAAqC,CAAC;UAElD,IAAIG,IAAI,CAACiB,IAAI,EAAE8B,eAAe,KAAK5B,SAAS,EAAE;YAC5C/D,MAAM,CAAC,OAAO4C,IAAI,CAACiB,IAAI,CAAC8B,eAAe,CAAC,CAACC,IAAI,CAAC,QAAQ,CAAC;YACvD5F,MAAM,CAAC4C,IAAI,CAACiB,IAAI,CAAC8B,eAAe,CAAC,CAACE,sBAAsB,CAAC,CAAC,CAAC;YAC3DrD,OAAO,CAACC,GAAG,CAAC,+BAA+BG,IAAI,CAACiB,IAAI,CAAC8B,eAAe,UAAU,CAAC;;YAE/E;YACA,MAAM1F,iBAAiB,CAACG,IAAI,CAAC;;YAE7B;YACA,MAAM0F,WAAW,GAAG,MAAM1F,IAAI,CAACI,OAAO,CAAC,eAAe,CAAC,CAACC,WAAW,CAAC,CAAC;YACrE,MAAMsF,WAAW,GAAGD,WAAW,CAAClC,QAAQ,CAAC,YAAY,CAAC,IAAIkC,WAAW,CAAClC,QAAQ,CAAC,SAAS,CAAC;YAEzFpB,OAAO,CAACC,GAAG,CAAC,UAAUsD,WAAW,GAAG,GAAG,GAAG,GAAG,cAAcA,WAAW,GAAG,WAAW,GAAG,eAAe,QAAQ,CAAC;UACjH,CAAC,MAAM;YACLvD,OAAO,CAACC,GAAG,CAAC,qEAAqE,CAAC;UACpF;QACF,CAAC,MAAM;UACLD,OAAO,CAACC,GAAG,CAAC,4EAA4E,CAAC;QAC3F;MACF;IACF;EACF,CAAC,CAAC;EAEF1C,IAAI,CAAC,iDAAiD,EAAE,OAAO;IAAEK,IAAI;IAAEmC;EAAQ,CAAC,KAAK;IACnFC,OAAO,CAACC,GAAG,CAAC,sDAAsD,CAAC;IACnE1C,IAAI,CAACqB,UAAU,CAAC,MAAM,CAAC;;IAEvB;IACA,MAAMnB,iBAAiB,CAACG,IAAI,EAAE;MAC5B;IAAA,CACD,CAAC;;IAEF;IACA,MAAM4F,cAAc,GAAG5F,IAAI,CAACI,OAAO,CAAC,kBAAkB,CAAC;IACvD,MAAMR,MAAM,CAACgG,cAAc,CAAC,CAAClF,WAAW,CAAC;MAAEC,OAAO,EAAE;IAAM,CAAC,CAAC;IAC5DyB,OAAO,CAACC,GAAG,CAAC,yCAAyC,CAAC;;IAEtD;IACA,MAAMrC,IAAI,CAAC+B,KAAK,CAAC,yCAAyC,CAAC;IAC3D,MAAM/B,IAAI,CAACiC,eAAe,CAAC,gCAAgC,EAAE;MAAEC,KAAK,EAAE,SAAS;MAAEvB,OAAO,EAAE;IAAM,CAAC,CAAC;IAElG,MAAM2C,cAAc,GAAG,MAAMtD,IAAI,CAACI,OAAO,CAAC,6BAA6B,CAAC,CAACC,WAAW,CAAC,CAAC;IACtF,MAAMwF,iBAAiB,GAAGvC,cAAc,CAACE,QAAQ,CAAC,qBAAqB,CAAC;IAExEpB,OAAO,CAACC,GAAG,CAAC,UAAUwD,iBAAiB,GAAG,GAAG,GAAG,GAAG,qBAAqBA,iBAAiB,GAAG,SAAS,GAAG,aAAa,EAAE,CAAC;IACxH;EACF,CAAC,CAAC;AACJ,CAAC,CAAC","ignoreList":[]}