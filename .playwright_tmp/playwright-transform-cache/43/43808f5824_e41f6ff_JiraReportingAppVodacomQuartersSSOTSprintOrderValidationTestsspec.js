/**
 * Vodacom Quarters, SSOT, and Sprint Order Validation.
 * Validates quarter quick-pick, date-range API, default window, and sprint order (Report + Current Sprint).
 * Uses captureBrowserTelemetry and UI assertions at every step; fails on UI mismatch or console/network errors.
 */

import { test, expect } from '@playwright/test';
import { runDefaultPreview, waitForPreview, captureBrowserTelemetry } from './JiraReporting-Tests-Shared-PreviewExport-Helpers.js';
test.describe('Jira Reporting App - Vodacom Quarters SSOT Sprint Order Validation', () => {
  test('report page shows quarter quick-pick buttons and no console errors', async ({
    page
  }) => {
    const telemetry = captureBrowserTelemetry(page);
    await page.goto('/report');
    await expect(page.locator('h1')).toContainText('VodaAgileBoard');
    await expect(page.locator('.quick-range-pills')).toBeVisible();
    await expect(page.locator('.quick-range-btn[data-quarter="1"]')).toContainText(/Q1/);
    await expect(page.locator('.quick-range-btn[data-quarter="2"]')).toContainText(/Q2/);
    await expect(page.locator('.quick-range-btn[data-quarter="3"]')).toContainText(/Q3/);
    await expect(page.locator('.quick-range-btn[data-quarter="4"]')).toContainText(/Q4/);
    await expect(page.locator('#start-date')).toBeVisible();
    await expect(page.locator('#end-date')).toBeVisible();
    expect(telemetry.consoleErrors).toEqual([]);
    expect(telemetry.pageErrors).toEqual([]);
    expect(telemetry.failedRequests).toEqual([]);
  });
  test('report quarter quick-pick Q2 sets start and end inputs and triggers preview', async ({
    page
  }) => {
    test.setTimeout(180000);
    const telemetry = captureBrowserTelemetry(page);
    await page.goto('/report');
    await page.click('.quick-range-btn[data-quarter="2"]');
    await page.waitForTimeout(2000);
    const startVal = await page.locator('#start-date').inputValue();
    const endVal = await page.locator('#end-date').inputValue();
    expect(startVal).toBeTruthy();
    expect(endVal).toBeTruthy();
    const startDate = new Date(startVal);
    const endDate = new Date(endVal);
    expect(Number.isNaN(startDate.getTime())).toBeFalsy();
    expect(Number.isNaN(endDate.getTime())).toBeFalsy();
    expect(startDate.getTime()).toBeLessThanOrEqual(endDate.getTime());
    await Promise.race([page.waitForSelector('#loading', {
      state: 'visible',
      timeout: 15000
    }).catch(() => null), page.waitForSelector('#preview-content', {
      state: 'visible',
      timeout: 15000
    }).catch(() => null), page.waitForSelector('#error', {
      state: 'visible',
      timeout: 15000
    }).catch(() => null)]);
    const loadingVisible = await page.locator('#loading').isVisible().catch(() => false);
    const previewVisible = await page.locator('#preview-content').isVisible().catch(() => false);
    const errorVisible = await page.locator('#error').isVisible().catch(() => false);
    if (!loadingVisible && !previewVisible && !errorVisible) {
      test.skip(true, 'Preview/loading/error did not appear; API auth or Jira may be required');
      return;
    }
    expect(loadingVisible || previewVisible || errorVisible).toBeTruthy();
    expect(telemetry.consoleErrors).toEqual([]);
    expect(telemetry.pageErrors).toEqual([]);
  });
  test('Report Sprints tab rows are ordered by sprint end date descending', async ({
    page
  }) => {
    test.setTimeout(180000);
    const telemetry = captureBrowserTelemetry(page);
    await runDefaultPreview(page);
    const previewVisible = await page.locator('#preview-content').isVisible().catch(() => false);
    if (!previewVisible) {
      test.skip(true, 'Preview not visible; may require Jira credentials');
      return;
    }
    await page.click('#tab-btn-sprints');
    await page.waitForSelector('#sprints-content', {
      state: 'visible',
      timeout: 5000
    }).catch(() => null);
    const table = page.locator('#sprints-content table.data-table tbody tr');
    const count = await table.count();
    if (count < 2) {
      test.skip(true, 'Need at least 2 sprint rows to assert order');
      return;
    }
    const endDates = [];
    for (let i = 0; i < count; i++) {
      const row = table.nth(i);
      const endCell = row.locator('td').nth(4);
      const text = await endCell.textContent().catch(() => '');
      const d = new Date(text.trim());
      if (!Number.isNaN(d.getTime())) endDates.push(d.getTime());
    }
    for (let i = 1; i < endDates.length; i++) {
      expect(endDates[i]).toBeLessThanOrEqual(endDates[i - 1]);
    }
    expect(telemetry.consoleErrors).toEqual([]);
    expect(telemetry.pageErrors).toEqual([]);
  });
  test('current-sprint page shows sprint tabs in descending end date order', async ({
    page
  }) => {
    test.setTimeout(120000);
    const telemetry = captureBrowserTelemetry(page);
    await page.goto('/current-sprint');
    if (page.url().includes('login') || page.url().endsWith('/')) {
      test.skip(true, 'Redirected to login; auth may be required');
      return;
    }
    await expect(page.locator('#board-select')).toBeVisible();
    await page.waitForTimeout(2000);
    const tabs = page.locator('.sprint-tab[data-sprint-id]');
    const tabCount = await tabs.count();
    if (tabCount < 2) {
      test.skip(true, 'Need at least 2 sprint tabs to assert order');
      return;
    }
    const endTimes = [];
    for (let i = 0; i < tabCount; i++) {
      const title = await tabs.nth(i).getAttribute('title').catch(() => '');
      const endPart = title && title.includes(' - End: ') ? title.split(' - End: ')[1] : '';
      if (endPart) {
        const d = new Date(endPart.trim());
        if (!Number.isNaN(d.getTime())) endTimes.push(d.getTime());
      }
    }
    for (let i = 1; i < endTimes.length; i++) {
      expect(endTimes[i]).toBeLessThanOrEqual(endTimes[i - 1]);
    }
    expect(telemetry.consoleErrors).toEqual([]);
    expect(telemetry.pageErrors).toEqual([]);
    expect(telemetry.failedRequests).toEqual([]);
  });
  test('leadership page shows quarter quick-pick and sets start/end on Q2 click', async ({
    page
  }) => {
    const telemetry = captureBrowserTelemetry(page);
    await page.goto('/sprint-leadership');
    if (page.url().includes('login') || page.url().endsWith('/')) {
      test.skip(true, 'Redirected to login; auth may be required');
      return;
    }
    await expect(page.locator('.quick-range-btn-leadership[data-quarter="2"]')).toBeVisible();
    await page.click('.quick-range-btn-leadership[data-quarter="2"]');
    await page.waitForTimeout(300);
    const startVal = await page.locator('#leadership-start').inputValue();
    const endVal = await page.locator('#leadership-end').inputValue();
    expect(startVal).toBeTruthy();
    expect(endVal).toBeTruthy();
    const startDate = new Date(startVal);
    const endDate = new Date(endVal);
    expect(Number.isNaN(startDate.getTime())).toBeFalsy();
    expect(Number.isNaN(endDate.getTime())).toBeFalsy();
    expect(startDate.getTime()).toBeLessThanOrEqual(endDate.getTime());
    expect(telemetry.consoleErrors).toEqual([]);
    expect(telemetry.pageErrors).toEqual([]);
  });
  test('API date-range returns latest completed quarter', async ({
    request
  }) => {
    const res = await request.get('/api/date-range?quarter=Q2');
    if (!res.ok()) {
      test.skip(true, `API returned ${res.status()} (auth or env may be required)`);
      return;
    }
    const data = await res.json();
    expect(data).toHaveProperty('start');
    expect(data).toHaveProperty('end');
    expect(data).toHaveProperty('year');
    expect(data).toHaveProperty('label');
    expect(data).toHaveProperty('period');
    const start = new Date(data.start);
    const end = new Date(data.end);
    expect(Number.isNaN(start.getTime())).toBeFalsy();
    expect(Number.isNaN(end.getTime())).toBeFalsy();
    expect(start.getTime()).toBeLessThanOrEqual(end.getTime());
    const now = Date.now();
    expect(end.getTime()).toBeLessThanOrEqual(now + 86400000);
  });
  test('API default-window returns start and end', async ({
    request
  }) => {
    const res = await request.get('/api/default-window');
    if (!res.ok()) {
      test.skip(true, `API returned ${res.status()} (auth or env may be required)`);
      return;
    }
    const data = await res.json();
    expect(data).toHaveProperty('start');
    expect(data).toHaveProperty('end');
    expect(typeof data.start).toBe('string');
    expect(typeof data.end).toBe('string');
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ0ZXN0IiwiZXhwZWN0IiwicnVuRGVmYXVsdFByZXZpZXciLCJ3YWl0Rm9yUHJldmlldyIsImNhcHR1cmVCcm93c2VyVGVsZW1ldHJ5IiwiZGVzY3JpYmUiLCJwYWdlIiwidGVsZW1ldHJ5IiwiZ290byIsImxvY2F0b3IiLCJ0b0NvbnRhaW5UZXh0IiwidG9CZVZpc2libGUiLCJjb25zb2xlRXJyb3JzIiwidG9FcXVhbCIsInBhZ2VFcnJvcnMiLCJmYWlsZWRSZXF1ZXN0cyIsInNldFRpbWVvdXQiLCJjbGljayIsIndhaXRGb3JUaW1lb3V0Iiwic3RhcnRWYWwiLCJpbnB1dFZhbHVlIiwiZW5kVmFsIiwidG9CZVRydXRoeSIsInN0YXJ0RGF0ZSIsIkRhdGUiLCJlbmREYXRlIiwiTnVtYmVyIiwiaXNOYU4iLCJnZXRUaW1lIiwidG9CZUZhbHN5IiwidG9CZUxlc3NUaGFuT3JFcXVhbCIsIlByb21pc2UiLCJyYWNlIiwid2FpdEZvclNlbGVjdG9yIiwic3RhdGUiLCJ0aW1lb3V0IiwiY2F0Y2giLCJsb2FkaW5nVmlzaWJsZSIsImlzVmlzaWJsZSIsInByZXZpZXdWaXNpYmxlIiwiZXJyb3JWaXNpYmxlIiwic2tpcCIsInRhYmxlIiwiY291bnQiLCJlbmREYXRlcyIsImkiLCJyb3ciLCJudGgiLCJlbmRDZWxsIiwidGV4dCIsInRleHRDb250ZW50IiwiZCIsInRyaW0iLCJwdXNoIiwibGVuZ3RoIiwidXJsIiwiaW5jbHVkZXMiLCJlbmRzV2l0aCIsInRhYnMiLCJ0YWJDb3VudCIsImVuZFRpbWVzIiwidGl0bGUiLCJnZXRBdHRyaWJ1dGUiLCJlbmRQYXJ0Iiwic3BsaXQiLCJyZXF1ZXN0IiwicmVzIiwiZ2V0Iiwib2siLCJzdGF0dXMiLCJkYXRhIiwianNvbiIsInRvSGF2ZVByb3BlcnR5Iiwic3RhcnQiLCJlbmQiLCJub3ciLCJ0b0JlIl0sInNvdXJjZXMiOlsiSmlyYS1SZXBvcnRpbmctQXBwLVZvZGFjb20tUXVhcnRlcnMtU1NPVC1TcHJpbnQtT3JkZXItVmFsaWRhdGlvbi1UZXN0cy5zcGVjLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBWb2RhY29tIFF1YXJ0ZXJzLCBTU09ULCBhbmQgU3ByaW50IE9yZGVyIFZhbGlkYXRpb24uXHJcbiAqIFZhbGlkYXRlcyBxdWFydGVyIHF1aWNrLXBpY2ssIGRhdGUtcmFuZ2UgQVBJLCBkZWZhdWx0IHdpbmRvdywgYW5kIHNwcmludCBvcmRlciAoUmVwb3J0ICsgQ3VycmVudCBTcHJpbnQpLlxyXG4gKiBVc2VzIGNhcHR1cmVCcm93c2VyVGVsZW1ldHJ5IGFuZCBVSSBhc3NlcnRpb25zIGF0IGV2ZXJ5IHN0ZXA7IGZhaWxzIG9uIFVJIG1pc21hdGNoIG9yIGNvbnNvbGUvbmV0d29yayBlcnJvcnMuXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgdGVzdCwgZXhwZWN0IH0gZnJvbSAnQHBsYXl3cmlnaHQvdGVzdCc7XHJcbmltcG9ydCB7IHJ1bkRlZmF1bHRQcmV2aWV3LCB3YWl0Rm9yUHJldmlldywgY2FwdHVyZUJyb3dzZXJUZWxlbWV0cnkgfSBmcm9tICcuL0ppcmFSZXBvcnRpbmctVGVzdHMtU2hhcmVkLVByZXZpZXdFeHBvcnQtSGVscGVycy5qcyc7XHJcblxyXG50ZXN0LmRlc2NyaWJlKCdKaXJhIFJlcG9ydGluZyBBcHAgLSBWb2RhY29tIFF1YXJ0ZXJzIFNTT1QgU3ByaW50IE9yZGVyIFZhbGlkYXRpb24nLCAoKSA9PiB7XHJcbiAgdGVzdCgncmVwb3J0IHBhZ2Ugc2hvd3MgcXVhcnRlciBxdWljay1waWNrIGJ1dHRvbnMgYW5kIG5vIGNvbnNvbGUgZXJyb3JzJywgYXN5bmMgKHsgcGFnZSB9KSA9PiB7XHJcbiAgICBjb25zdCB0ZWxlbWV0cnkgPSBjYXB0dXJlQnJvd3NlclRlbGVtZXRyeShwYWdlKTtcclxuICAgIGF3YWl0IHBhZ2UuZ290bygnL3JlcG9ydCcpO1xyXG5cclxuICAgIGF3YWl0IGV4cGVjdChwYWdlLmxvY2F0b3IoJ2gxJykpLnRvQ29udGFpblRleHQoJ1ZvZGFBZ2lsZUJvYXJkJyk7XHJcbiAgICBhd2FpdCBleHBlY3QocGFnZS5sb2NhdG9yKCcucXVpY2stcmFuZ2UtcGlsbHMnKSkudG9CZVZpc2libGUoKTtcclxuICAgIGF3YWl0IGV4cGVjdChwYWdlLmxvY2F0b3IoJy5xdWljay1yYW5nZS1idG5bZGF0YS1xdWFydGVyPVwiMVwiXScpKS50b0NvbnRhaW5UZXh0KC9RMS8pO1xyXG4gICAgYXdhaXQgZXhwZWN0KHBhZ2UubG9jYXRvcignLnF1aWNrLXJhbmdlLWJ0bltkYXRhLXF1YXJ0ZXI9XCIyXCJdJykpLnRvQ29udGFpblRleHQoL1EyLyk7XHJcbiAgICBhd2FpdCBleHBlY3QocGFnZS5sb2NhdG9yKCcucXVpY2stcmFuZ2UtYnRuW2RhdGEtcXVhcnRlcj1cIjNcIl0nKSkudG9Db250YWluVGV4dCgvUTMvKTtcclxuICAgIGF3YWl0IGV4cGVjdChwYWdlLmxvY2F0b3IoJy5xdWljay1yYW5nZS1idG5bZGF0YS1xdWFydGVyPVwiNFwiXScpKS50b0NvbnRhaW5UZXh0KC9RNC8pO1xyXG4gICAgYXdhaXQgZXhwZWN0KHBhZ2UubG9jYXRvcignI3N0YXJ0LWRhdGUnKSkudG9CZVZpc2libGUoKTtcclxuICAgIGF3YWl0IGV4cGVjdChwYWdlLmxvY2F0b3IoJyNlbmQtZGF0ZScpKS50b0JlVmlzaWJsZSgpO1xyXG5cclxuICAgIGV4cGVjdCh0ZWxlbWV0cnkuY29uc29sZUVycm9ycykudG9FcXVhbChbXSk7XHJcbiAgICBleHBlY3QodGVsZW1ldHJ5LnBhZ2VFcnJvcnMpLnRvRXF1YWwoW10pO1xyXG4gICAgZXhwZWN0KHRlbGVtZXRyeS5mYWlsZWRSZXF1ZXN0cykudG9FcXVhbChbXSk7XHJcbiAgfSk7XHJcblxyXG4gIHRlc3QoJ3JlcG9ydCBxdWFydGVyIHF1aWNrLXBpY2sgUTIgc2V0cyBzdGFydCBhbmQgZW5kIGlucHV0cyBhbmQgdHJpZ2dlcnMgcHJldmlldycsIGFzeW5jICh7IHBhZ2UgfSkgPT4ge1xyXG4gICAgdGVzdC5zZXRUaW1lb3V0KDE4MDAwMCk7XHJcbiAgICBjb25zdCB0ZWxlbWV0cnkgPSBjYXB0dXJlQnJvd3NlclRlbGVtZXRyeShwYWdlKTtcclxuICAgIGF3YWl0IHBhZ2UuZ290bygnL3JlcG9ydCcpO1xyXG5cclxuICAgIGF3YWl0IHBhZ2UuY2xpY2soJy5xdWljay1yYW5nZS1idG5bZGF0YS1xdWFydGVyPVwiMlwiXScpO1xyXG4gICAgYXdhaXQgcGFnZS53YWl0Rm9yVGltZW91dCgyMDAwKTtcclxuICAgIGNvbnN0IHN0YXJ0VmFsID0gYXdhaXQgcGFnZS5sb2NhdG9yKCcjc3RhcnQtZGF0ZScpLmlucHV0VmFsdWUoKTtcclxuICAgIGNvbnN0IGVuZFZhbCA9IGF3YWl0IHBhZ2UubG9jYXRvcignI2VuZC1kYXRlJykuaW5wdXRWYWx1ZSgpO1xyXG4gICAgZXhwZWN0KHN0YXJ0VmFsKS50b0JlVHJ1dGh5KCk7XHJcbiAgICBleHBlY3QoZW5kVmFsKS50b0JlVHJ1dGh5KCk7XHJcbiAgICBjb25zdCBzdGFydERhdGUgPSBuZXcgRGF0ZShzdGFydFZhbCk7XHJcbiAgICBjb25zdCBlbmREYXRlID0gbmV3IERhdGUoZW5kVmFsKTtcclxuICAgIGV4cGVjdChOdW1iZXIuaXNOYU4oc3RhcnREYXRlLmdldFRpbWUoKSkpLnRvQmVGYWxzeSgpO1xyXG4gICAgZXhwZWN0KE51bWJlci5pc05hTihlbmREYXRlLmdldFRpbWUoKSkpLnRvQmVGYWxzeSgpO1xyXG4gICAgZXhwZWN0KHN0YXJ0RGF0ZS5nZXRUaW1lKCkpLnRvQmVMZXNzVGhhbk9yRXF1YWwoZW5kRGF0ZS5nZXRUaW1lKCkpO1xyXG5cclxuICAgIGF3YWl0IFByb21pc2UucmFjZShbXHJcbiAgICAgIHBhZ2Uud2FpdEZvclNlbGVjdG9yKCcjbG9hZGluZycsIHsgc3RhdGU6ICd2aXNpYmxlJywgdGltZW91dDogMTUwMDAgfSkuY2F0Y2goKCkgPT4gbnVsbCksXHJcbiAgICAgIHBhZ2Uud2FpdEZvclNlbGVjdG9yKCcjcHJldmlldy1jb250ZW50JywgeyBzdGF0ZTogJ3Zpc2libGUnLCB0aW1lb3V0OiAxNTAwMCB9KS5jYXRjaCgoKSA9PiBudWxsKSxcclxuICAgICAgcGFnZS53YWl0Rm9yU2VsZWN0b3IoJyNlcnJvcicsIHsgc3RhdGU6ICd2aXNpYmxlJywgdGltZW91dDogMTUwMDAgfSkuY2F0Y2goKCkgPT4gbnVsbCksXHJcbiAgICBdKTtcclxuICAgIGNvbnN0IGxvYWRpbmdWaXNpYmxlID0gYXdhaXQgcGFnZS5sb2NhdG9yKCcjbG9hZGluZycpLmlzVmlzaWJsZSgpLmNhdGNoKCgpID0+IGZhbHNlKTtcclxuICAgIGNvbnN0IHByZXZpZXdWaXNpYmxlID0gYXdhaXQgcGFnZS5sb2NhdG9yKCcjcHJldmlldy1jb250ZW50JykuaXNWaXNpYmxlKCkuY2F0Y2goKCkgPT4gZmFsc2UpO1xyXG4gICAgY29uc3QgZXJyb3JWaXNpYmxlID0gYXdhaXQgcGFnZS5sb2NhdG9yKCcjZXJyb3InKS5pc1Zpc2libGUoKS5jYXRjaCgoKSA9PiBmYWxzZSk7XHJcbiAgICBpZiAoIWxvYWRpbmdWaXNpYmxlICYmICFwcmV2aWV3VmlzaWJsZSAmJiAhZXJyb3JWaXNpYmxlKSB7XHJcbiAgICAgIHRlc3Quc2tpcCh0cnVlLCAnUHJldmlldy9sb2FkaW5nL2Vycm9yIGRpZCBub3QgYXBwZWFyOyBBUEkgYXV0aCBvciBKaXJhIG1heSBiZSByZXF1aXJlZCcpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBleHBlY3QobG9hZGluZ1Zpc2libGUgfHwgcHJldmlld1Zpc2libGUgfHwgZXJyb3JWaXNpYmxlKS50b0JlVHJ1dGh5KCk7XHJcblxyXG4gICAgZXhwZWN0KHRlbGVtZXRyeS5jb25zb2xlRXJyb3JzKS50b0VxdWFsKFtdKTtcclxuICAgIGV4cGVjdCh0ZWxlbWV0cnkucGFnZUVycm9ycykudG9FcXVhbChbXSk7XHJcbiAgfSk7XHJcblxyXG4gIHRlc3QoJ1JlcG9ydCBTcHJpbnRzIHRhYiByb3dzIGFyZSBvcmRlcmVkIGJ5IHNwcmludCBlbmQgZGF0ZSBkZXNjZW5kaW5nJywgYXN5bmMgKHsgcGFnZSB9KSA9PiB7XHJcbiAgICB0ZXN0LnNldFRpbWVvdXQoMTgwMDAwKTtcclxuICAgIGNvbnN0IHRlbGVtZXRyeSA9IGNhcHR1cmVCcm93c2VyVGVsZW1ldHJ5KHBhZ2UpO1xyXG4gICAgYXdhaXQgcnVuRGVmYXVsdFByZXZpZXcocGFnZSk7XHJcblxyXG4gICAgY29uc3QgcHJldmlld1Zpc2libGUgPSBhd2FpdCBwYWdlLmxvY2F0b3IoJyNwcmV2aWV3LWNvbnRlbnQnKS5pc1Zpc2libGUoKS5jYXRjaCgoKSA9PiBmYWxzZSk7XHJcbiAgICBpZiAoIXByZXZpZXdWaXNpYmxlKSB7XHJcbiAgICAgIHRlc3Quc2tpcCh0cnVlLCAnUHJldmlldyBub3QgdmlzaWJsZTsgbWF5IHJlcXVpcmUgSmlyYSBjcmVkZW50aWFscycpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgYXdhaXQgcGFnZS5jbGljaygnI3RhYi1idG4tc3ByaW50cycpO1xyXG4gICAgYXdhaXQgcGFnZS53YWl0Rm9yU2VsZWN0b3IoJyNzcHJpbnRzLWNvbnRlbnQnLCB7IHN0YXRlOiAndmlzaWJsZScsIHRpbWVvdXQ6IDUwMDAgfSkuY2F0Y2goKCkgPT4gbnVsbCk7XHJcbiAgICBjb25zdCB0YWJsZSA9IHBhZ2UubG9jYXRvcignI3NwcmludHMtY29udGVudCB0YWJsZS5kYXRhLXRhYmxlIHRib2R5IHRyJyk7XHJcbiAgICBjb25zdCBjb3VudCA9IGF3YWl0IHRhYmxlLmNvdW50KCk7XHJcbiAgICBpZiAoY291bnQgPCAyKSB7XHJcbiAgICAgIHRlc3Quc2tpcCh0cnVlLCAnTmVlZCBhdCBsZWFzdCAyIHNwcmludCByb3dzIHRvIGFzc2VydCBvcmRlcicpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgZW5kRGF0ZXMgPSBbXTtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY291bnQ7IGkrKykge1xyXG4gICAgICBjb25zdCByb3cgPSB0YWJsZS5udGgoaSk7XHJcbiAgICAgIGNvbnN0IGVuZENlbGwgPSByb3cubG9jYXRvcigndGQnKS5udGgoNCk7XHJcbiAgICAgIGNvbnN0IHRleHQgPSBhd2FpdCBlbmRDZWxsLnRleHRDb250ZW50KCkuY2F0Y2goKCkgPT4gJycpO1xyXG4gICAgICBjb25zdCBkID0gbmV3IERhdGUodGV4dC50cmltKCkpO1xyXG4gICAgICBpZiAoIU51bWJlci5pc05hTihkLmdldFRpbWUoKSkpIGVuZERhdGVzLnB1c2goZC5nZXRUaW1lKCkpO1xyXG4gICAgfVxyXG4gICAgZm9yIChsZXQgaSA9IDE7IGkgPCBlbmREYXRlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICBleHBlY3QoZW5kRGF0ZXNbaV0pLnRvQmVMZXNzVGhhbk9yRXF1YWwoZW5kRGF0ZXNbaSAtIDFdKTtcclxuICAgIH1cclxuXHJcbiAgICBleHBlY3QodGVsZW1ldHJ5LmNvbnNvbGVFcnJvcnMpLnRvRXF1YWwoW10pO1xyXG4gICAgZXhwZWN0KHRlbGVtZXRyeS5wYWdlRXJyb3JzKS50b0VxdWFsKFtdKTtcclxuICB9KTtcclxuXHJcbiAgdGVzdCgnY3VycmVudC1zcHJpbnQgcGFnZSBzaG93cyBzcHJpbnQgdGFicyBpbiBkZXNjZW5kaW5nIGVuZCBkYXRlIG9yZGVyJywgYXN5bmMgKHsgcGFnZSB9KSA9PiB7XHJcbiAgICB0ZXN0LnNldFRpbWVvdXQoMTIwMDAwKTtcclxuICAgIGNvbnN0IHRlbGVtZXRyeSA9IGNhcHR1cmVCcm93c2VyVGVsZW1ldHJ5KHBhZ2UpO1xyXG4gICAgYXdhaXQgcGFnZS5nb3RvKCcvY3VycmVudC1zcHJpbnQnKTtcclxuXHJcbiAgICBpZiAocGFnZS51cmwoKS5pbmNsdWRlcygnbG9naW4nKSB8fCBwYWdlLnVybCgpLmVuZHNXaXRoKCcvJykpIHtcclxuICAgICAgdGVzdC5za2lwKHRydWUsICdSZWRpcmVjdGVkIHRvIGxvZ2luOyBhdXRoIG1heSBiZSByZXF1aXJlZCcpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgYXdhaXQgZXhwZWN0KHBhZ2UubG9jYXRvcignI2JvYXJkLXNlbGVjdCcpKS50b0JlVmlzaWJsZSgpO1xyXG4gICAgYXdhaXQgcGFnZS53YWl0Rm9yVGltZW91dCgyMDAwKTtcclxuICAgIGNvbnN0IHRhYnMgPSBwYWdlLmxvY2F0b3IoJy5zcHJpbnQtdGFiW2RhdGEtc3ByaW50LWlkXScpO1xyXG4gICAgY29uc3QgdGFiQ291bnQgPSBhd2FpdCB0YWJzLmNvdW50KCk7XHJcbiAgICBpZiAodGFiQ291bnQgPCAyKSB7XHJcbiAgICAgIHRlc3Quc2tpcCh0cnVlLCAnTmVlZCBhdCBsZWFzdCAyIHNwcmludCB0YWJzIHRvIGFzc2VydCBvcmRlcicpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgZW5kVGltZXMgPSBbXTtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGFiQ291bnQ7IGkrKykge1xyXG4gICAgICBjb25zdCB0aXRsZSA9IGF3YWl0IHRhYnMubnRoKGkpLmdldEF0dHJpYnV0ZSgndGl0bGUnKS5jYXRjaCgoKSA9PiAnJyk7XHJcbiAgICAgIGNvbnN0IGVuZFBhcnQgPSB0aXRsZSAmJiB0aXRsZS5pbmNsdWRlcygnIC0gRW5kOiAnKSA/IHRpdGxlLnNwbGl0KCcgLSBFbmQ6ICcpWzFdIDogJyc7XHJcbiAgICAgIGlmIChlbmRQYXJ0KSB7XHJcbiAgICAgICAgY29uc3QgZCA9IG5ldyBEYXRlKGVuZFBhcnQudHJpbSgpKTtcclxuICAgICAgICBpZiAoIU51bWJlci5pc05hTihkLmdldFRpbWUoKSkpIGVuZFRpbWVzLnB1c2goZC5nZXRUaW1lKCkpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBmb3IgKGxldCBpID0gMTsgaSA8IGVuZFRpbWVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGV4cGVjdChlbmRUaW1lc1tpXSkudG9CZUxlc3NUaGFuT3JFcXVhbChlbmRUaW1lc1tpIC0gMV0pO1xyXG4gICAgfVxyXG5cclxuICAgIGV4cGVjdCh0ZWxlbWV0cnkuY29uc29sZUVycm9ycykudG9FcXVhbChbXSk7XHJcbiAgICBleHBlY3QodGVsZW1ldHJ5LnBhZ2VFcnJvcnMpLnRvRXF1YWwoW10pO1xyXG4gICAgZXhwZWN0KHRlbGVtZXRyeS5mYWlsZWRSZXF1ZXN0cykudG9FcXVhbChbXSk7XHJcbiAgfSk7XHJcblxyXG4gIHRlc3QoJ2xlYWRlcnNoaXAgcGFnZSBzaG93cyBxdWFydGVyIHF1aWNrLXBpY2sgYW5kIHNldHMgc3RhcnQvZW5kIG9uIFEyIGNsaWNrJywgYXN5bmMgKHsgcGFnZSB9KSA9PiB7XHJcbiAgICBjb25zdCB0ZWxlbWV0cnkgPSBjYXB0dXJlQnJvd3NlclRlbGVtZXRyeShwYWdlKTtcclxuICAgIGF3YWl0IHBhZ2UuZ290bygnL3NwcmludC1sZWFkZXJzaGlwJyk7XHJcblxyXG4gICAgaWYgKHBhZ2UudXJsKCkuaW5jbHVkZXMoJ2xvZ2luJykgfHwgcGFnZS51cmwoKS5lbmRzV2l0aCgnLycpKSB7XHJcbiAgICAgIHRlc3Quc2tpcCh0cnVlLCAnUmVkaXJlY3RlZCB0byBsb2dpbjsgYXV0aCBtYXkgYmUgcmVxdWlyZWQnKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGF3YWl0IGV4cGVjdChwYWdlLmxvY2F0b3IoJy5xdWljay1yYW5nZS1idG4tbGVhZGVyc2hpcFtkYXRhLXF1YXJ0ZXI9XCIyXCJdJykpLnRvQmVWaXNpYmxlKCk7XHJcbiAgICBhd2FpdCBwYWdlLmNsaWNrKCcucXVpY2stcmFuZ2UtYnRuLWxlYWRlcnNoaXBbZGF0YS1xdWFydGVyPVwiMlwiXScpO1xyXG4gICAgYXdhaXQgcGFnZS53YWl0Rm9yVGltZW91dCgzMDApO1xyXG4gICAgY29uc3Qgc3RhcnRWYWwgPSBhd2FpdCBwYWdlLmxvY2F0b3IoJyNsZWFkZXJzaGlwLXN0YXJ0JykuaW5wdXRWYWx1ZSgpO1xyXG4gICAgY29uc3QgZW5kVmFsID0gYXdhaXQgcGFnZS5sb2NhdG9yKCcjbGVhZGVyc2hpcC1lbmQnKS5pbnB1dFZhbHVlKCk7XHJcbiAgICBleHBlY3Qoc3RhcnRWYWwpLnRvQmVUcnV0aHkoKTtcclxuICAgIGV4cGVjdChlbmRWYWwpLnRvQmVUcnV0aHkoKTtcclxuICAgIGNvbnN0IHN0YXJ0RGF0ZSA9IG5ldyBEYXRlKHN0YXJ0VmFsKTtcclxuICAgIGNvbnN0IGVuZERhdGUgPSBuZXcgRGF0ZShlbmRWYWwpO1xyXG4gICAgZXhwZWN0KE51bWJlci5pc05hTihzdGFydERhdGUuZ2V0VGltZSgpKSkudG9CZUZhbHN5KCk7XHJcbiAgICBleHBlY3QoTnVtYmVyLmlzTmFOKGVuZERhdGUuZ2V0VGltZSgpKSkudG9CZUZhbHN5KCk7XHJcbiAgICBleHBlY3Qoc3RhcnREYXRlLmdldFRpbWUoKSkudG9CZUxlc3NUaGFuT3JFcXVhbChlbmREYXRlLmdldFRpbWUoKSk7XHJcblxyXG4gICAgZXhwZWN0KHRlbGVtZXRyeS5jb25zb2xlRXJyb3JzKS50b0VxdWFsKFtdKTtcclxuICAgIGV4cGVjdCh0ZWxlbWV0cnkucGFnZUVycm9ycykudG9FcXVhbChbXSk7XHJcbiAgfSk7XHJcblxyXG4gIHRlc3QoJ0FQSSBkYXRlLXJhbmdlIHJldHVybnMgbGF0ZXN0IGNvbXBsZXRlZCBxdWFydGVyJywgYXN5bmMgKHsgcmVxdWVzdCB9KSA9PiB7XHJcbiAgICBjb25zdCByZXMgPSBhd2FpdCByZXF1ZXN0LmdldCgnL2FwaS9kYXRlLXJhbmdlP3F1YXJ0ZXI9UTInKTtcclxuICAgIGlmICghcmVzLm9rKCkpIHtcclxuICAgICAgdGVzdC5za2lwKHRydWUsIGBBUEkgcmV0dXJuZWQgJHtyZXMuc3RhdHVzKCl9IChhdXRoIG9yIGVudiBtYXkgYmUgcmVxdWlyZWQpYCk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXMuanNvbigpO1xyXG4gICAgZXhwZWN0KGRhdGEpLnRvSGF2ZVByb3BlcnR5KCdzdGFydCcpO1xyXG4gICAgZXhwZWN0KGRhdGEpLnRvSGF2ZVByb3BlcnR5KCdlbmQnKTtcclxuICAgIGV4cGVjdChkYXRhKS50b0hhdmVQcm9wZXJ0eSgneWVhcicpO1xyXG4gICAgZXhwZWN0KGRhdGEpLnRvSGF2ZVByb3BlcnR5KCdsYWJlbCcpO1xyXG4gICAgZXhwZWN0KGRhdGEpLnRvSGF2ZVByb3BlcnR5KCdwZXJpb2QnKTtcclxuICAgIGNvbnN0IHN0YXJ0ID0gbmV3IERhdGUoZGF0YS5zdGFydCk7XHJcbiAgICBjb25zdCBlbmQgPSBuZXcgRGF0ZShkYXRhLmVuZCk7XHJcbiAgICBleHBlY3QoTnVtYmVyLmlzTmFOKHN0YXJ0LmdldFRpbWUoKSkpLnRvQmVGYWxzeSgpO1xyXG4gICAgZXhwZWN0KE51bWJlci5pc05hTihlbmQuZ2V0VGltZSgpKSkudG9CZUZhbHN5KCk7XHJcbiAgICBleHBlY3Qoc3RhcnQuZ2V0VGltZSgpKS50b0JlTGVzc1RoYW5PckVxdWFsKGVuZC5nZXRUaW1lKCkpO1xyXG4gICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcclxuICAgIGV4cGVjdChlbmQuZ2V0VGltZSgpKS50b0JlTGVzc1RoYW5PckVxdWFsKG5vdyArIDg2NDAwMDAwKTtcclxuICB9KTtcclxuXHJcbiAgdGVzdCgnQVBJIGRlZmF1bHQtd2luZG93IHJldHVybnMgc3RhcnQgYW5kIGVuZCcsIGFzeW5jICh7IHJlcXVlc3QgfSkgPT4ge1xyXG4gICAgY29uc3QgcmVzID0gYXdhaXQgcmVxdWVzdC5nZXQoJy9hcGkvZGVmYXVsdC13aW5kb3cnKTtcclxuICAgIGlmICghcmVzLm9rKCkpIHtcclxuICAgICAgdGVzdC5za2lwKHRydWUsIGBBUEkgcmV0dXJuZWQgJHtyZXMuc3RhdHVzKCl9IChhdXRoIG9yIGVudiBtYXkgYmUgcmVxdWlyZWQpYCk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXMuanNvbigpO1xyXG4gICAgZXhwZWN0KGRhdGEpLnRvSGF2ZVByb3BlcnR5KCdzdGFydCcpO1xyXG4gICAgZXhwZWN0KGRhdGEpLnRvSGF2ZVByb3BlcnR5KCdlbmQnKTtcclxuICAgIGV4cGVjdCh0eXBlb2YgZGF0YS5zdGFydCkudG9CZSgnc3RyaW5nJyk7XHJcbiAgICBleHBlY3QodHlwZW9mIGRhdGEuZW5kKS50b0JlKCdzdHJpbmcnKTtcclxuICB9KTtcclxufSk7XHJcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxTQUFTQSxJQUFJLEVBQUVDLE1BQU0sUUFBUSxrQkFBa0I7QUFDL0MsU0FBU0MsaUJBQWlCLEVBQUVDLGNBQWMsRUFBRUMsdUJBQXVCLFFBQVEsdURBQXVEO0FBRWxJSixJQUFJLENBQUNLLFFBQVEsQ0FBQyxvRUFBb0UsRUFBRSxNQUFNO0VBQ3hGTCxJQUFJLENBQUMsb0VBQW9FLEVBQUUsT0FBTztJQUFFTTtFQUFLLENBQUMsS0FBSztJQUM3RixNQUFNQyxTQUFTLEdBQUdILHVCQUF1QixDQUFDRSxJQUFJLENBQUM7SUFDL0MsTUFBTUEsSUFBSSxDQUFDRSxJQUFJLENBQUMsU0FBUyxDQUFDO0lBRTFCLE1BQU1QLE1BQU0sQ0FBQ0ssSUFBSSxDQUFDRyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQ0MsYUFBYSxDQUFDLGdCQUFnQixDQUFDO0lBQ2hFLE1BQU1ULE1BQU0sQ0FBQ0ssSUFBSSxDQUFDRyxPQUFPLENBQUMsb0JBQW9CLENBQUMsQ0FBQyxDQUFDRSxXQUFXLENBQUMsQ0FBQztJQUM5RCxNQUFNVixNQUFNLENBQUNLLElBQUksQ0FBQ0csT0FBTyxDQUFDLG9DQUFvQyxDQUFDLENBQUMsQ0FBQ0MsYUFBYSxDQUFDLElBQUksQ0FBQztJQUNwRixNQUFNVCxNQUFNLENBQUNLLElBQUksQ0FBQ0csT0FBTyxDQUFDLG9DQUFvQyxDQUFDLENBQUMsQ0FBQ0MsYUFBYSxDQUFDLElBQUksQ0FBQztJQUNwRixNQUFNVCxNQUFNLENBQUNLLElBQUksQ0FBQ0csT0FBTyxDQUFDLG9DQUFvQyxDQUFDLENBQUMsQ0FBQ0MsYUFBYSxDQUFDLElBQUksQ0FBQztJQUNwRixNQUFNVCxNQUFNLENBQUNLLElBQUksQ0FBQ0csT0FBTyxDQUFD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