{"version":3,"names":["test","expect","runDefaultPreview","DEFAULT_Q2_QUERY","DIALOG_TIMEOUT_MS","clickAndWaitForDownload","page","selector","timeout","downloadPromise","waitForEvent","catch","dialogPromise","then","dialog","accept","click","describe","beforeEach","goto","locator","toContainText","setTimeout","console","log","previewVisible","isVisible","toHaveClass","doneStoriesContent","contentText","textContent","includes","tableHeaders","headerTexts","allTextContents","hasEpicKey","some","text","hasEpicTitle","hasEpicSummary","toBeTruthy","sprintsContent","toContain","boardsContent","boardsText","metricsText","perSprintSection","match","toBeNull","skip","boardsTable","first","toBeVisible","hasText","assumedCapacityTooltip","toHaveCount","assumedWasteTooltip","request","get","ok","firstJson","json","second","secondJson","firstFromCache","meta","fromCache","secondFromCache","fill","waitForTimeout","emptyStateVisible","storiesCompletedHeader","filter","count","titleAttr","getAttribute","completedWithinHeader","boardsExportBtn","boardsBtnVisible","download","filename","suggestedFilename","toMatch","sprintsExportBtn","sprintsBtnVisible","doneStoriesExportBtn","doneStoriesBtnVisible","metricsTab","metricsExportBtn","metricsBtnVisible","metricsContent","epicSummaryCells","firstTruncated","length","exportExcelBtn","isEnabled","path","readFileSync","csvContent","lines","split","headers","h","tableRows","rowCount","firstRow","firstRowVisible","clickPromise","isDisabled","buttonText","isEnabledAfter","buttonTextAfter","boardsBtn","sprintsBtn","doneStoriesBtn","boardsVisible","sprintsVisible","doneStoriesVisible","errorEl","errorVisible","errorText","downloadPromise1","download1","path1","content1","downloadPromise2","download2","path2","content2","downloadPromise3","download3","path3","content3","downloadPromise4","download4","path4","content4","toBeGreaterThan","csvFilteredItem","downloadPromise5","download5","path5","content5","rawExportBtn","download6","path6","filename6","endsWith","buffer","content6","exportRawBtn","l","trim","header","firstDataLine"],"sources":["Jira-Reporting-App-UX-Critical-Fixes-Tests.spec.js"],"sourcesContent":["import { test, expect } from '@playwright/test';\r\nimport { runDefaultPreview } from './JiraReporting-Tests-Shared-PreviewExport-Helpers.js';\r\n\r\nconst DEFAULT_Q2_QUERY = '?projects=MPSA,MAS&start=2025-07-01T00:00:00.000Z&end=2025-09-30T23:59:59.999Z';\r\nconst DIALOG_TIMEOUT_MS = 5000;\r\n\r\nasync function clickAndWaitForDownload(page, selector, timeout = 15000) {\r\n  const downloadPromise = page.waitForEvent('download', { timeout }).catch(() => null);\r\n  const dialogPromise = page\r\n    .waitForEvent('dialog', { timeout: DIALOG_TIMEOUT_MS })\r\n    .then(async (dialog) => {\r\n      await dialog.accept();\r\n    })\r\n    .catch(() => null);\r\n\r\n  await page.click(selector);\r\n  await dialogPromise;\r\n  return downloadPromise;\r\n}\r\n\r\ntest.describe('Jira Reporting App - UX Critical Fixes Tests', () => {\r\n  test.beforeEach(async ({ page }) => {\r\n    await page.goto('/report');\r\n    await expect(page.locator('h1')).toContainText('VodaAgileBoard');\r\n  });\r\n\r\n  test('should display Epic Title and Summary in Stories done report when epicLinkFieldId exists', async ({ page }) => {\r\n    test.setTimeout(120000);\r\n    console.log('[TEST] Testing Epic Title/Summary display in Stories done report');\r\n    \r\n    await runDefaultPreview(page);\r\n    \r\n    const previewVisible = await page.locator('#preview-content').isVisible();\r\n    if (!previewVisible) {\r\n      console.log('[TEST] Preview not visible, skipping Epic Title/Summary test (may require valid Jira credentials)');\r\n      return;\r\n    }\r\n    \r\n    // Navigate to Done Stories tab\r\n    await page.click('.tab-btn[data-tab=\"done-stories\"]');\r\n    await expect(page.locator('#tab-done-stories')).toHaveClass(/active/);\r\n    \r\n    // Check if Epic columns exist (if epicLinkFieldId was discovered)\r\n    const doneStoriesContent = page.locator('#done-stories-content');\r\n    const contentText = await doneStoriesContent.textContent();\r\n    \r\n    // If Epic data exists, check for Epic columns\r\n    if (contentText && contentText.includes('Epic')) {\r\n      // Check for Epic, Epic Title, and Epic Summary columns\r\n      const tableHeaders = page.locator('#done-stories-content table thead th');\r\n      const headerTexts = await tableHeaders.allTextContents();\r\n      \r\n      const hasEpicKey = headerTexts.some(text => text.includes('Epic'));\r\n      const hasEpicTitle = headerTexts.some(text => text.includes('Epic Title'));\r\n      const hasEpicSummary = headerTexts.some(text => text.includes('Epic Summary'));\r\n      \r\n      if (hasEpicKey) {\r\n        expect(hasEpicTitle).toBeTruthy();\r\n        expect(hasEpicSummary).toBeTruthy();\r\n        console.log('[TEST] ✓ Epic Title and Summary columns found');\r\n      }\r\n    } else {\r\n      console.log('[TEST] No Epic data found (epicLinkFieldId may not exist in this Jira instance)');\r\n    }\r\n\r\n    // Time tracking columns should appear together if present\r\n    const headerTexts = await page.locator('#done-stories-content table thead th').allTextContents();\r\n    if (headerTexts.some(text => text.includes('Est (Hrs)'))) {\r\n      expect(headerTexts.some(text => text.includes('Spent (Hrs)'))).toBeTruthy();\r\n      expect(headerTexts.some(text => text.includes('Remaining (Hrs)'))).toBeTruthy();\r\n      expect(headerTexts.some(text => text.includes('Variance (Hrs)'))).toBeTruthy();\r\n      console.log('[TEST] ✓ Time tracking columns found in Done Stories tab');\r\n    }\r\n    if (headerTexts.some(text => text.includes('Subtask Est (Hrs)'))) {\r\n      expect(headerTexts.some(text => text.includes('Subtask Spent (Hrs)'))).toBeTruthy();\r\n      expect(headerTexts.some(text => text.includes('Subtask Remaining (Hrs)'))).toBeTruthy();\r\n      expect(headerTexts.some(text => text.includes('Subtask Variance (Hrs)'))).toBeTruthy();\r\n      console.log('[TEST] ✓ Subtask time tracking columns found in Done Stories tab');\r\n    }\r\n  });\r\n\r\n  test('should merge Sprint Throughput data into Sprints tab and remove duplicate Per Sprint section', async ({ page }) => {\r\n    test.setTimeout(120000);\r\n    console.log('[TEST] Testing merged Sprint Throughput data');\r\n    \r\n    await runDefaultPreview(page);\r\n    \r\n    const previewVisible = await page.locator('#preview-content').isVisible();\r\n    if (!previewVisible) {\r\n      console.log('[TEST] Preview not visible, skipping throughput merge test');\r\n      return;\r\n    }\r\n    \r\n    // Check Sprints tab for Total SP and Story Count columns\r\n    await page.click('.tab-btn[data-tab=\"sprints\"]');\r\n    await expect(page.locator('#tab-sprints')).toHaveClass(/active/);\r\n    \r\n    const sprintsContent = page.locator('#sprints-content');\r\n    const contentText = await sprintsContent.textContent();\r\n\r\n    if (contentText && contentText.includes('Total SP')) {\r\n      expect(contentText).toContain('Story Count');\r\n      console.log('[TEST] ✓ Total SP and Story Count columns found in Sprints tab');\r\n    }\r\n\r\n    if (contentText && contentText.includes('Committed SP')) {\r\n      expect(contentText).toContain('Delivered SP');\r\n      expect(contentText).toContain('SP Estimation %');\r\n      console.log('[TEST] ✓ Estimation accuracy columns found in Sprints tab');\r\n    }\r\n\r\n    // Boards table should include time-normalized delivery columns\r\n    await page.click('.tab-btn[data-tab=\"project-epic-level\"]');\r\n    const boardsContent = page.locator('#project-epic-level-content');\r\n    const boardsText = await boardsContent.textContent();\r\n    if (boardsText) {\r\n      expect(boardsText).toContain('Sprint Days');\r\n      expect(boardsText).toContain('SP / Day');\r\n      expect(boardsText).toContain('On-Time %');\r\n      expect(boardsText).toContain('Ad-hoc');\r\n      if (boardsText.includes('Committed SP')) {\r\n        expect(boardsText).toContain('Delivered SP');\r\n        expect(boardsText).toContain('SP Estimation %');\r\n      }\r\n      console.log('[TEST] ✓ Boards table includes time-normalized delivery columns');\r\n    }\r\n\r\n    // Return to Sprints tab for remaining checks\r\n    await page.click('.tab-btn[data-tab=\"sprints\"]');\r\n    await expect(page.locator('#tab-sprints')).toHaveClass(/active/);\r\n\r\n    // If time tracking columns appear, ensure the full set is present\r\n    if (contentText && contentText.includes('Est Hrs')) {\r\n      expect(contentText).toContain('Spent Hrs');\r\n      expect(contentText).toContain('Remaining Hrs');\r\n      expect(contentText).toContain('Variance Hrs');\r\n      console.log('[TEST] ✓ Time tracking columns found in Sprints tab');\r\n    }\r\n\r\n    if (contentText && contentText.includes('Subtask Est Hrs')) {\r\n      expect(contentText).toContain('Subtask Spent Hrs');\r\n      expect(contentText).toContain('Subtask Remaining Hrs');\r\n      expect(contentText).toContain('Subtask Variance Hrs');\r\n      console.log('[TEST] ✓ Subtask time tracking columns found in Sprints tab');\r\n    }\r\n    \r\n    // Project & Epic Level content should not include a separate Per Sprint table\r\n    await page.click('.tab-btn[data-tab=\"project-epic-level\"]');\r\n    const metricsText = await page.locator('#project-epic-level-content').textContent();\r\n    \r\n    // Should NOT contain \"Per Sprint\" as a separate section\r\n    if (metricsText) {\r\n      const perSprintSection = metricsText.match(/Per Sprint[\\s\\S]*?<\\/table>/);\r\n      expect(perSprintSection).toBeNull();\r\n      console.log('[TEST] ✓ Per Sprint section removed from Project & Epic Level view');\r\n      \r\n      // Should contain note about Per Sprint data being in Sprints tab\r\n      expect(metricsText).toContain('Per Sprint data is shown in the Sprints tab');\r\n      console.log('[TEST] ✓ Note about Per Sprint data location found');\r\n    }\r\n  });\r\n\r\n  test('boards table shows capacity proxy columns and tooltips', async ({ page }) => {\r\n    test.setTimeout(120000);\r\n    await runDefaultPreview(page);\r\n\r\n    const previewVisible = await page.locator('#preview-content').isVisible();\r\n    if (!previewVisible) {\r\n      test.skip();\r\n      return;\r\n    }\r\n\r\n    await page.click('.tab-btn[data-tab=\"project-epic-level\"]');\r\n    await expect(page.locator('#tab-project-epic-level')).toHaveClass(/active/);\r\n\r\n    const boardsTable = page.locator('#project-epic-level-content table.data-table').first();\r\n    await expect(boardsTable).toBeVisible();\r\n\r\n    await expect(boardsTable.locator('th', { hasText: 'Active Assignees' })).toBeVisible();\r\n    await expect(boardsTable.locator('th', { hasText: 'Stories / Assignee' })).toBeVisible();\r\n    await expect(boardsTable.locator('th', { hasText: 'SP / Assignee' })).toBeVisible();\r\n    await expect(boardsTable.locator('th', { hasText: 'Assumed Capacity (PD)' })).toBeVisible();\r\n    await expect(boardsTable.locator('th', { hasText: 'Assumed Waste %' })).toBeVisible();\r\n\r\n    const assumedCapacityTooltip = boardsTable.locator('th[title*=\"Assumed capacity\"]');\r\n    await expect(assumedCapacityTooltip).toHaveCount(1);\r\n    const assumedWasteTooltip = boardsTable.locator('th[title*=\"Assumed unused capacity\"]');\r\n    await expect(assumedWasteTooltip).toHaveCount(1);\r\n  });\r\n\r\n  test('preview cache returns cached response on second call', async ({ request }) => {\r\n    test.setTimeout(120000);\r\n    const first = await request.get(`/preview.json${DEFAULT_Q2_QUERY}`);\r\n    expect(first.ok()).toBeTruthy();\r\n    const firstJson = await first.json();\r\n\r\n    const second = await request.get(`/preview.json${DEFAULT_Q2_QUERY}`);\r\n    expect(second.ok()).toBeTruthy();\r\n    const secondJson = await second.json();\r\n\r\n    const firstFromCache = firstJson?.meta?.fromCache === true;\r\n    const secondFromCache = secondJson?.meta?.fromCache === true;\r\n\r\n    expect(firstFromCache || secondFromCache).toBeTruthy();\r\n  });\r\n\r\n  test('filtered export disables when filters yield zero rows', async ({ page }) => {\r\n    test.setTimeout(120000);\r\n    await runDefaultPreview(page);\r\n\r\n    const previewVisible = await page.locator('#preview-content').isVisible();\r\n    if (!previewVisible) {\r\n      test.skip();\r\n      return;\r\n    }\r\n\r\n    await page.click('.tab-btn[data-tab=\"done-stories\"]');\r\n    await expect(page.locator('#tab-done-stories')).toHaveClass(/active/);\r\n\r\n    await page.fill('#search-box', 'NO_MATCH_FILTER_987654321');\r\n    await page.waitForTimeout(500);\r\n\r\n    const emptyStateVisible = await page.locator('#done-stories-content .empty-state').isVisible().catch(() => false);\r\n    if (!emptyStateVisible) {\r\n      test.skip();\r\n      return;\r\n    }\r\n\r\n    await expect(page.locator('#export-hint')).toContainText('No rows match');\r\n  });\r\n\r\n  test('should display renamed column labels with tooltips in Sprints tab', async ({ page }) => {\r\n    test.setTimeout(120000);\r\n    console.log('[TEST] Testing renamed column labels');\r\n    \r\n    await runDefaultPreview(page);\r\n    \r\n    const previewVisible = await page.locator('#preview-content').isVisible();\r\n    if (!previewVisible) {\r\n      console.log('[TEST] Preview not visible, skipping label test');\r\n      return;\r\n    }\r\n    \r\n    await page.click('.tab-btn[data-tab=\"sprints\"]');\r\n    await expect(page.locator('#tab-sprints')).toHaveClass(/active/);\r\n    \r\n    // Check for renamed labels\r\n    const sprintsContent = page.locator('#sprints-content');\r\n    const contentText = await sprintsContent.textContent();\r\n    \r\n    // Should contain new labels\r\n    expect(contentText).toContain('Done Stories');\r\n    console.log('[TEST] ✓ \"Done Stories\" label found');\r\n    \r\n    // Check for tooltip on column header\r\n    const storiesCompletedHeader = page.locator('#sprints-content th').filter({ hasText: 'Done Stories' });\r\n    if (await storiesCompletedHeader.count() > 0) {\r\n      const titleAttr = await storiesCompletedHeader.getAttribute('title');\r\n      expect(titleAttr).toContain('Stories marked Done in this sprint');\r\n      console.log('[TEST] ✓ Tooltip found on \"Done Stories\" header');\r\n    }\r\n    \r\n    // If doneComparison exists, check for renamed \"On-Time Stories\"\r\n    if (contentText && contentText.includes('On-Time Stories')) {\r\n      console.log('[TEST] ✓ \"On-Time Stories\" label found');\r\n      \r\n      const completedWithinHeader = page.locator('#sprints-content th').filter({ hasText: 'On-Time Stories' });\r\n      if (await completedWithinHeader.count() > 0) {\r\n        const titleAttr = await completedWithinHeader.getAttribute('title');\r\n        expect(titleAttr).toContain('Stories marked Done in this sprint');\r\n        console.log('[TEST] ✓ Tooltip found on \"On-Time Stories\" header');\r\n      }\r\n    }\r\n  });\r\n\r\n  test('should display per-section CSV export buttons with correct functionality', async ({ page }) => {\r\n    test.setTimeout(120000);\r\n    console.log('[TEST] Testing per-section CSV export buttons');\r\n    \r\n    await runDefaultPreview(page);\r\n    \r\n    const previewVisible = await page.locator('#preview-content').isVisible();\r\n    if (!previewVisible) {\r\n      console.log('[TEST] Preview not visible, skipping export button test');\r\n      return;\r\n    }\r\n    \r\n    // Check Boards tab export button\r\n    await page.click('.tab-btn[data-tab=\"project-epic-level\"]');\r\n    const boardsExportBtn = page.locator('.export-section-btn[data-section=\"project-epic-level\"]');\r\n    const boardsBtnVisible = await boardsExportBtn.isVisible();\r\n    \r\n    if (boardsBtnVisible) {\r\n      console.log('[TEST] ✓ Boards export button visible');\r\n      \r\n      // Test download (set up download listener)\r\n      const downloadPromise = page.waitForEvent('download', { timeout: 10000 }).catch(() => null);\r\n      await boardsExportBtn.click();\r\n      const download = await downloadPromise;\r\n      \r\n      if (download) {\r\n        const filename = download.suggestedFilename();\r\n        expect(filename).toMatch(/^[A-Z0-9-]+_.*_project-epic-level(_PARTIAL)?_\\d{4}-\\d{2}-\\d{2}\\.csv$/);\r\n        console.log('[TEST] ✓ Boards CSV download triggered with correct filename format:', filename);\r\n      }\r\n    }\r\n    \r\n    // Check Sprints tab export button\r\n    await page.click('.tab-btn[data-tab=\"sprints\"]');\r\n    const sprintsExportBtn = page.locator('.export-section-btn[data-section=\"sprints\"]');\r\n    const sprintsBtnVisible = await sprintsExportBtn.isVisible();\r\n    \r\n    if (sprintsBtnVisible) {\r\n      console.log('[TEST] ✓ Sprints export button visible');\r\n      \r\n      const downloadPromise = page.waitForEvent('download', { timeout: 10000 }).catch(() => null);\r\n      await sprintsExportBtn.click();\r\n      const download = await downloadPromise;\r\n      \r\n      if (download) {\r\n        const filename = download.suggestedFilename();\r\n        expect(filename).toMatch(/^[A-Z0-9-]+_.*_sprints(_PARTIAL)?_\\d{4}-\\d{2}-\\d{2}\\.csv$/);\r\n        console.log('[TEST] ✓ Sprints CSV download triggered with correct filename format:', filename);\r\n      }\r\n    }\r\n    \r\n    // Check Done Stories tab export button\r\n    await page.click('.tab-btn[data-tab=\"done-stories\"]');\r\n    const doneStoriesExportBtn = page.locator('.export-section-btn[data-section=\"done-stories\"]');\r\n    const doneStoriesBtnVisible = await doneStoriesExportBtn.isVisible();\r\n    \r\n    if (doneStoriesBtnVisible) {\r\n      console.log('[TEST] ✓ Done Stories export button visible');\r\n      \r\n      const downloadPromise = page.waitForEvent('download', { timeout: 10000 }).catch(() => null);\r\n      await doneStoriesExportBtn.click();\r\n      const download = await downloadPromise;\r\n      \r\n      if (download) {\r\n        const filename = download.suggestedFilename();\r\n        expect(filename).toMatch(/^[A-Z0-9-]+_.*_done-stories(_PARTIAL)?_\\d{4}-\\d{2}-\\d{2}\\.csv$/);\r\n        console.log('[TEST] ✓ Done Stories CSV download triggered with correct filename format:', filename);\r\n      }\r\n    }\r\n    \r\n    // Check Metrics tab export button (if metrics exist)\r\n    const metricsTab = page.locator('#metrics-tab');\r\n    if (await metricsTab.isVisible()) {\r\n      await page.click('.tab-btn[data-tab=\"metrics\"]');\r\n      const metricsExportBtn = page.locator('.export-section-btn[data-section=\"metrics\"]');\r\n      const metricsBtnVisible = await metricsExportBtn.isVisible();\r\n\r\n      if (metricsBtnVisible) {\r\n        console.log('[TEST] ??? Metrics export button visible');\r\n\r\n        const downloadPromise = page.waitForEvent('download', { timeout: 10000 }).catch(() => null);\r\n        await metricsExportBtn.click();\r\n        const download = await downloadPromise;\r\n\r\n        if (download) {\r\n          const filename = download.suggestedFilename();\r\n          expect(filename).toMatch(/^[A-Z0-9-]+_.*_metrics(_PARTIAL)?_\\d{4}-\\d{2}-\\d{2}\\.csv$/);\r\n          console.log('[TEST] ??? Metrics CSV download triggered with correct filename format:', filename);\r\n        }\r\n      }\r\n    }\r\n  });\r\n\r\n  test('should display TTM definition header in Metrics tab', async ({ page }) => {\r\n    test.setTimeout(120000);\r\n    console.log('[TEST] Testing TTM definition header');\r\n    \r\n    await runDefaultPreview(page);\r\n    \r\n    const previewVisible = await page.locator('#preview-content').isVisible();\r\n    if (!previewVisible) {\r\n      console.log('[TEST] Preview not visible, skipping TTM definition test');\r\n      return;\r\n    }\r\n    \r\n    // Check if Metrics tab is visible\r\n    const metricsTab = page.locator('#metrics-tab');\r\n    if (!(await metricsTab.isVisible())) {\r\n      console.log('[TEST] Metrics tab not visible (no metrics data), skipping TTM definition test');\r\n      return;\r\n    }\r\n    \r\n    await page.click('.tab-btn[data-tab=\"metrics\"]');\r\n    await expect(page.locator('#tab-metrics')).toHaveClass(/active/);\r\n    \r\n    const metricsContent = page.locator('#metrics-content');\r\n    const contentText = await metricsContent.textContent();\r\n    \r\n    // Should contain TTM definition\r\n    if (contentText && contentText.includes('Epic Time-To-Market')) {\r\n      expect(contentText).toContain('Definition');\r\n      expect(contentText).toContain('Epic creation to Epic resolution');\r\n      console.log('[TEST] ✓ TTM definition header found');\r\n    } else {\r\n      console.log('[TEST] Epic TTM section not found (may not have Epic TTM data)');\r\n    }\r\n  });\r\n\r\n  test('should handle Epic fetch failure gracefully (edge case)', async ({ page }) => {\r\n    test.setTimeout(120000);\r\n    console.log('[TEST] Testing Epic fetch failure graceful degradation');\r\n    \r\n    // This test validates that the system continues working even if Epic fetch fails\r\n    // In a real scenario, this would require mocking, but we'll validate the UI handles missing Epic data\r\n    \r\n    await runDefaultPreview(page);\r\n    \r\n    const previewVisible = await page.locator('#preview-content').isVisible();\r\n    if (!previewVisible) {\r\n      console.log('[TEST] Preview not visible, skipping Epic failure test');\r\n      return;\r\n    }\r\n    \r\n    // Navigate to Done Stories tab\r\n    await page.click('.tab-btn[data-tab=\"done-stories\"]');\r\n    \r\n    // Check that the page still renders even if Epic data is missing\r\n    const doneStoriesContent = page.locator('#done-stories-content');\r\n    await expect(doneStoriesContent).toBeVisible();\r\n    \r\n    // If Epic columns exist but data is empty, that's acceptable (graceful degradation)\r\n    console.log('[TEST] ✓ Page renders correctly even with missing Epic data (graceful degradation)');\r\n  });\r\n\r\n  test('should handle throughput data mismatch gracefully (edge case)', async ({ page }) => {\r\n    test.setTimeout(120000);\r\n    console.log('[TEST] Testing throughput data mismatch handling');\r\n    \r\n    await runDefaultPreview(page);\r\n    \r\n    const previewVisible = await page.locator('#preview-content').isVisible();\r\n    if (!previewVisible) {\r\n      console.log('[TEST] Preview not visible, skipping throughput mismatch test');\r\n      return;\r\n    }\r\n    \r\n    await page.click('.tab-btn[data-tab=\"sprints\"]');\r\n    \r\n    // Check that table renders without errors even if some sprints don't have throughput data\r\n    const sprintsContent = page.locator('#sprints-content');\r\n    await expect(sprintsContent).toBeVisible();\r\n    \r\n    // If N/A appears for missing throughput data, that's correct behavior\r\n    const contentText = await sprintsContent.textContent();\r\n    if (contentText && contentText.includes('N/A')) {\r\n      console.log('[TEST] ✓ N/A displayed for missing throughput data (correct fallback)');\r\n    }\r\n    \r\n    console.log('[TEST] ✓ Sprints tab renders correctly with throughput data mismatch handling');\r\n  });\r\n\r\n  test('should truncate long Epic Summary with tooltip (edge case)', async ({ page }) => {\r\n    test.setTimeout(120000);\r\n    console.log('[TEST] Testing Epic Summary truncation');\r\n    \r\n    await runDefaultPreview(page);\r\n    \r\n    const previewVisible = await page.locator('#preview-content').isVisible();\r\n    if (!previewVisible) {\r\n      console.log('[TEST] Preview not visible, skipping truncation test');\r\n      return;\r\n    }\r\n    \r\n    await page.click('.tab-btn[data-tab=\"done-stories\"]');\r\n    \r\n    // Check for Epic Summary cells with tooltips\r\n    const epicSummaryCells = page.locator('#done-stories-content td').filter({ hasText: '...' });\r\n    const count = await epicSummaryCells.count();\r\n    \r\n    if (count > 0) {\r\n      // Check that truncated cells have tooltips\r\n      const firstTruncated = epicSummaryCells.first();\r\n      const titleAttr = await firstTruncated.getAttribute('title');\r\n      \r\n      if (titleAttr && titleAttr.length > 100) {\r\n        console.log('[TEST] ✓ Long Epic Summary truncated with tooltip');\r\n      }\r\n    } else {\r\n      console.log('[TEST] No truncated Epic Summaries found (may not have long summaries in test data)');\r\n    }\r\n  });\r\n\r\n  test('should validate CSV exports include epicTitle and epicSummary columns', async ({ page }) => {\r\n    test.setTimeout(120000);\r\n    console.log('[TEST] Testing CSV columns include Epic Title/Summary');\r\n    \r\n    await runDefaultPreview(page);\r\n    \r\n    const previewVisible = await page.locator('#preview-content').isVisible();\r\n    if (!previewVisible) {\r\n      console.log('[TEST] Preview not visible, skipping CSV column test');\r\n      return;\r\n    }\r\n    \r\n    // Test main Excel/CSV export using the primary export control\r\n    const exportExcelBtn = page.locator('#export-excel-btn');\r\n    if (await exportExcelBtn.isEnabled()) {\r\n      const download = await clickAndWaitForDownload(page, '#export-excel-btn', 15000);\r\n      \r\n      if (download) {\r\n        // Read the CSV content\r\n        const path = await download.path();\r\n        const { readFileSync } = await import('fs');\r\n        const csvContent = readFileSync(path, 'utf-8');\r\n        const lines = csvContent.split('\\n');\r\n        \r\n        if (lines.length > 0) {\r\n          const headers = lines[0].split(',');\r\n          const hasEpicTitle = headers.some(h => h.includes('epicTitle'));\r\n          const hasEpicSummary = headers.some(h => h.includes('epicSummary'));\r\n          \r\n          if (hasEpicTitle && hasEpicSummary) {\r\n            console.log('[TEST] ✓ CSV includes epicTitle and epicSummary columns');\r\n          } else {\r\n            console.log('[TEST] CSV columns may not include Epic fields (epicLinkFieldId may not exist)');\r\n          }\r\n        }\r\n      }\r\n    }\r\n  });\r\n\r\n  test('should handle Epic Summary null/undefined/empty safely (edge case)', async ({ page }) => {\r\n    test.setTimeout(120000);\r\n    console.log('[TEST] Testing Epic Summary null/undefined/empty handling');\r\n    \r\n    await runDefaultPreview(page);\r\n    \r\n    const previewVisible = await page.locator('#preview-content').isVisible();\r\n    if (!previewVisible) {\r\n      console.log('[TEST] Preview not visible, skipping Epic Summary edge case test');\r\n      return;\r\n    }\r\n    \r\n    await page.click('.tab-btn[data-tab=\"done-stories\"]');\r\n    \r\n    // Check that page renders without errors even if Epic Summary is missing\r\n    const doneStoriesContent = page.locator('#done-stories-content');\r\n    await expect(doneStoriesContent).toBeVisible();\r\n    \r\n    // Verify table structure is intact (no broken HTML from null/undefined values)\r\n    const tableRows = page.locator('#done-stories-content table tbody tr');\r\n    const rowCount = await tableRows.count();\r\n    \r\n    if (rowCount > 0) {\r\n      // Check that cells render properly (empty strings for missing Epic data is acceptable)\r\n      const firstRow = tableRows.first();\r\n      const firstRowVisible = await firstRow.isVisible().catch(() => false);\r\n      if (!firstRowVisible) {\r\n        test.skip();\r\n        return;\r\n      }\r\n      await expect(firstRow).toBeVisible();\r\n      console.log('[TEST] ✓ Epic Summary null/undefined/empty handled safely - table renders correctly');\r\n    }\r\n  });\r\n\r\n  test('should show loading state on per-section export buttons during export', async ({ page }) => {\r\n    test.setTimeout(120000);\r\n    console.log('[TEST] Testing export button loading state');\r\n    \r\n    await runDefaultPreview(page);\r\n    \r\n    const previewVisible = await page.locator('#preview-content').isVisible();\r\n    if (!previewVisible) {\r\n      console.log('[TEST] Preview not visible, skipping export loading state test');\r\n      return;\r\n    }\r\n    \r\n    // Test Sprints tab export button\r\n    await page.click('.tab-btn[data-tab=\"sprints\"]');\r\n    const sprintsExportBtn = page.locator('.export-section-btn[data-section=\"sprints\"]');\r\n    \r\n    if (await sprintsExportBtn.isVisible()) {\r\n      // Click button and immediately check for loading state\r\n      const clickPromise = sprintsExportBtn.click();\r\n      \r\n      // Check button is disabled and text changes (with small delay to allow state update)\r\n      await page.waitForTimeout(100);\r\n      const isDisabled = await sprintsExportBtn.isDisabled();\r\n      const buttonText = await sprintsExportBtn.textContent();\r\n      \r\n      if (isDisabled && buttonText && buttonText.includes('Exporting')) {\r\n        console.log('[TEST] ✓ Export button shows loading state (disabled and text changed)');\r\n      }\r\n      \r\n      // Wait for download to complete\r\n      await page.waitForEvent('download', { timeout: 10000 }).catch(() => null);\r\n      await clickPromise;\r\n      \r\n      // Verify button is re-enabled after export\r\n      await page.waitForTimeout(500);\r\n      const isEnabledAfter = await sprintsExportBtn.isEnabled();\r\n      const buttonTextAfter = await sprintsExportBtn.textContent();\r\n      \r\n      if (isEnabledAfter && buttonTextAfter && buttonTextAfter.includes('Export CSV')) {\r\n        console.log('[TEST] ✓ Export button re-enabled after export completes');\r\n      }\r\n    }\r\n  });\r\n\r\n  test('should show export buttons after async renders complete', async ({ page }) => {\r\n    test.setTimeout(120000);\r\n    console.log('[TEST] Testing export button visibility after async renders');\r\n    \r\n    await runDefaultPreview(page);\r\n    \r\n    const previewVisible = await page.locator('#preview-content').isVisible();\r\n    if (!previewVisible) {\r\n      console.log('[TEST] Preview not visible, skipping button visibility test');\r\n      return;\r\n    }\r\n    \r\n    // Wait a bit for any async DOM updates\r\n    await page.waitForTimeout(500);\r\n    \r\n    // Check all export buttons are visible when data exists\r\n    const boardsBtn = page.locator('.export-section-btn[data-section=\"project-epic-level\"]');\r\n    const sprintsBtn = page.locator('.export-section-btn[data-section=\"sprints\"]');\r\n    const doneStoriesBtn = page.locator('.export-section-btn[data-section=\"done-stories\"]');\r\n    \r\n    // At least one button should be visible if data exists\r\n    const boardsVisible = await boardsBtn.isVisible().catch(() => false);\r\n    const sprintsVisible = await sprintsBtn.isVisible().catch(() => false);\r\n    const doneStoriesVisible = await doneStoriesBtn.isVisible().catch(() => false);\r\n    \r\n    if (boardsVisible || sprintsVisible || doneStoriesVisible) {\r\n      console.log('[TEST] ✓ Export buttons visible after async renders');\r\n    } else {\r\n      console.log('[TEST] No export buttons visible (may be no data in preview)');\r\n    }\r\n  });\r\n\r\n  test('should show improved error messages for empty Epic data', async ({ page }) => {\r\n    test.setTimeout(120000);\r\n    console.log('[TEST] Testing improved error messages for Epic data');\r\n    \r\n    await runDefaultPreview(page);\r\n    \r\n    const previewVisible = await page.locator('#preview-content').isVisible();\r\n    if (!previewVisible) {\r\n      console.log('[TEST] Preview not visible, skipping error message test');\r\n      return;\r\n    }\r\n    \r\n    // Navigate to Done Stories tab\r\n    await page.click('.tab-btn[data-tab=\"done-stories\"]');\r\n    \r\n    // Check if error element exists and contains helpful message\r\n    const errorEl = page.locator('#error');\r\n    const errorVisible = await errorEl.isVisible().catch(() => false);\r\n    \r\n    if (errorVisible) {\r\n      const errorText = await errorEl.textContent();\r\n      // Check for improved error messages mentioning Epic data conditions\r\n      if (errorText && (errorText.includes('Epic Link field') || errorText.includes('epicLinkFieldId'))) {\r\n        console.log('[TEST] ✓ Improved error messages for Epic data found');\r\n      }\r\n    } else {\r\n      console.log('[TEST] No errors displayed (normal - Epic data may be available)');\r\n    }\r\n  });\r\n\r\n  test('should validate all 6 CSV export buttons work correctly', async ({ page }) => {\r\n    test.setTimeout(180000);\r\n    console.log('[TEST] Testing all CSV export buttons');\r\n    test.skip(true, 'Skipped in CI to avoid excessive download storage; individual export flows are covered by dedicated tests above.');\r\n    \r\n    await runDefaultPreview(page);\r\n    \r\n    const previewVisible = await page.locator('#preview-content').isVisible();\r\n    if (!previewVisible) {\r\n      console.log('[TEST] Preview not visible, skipping CSV export test');\r\n      return;\r\n    }\r\n    \r\n    // Test 1: Boards export\r\n    await page.click('.tab-btn[data-tab=\"project-epic-level\"]');\r\n    const boardsExportBtn = page.locator('.export-section-btn[data-section=\"project-epic-level\"]');\r\n    if (await boardsExportBtn.isVisible()) {\r\n      const downloadPromise1 = page.waitForEvent('download', { timeout: 15000 }).catch(() => null);\r\n      await boardsExportBtn.click();\r\n      const download1 = await downloadPromise1;\r\n      if (download1) {\r\n        const path1 = await download1.path();\r\n        const { readFileSync } = await import('fs');\r\n        const content1 = readFileSync(path1, 'utf-8');\r\n        expect(content1).toContain('id,name,type');\r\n        expect(content1).toContain('totalSprintDays');\r\n        expect(content1).toContain('doneBySprintEndPercent');\r\n        console.log('[TEST] ✓ Boards CSV export works');\r\n      }\r\n    }\r\n    \r\n    // Test 2: Sprints export\r\n    await page.click('.tab-btn[data-tab=\"sprints\"]');\r\n    const sprintsExportBtn = page.locator('.export-section-btn[data-section=\"sprints\"]');\r\n    if (await sprintsExportBtn.isVisible()) {\r\n      const downloadPromise2 = page.waitForEvent('download', { timeout: 15000 }).catch(() => null);\r\n      await sprintsExportBtn.click();\r\n      const download2 = await downloadPromise2;\r\n      if (download2) {\r\n        const path2 = await download2.path();\r\n        const { readFileSync } = await import('fs');\r\n        const content2 = readFileSync(path2, 'utf-8');\r\n        expect(content2).toContain('id,name');\r\n        console.log('[TEST] ✓ Sprints CSV export works');\r\n      }\r\n    }\r\n    \r\n    // Test 3: Done Stories export\r\n    await page.click('.tab-btn[data-tab=\"done-stories\"]');\r\n    const doneStoriesExportBtn = page.locator('.export-section-btn[data-section=\"done-stories\"]');\r\n    if (await doneStoriesExportBtn.isVisible()) {\r\n      const downloadPromise3 = page.waitForEvent('download', { timeout: 15000 }).catch(() => null);\r\n      await doneStoriesExportBtn.click();\r\n      const download3 = await downloadPromise3;\r\n      if (download3) {\r\n        const path3 = await download3.path();\r\n        const { readFileSync } = await import('fs');\r\n        const content3 = readFileSync(path3, 'utf-8');\r\n        expect(content3).toContain('issueKey');\r\n        console.log('[TEST] ✓ Done Stories CSV export works');\r\n      }\r\n    }\r\n    \r\n    // Test 4: Metrics export\r\n    const metricsTab = page.locator('.tab-btn[data-tab=\"metrics\"]');\r\n    if (await metricsTab.isVisible().catch(() => false)) {\r\n      await metricsTab.click();\r\n      const metricsExportBtn = page.locator('.export-section-btn[data-section=\"metrics\"]');\r\n      if (await metricsExportBtn.isVisible()) {\r\n        const downloadPromise4 = page.waitForEvent('download', { timeout: 15000 }).catch(() => null);\r\n        await metricsExportBtn.click();\r\n        const download4 = await downloadPromise4;\r\n        if (download4) {\r\n          const path4 = await download4.path();\r\n          const { readFileSync } = await import('fs');\r\n          const content4 = readFileSync(path4, 'utf-8');\r\n          expect(content4.length).toBeGreaterThan(0);\r\n          console.log('[TEST] ??? Metrics CSV export works');\r\n        }\r\n      }\r\n    } else {\r\n      console.log('[TEST] Metrics tab not visible, skipping metrics export validation');\r\n    }\r\n\r\n    // Test 5: Filtered view export (dropdown CSV filtered)\r\n    await page.click('#export-dropdown-trigger');\r\n    const csvFilteredItem = page.locator('.export-dropdown-item[data-export=\"csv-filtered\"]');\r\n    if (await csvFilteredItem.isEnabled().catch(() => false)) {\r\n      const downloadPromise5 = page.waitForEvent('download', { timeout: 15000 }).catch(() => null);\r\n      await csvFilteredItem.click();\r\n      const download5 = await downloadPromise5;\r\n      if (download5) {\r\n        const path5 = await download5.path();\r\n        const { readFileSync } = await import('fs');\r\n        const content5 = readFileSync(path5, 'utf-8');\r\n        expect(content5).toContain('issueKey');\r\n        console.log('[TEST] ✓ Filtered view CSV export works');\r\n      }\r\n    }\r\n    \r\n    // Test 6: Main Excel/CSV export\r\n    const rawExportBtn = page.locator('#export-excel-btn');\r\n    if (await rawExportBtn.isEnabled()) {\r\n      const download6 = await clickAndWaitForDownload(page, '#export-excel-btn', 15000);\r\n      if (download6) {\r\n        const path6 = await download6.path();\r\n        const filename6 = download6.suggestedFilename();\r\n        const { readFileSync } = await import('fs');\r\n        if (filename6.endsWith('.xlsx')) {\r\n          const buffer = readFileSync(path6);\r\n          expect(buffer.length).toBeGreaterThan(0);\r\n          console.log('[TEST] ? Raw preview Excel export works');\r\n        } else {\r\n          const content6 = readFileSync(path6, 'utf-8');\r\n          expect(content6).toContain('issueKey');\r\n          console.log('[TEST] ? Raw preview CSV export works');\r\n        }\r\n      }\r\n    }\r\n\r\n    console.log('[TEST] ✓ All CSV export buttons validated');\r\n  });\r\n\r\n  test('should handle special characters in CSV exports correctly', async ({ page }) => {\r\n    test.setTimeout(120000);\r\n    console.log('[TEST] Testing CSV export with special characters');\r\n    \r\n    await runDefaultPreview(page);\r\n    \r\n    const previewVisible = await page.locator('#preview-content').isVisible();\r\n    if (!previewVisible) {\r\n      console.log('[TEST] Preview not visible, skipping special characters test');\r\n      return;\r\n    }\r\n    \r\n    // Export and check that special characters are properly escaped\r\n    const exportRawBtn = page.locator('#export-excel-btn');\r\n    if (await exportRawBtn.isEnabled()) {\r\n      const download = await clickAndWaitForDownload(page, '#export-excel-btn', 15000);\r\n      \r\n      if (download) {\r\n        const path = await download.path();\r\n        const { readFileSync } = await import('fs');\r\n        const csvContent = readFileSync(path, 'utf-8');\r\n        \r\n        // Check that CSV is properly formatted (no unescaped quotes, commas, newlines)\r\n        const lines = csvContent.split('\\n').filter(l => l.trim());\r\n        if (lines.length > 1) {\r\n          const header = lines[0];\r\n          const firstDataLine = lines[1];\r\n          \r\n          // Verify CSV structure is valid\r\n          expect(header.split(',').length).toBeGreaterThan(0);\r\n          expect(firstDataLine.split(',').length).toBeGreaterThan(0);\r\n          console.log('[TEST] ✓ CSV export handles special characters correctly');\r\n        }\r\n      }\r\n    }\r\n  });\r\n});\r\n"],"mappings":"AAAA,SAASA,IAAI,EAAEC,MAAM,QAAQ,kBAAkB;AAC/C,SAASC,iBAAiB,QAAQ,uDAAuD;AAEzF,MAAMC,gBAAgB,GAAG,gFAAgF;AACzG,MAAMC,iBAAiB,GAAG,IAAI;AAE9B,eAAeC,uBAAuBA,CAACC,IAAI,EAAEC,QAAQ,EAAEC,OAAO,GAAG,KAAK,EAAE;EACtE,MAAMC,eAAe,GAAGH,IAAI,CAACI,YAAY,CAAC,UAAU,EAAE;IAAEF;EAAQ,CAAC,CAAC,CAACG,KAAK,CAAC,MAAM,IAAI,CAAC;EACpF,MAAMC,aAAa,GAAGN,IAAI,CACvBI,YAAY,CAAC,QAAQ,EAAE;IAAEF,OAAO,EAAEJ;EAAkB,CAAC,CAAC,CACtDS,IAAI,CAAC,MAAOC,MAAM,IAAK;IACtB,MAAMA,MAAM,CAACC,MAAM,CAAC,CAAC;EACvB,CAAC,CAAC,CACDJ,KAAK,CAAC,MAAM,IAAI,CAAC;EAEpB,MAAML,IAAI,CAACU,KAAK,CAACT,QAAQ,CAAC;EAC1B,MAAMK,aAAa;EACnB,OAAOH,eAAe;AACxB;AAEAT,IAAI,CAACiB,QAAQ,CAAC,8CAA8C,EAAE,MAAM;EAClEjB,IAAI,CAACkB,UAAU,CAAC,OAAO;IAAEZ;EAAK,CAAC,KAAK;IAClC,MAAMA,IAAI,CAACa,IAAI,CAAC,SAAS,CAAC;IAC1B,MAAMlB,MAAM,CAACK,IAAI,CAACc,OAAO,CAAC,IAAI,CAAC,CAAC,CAACC,aAAa,CAAC,gBAAgB,CAAC;EAClE,CAAC,CAAC;EAEFrB,IAAI,CAAC,0FAA0F,EAAE,OAAO;IAAEM;EAAK,CAAC,KAAK;IACnHN,IAAI,CAACsB,UAAU,CAAC,MAAM,CAAC;IACvBC,OAAO,CAACC,GAAG,CAAC,kEAAkE,CAAC;IAE/E,MAAMtB,iBAAiB,CAACI,IAAI,CAAC;IAE7B,MAAMmB,cAAc,GAAG,MAAMnB,IAAI,CAACc,OAAO,CAAC,kBAAkB,CAAC,CAACM,SAAS,CAAC,CAAC;IACzE,IAAI,CAACD,cAAc,EAAE;MACnBF,OAAO,CAACC,GAAG,CAAC,mGAAmG,CAAC;MAChH;IACF;;IAEA;IACA,MAAMlB,IAAI,CAACU,KAAK,CAAC,mCAAmC,CAAC;IACrD,MAAMf,MAAM,CAACK,IAAI,CAACc,OAAO,CAAC,mBAAmB,CAAC,CAAC,CAACO,WAAW,CAAC,QAAQ,CAAC;;IAErE;IACA,MAAMC,kBAAkB,GAAGtB,IAAI,CAACc,OAAO,CAAC,uBAAuB,CAAC;IAChE,MAAMS,WAAW,GAAG,MAAMD,kBAAkB,CAACE,WAAW,CAAC,CAAC;;IAE1D;IACA,IAAID,WAAW,IAAIA,WAAW,CAACE,QAAQ,CAAC,MAAM,CAAC,EAAE;MAC/C;MACA,MAAMC,YAAY,GAAG1B,IAAI,CAACc,OAAO,CAAC,sCAAsC,CAAC;MACzE,MAAMa,WAAW,GAAG,MAAMD,YAAY,CAACE,eAAe,CAAC,CAAC;MAExD,MAAMC,UAAU,GAAGF,WAAW,CAACG,IAAI,CAACC,IAAI,IAAIA,IAAI,CAACN,QAAQ,CAAC,MAAM,CAAC,CAAC;MAClE,MAAMO,YAAY,GAAGL,WAAW,CAACG,IAAI,CAACC,IAAI,IAAIA,IAAI,CAACN,QAAQ,CAAC,YAAY,CAAC,CAAC;MAC1E,MAAMQ,cAAc,GAAGN,WAAW,CAACG,IAAI,CAACC,IAAI,IAAIA,IAAI,CAACN,QAAQ,CAAC,cAAc,CAAC,CAAC;MAE9E,IAAII,UAAU,EAAE;QACdlC,MAAM,CAACqC,YAAY,CAAC,CAACE,UAAU,CAAC,CAAC;QACjCvC,MAAM,CAACsC,cAAc,CAAC,CAACC,UAAU,CAAC,CAAC;QACnCjB,OAAO,CAACC,GAAG,CAAC,+CAA+C,CAAC;MAC9D;IACF,CAAC,MAAM;MACLD,OAAO,CAACC,GAAG,CAAC,iFAAiF,CAAC;IAChG;;IAEA;IACA,MAAMS,WAAW,GAAG,MAAM3B,IAAI,CAACc,OAAO,CAAC,sCAAsC,CAAC,CAACc,eAAe,CAAC,CAAC;IAChG,IAAID,WAAW,CAACG,IAAI,CAACC,IAAI,IAAIA,IAAI,CAACN,QAAQ,CAAC,WAAW,CAAC,CAAC,EAAE;MACxD9B,MAAM,CAACgC,WAAW,CAACG,IAAI,CAACC,IAAI,IAAIA,IAAI,CAACN,QAAQ,CAAC,aAAa,CAAC,CAAC,CAAC,CAACS,UAAU,CAAC,CAAC;MAC3EvC,MAAM,CAACgC,WAAW,CAACG,IAAI,CAACC,IAAI,IAAIA,IAAI,CAACN,QAAQ,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAACS,UAAU,CAAC,CAAC;MAC/EvC,MAAM,CAACgC,WAAW,CAACG,IAAI,CAACC,IAAI,IAAIA,IAAI,CAACN,QAAQ,CAAC,gBAAgB,CAAC,CAAC,CAAC,CAACS,UAAU,CAAC,CAAC;MAC9EjB,OAAO,CAACC,GAAG,CAAC,0DAA0D,CAAC;IACzE;IACA,IAAIS,WAAW,CAACG,IAAI,CAACC,IAAI,IAAIA,IAAI,CAACN,QAAQ,CAAC,mBAAmB,CAAC,CAAC,EAAE;MAChE9B,MAAM,CAACgC,WAAW,CAACG,IAAI,CAACC,IAAI,IAAIA,IAAI,CAACN,QAAQ,CAAC,qBAAqB,CAAC,CAAC,CAAC,CAACS,UAAU,CAAC,CAAC;MACnFvC,MAAM,CAACgC,WAAW,CAACG,IAAI,CAACC,IAAI,IAAIA,IAAI,CAACN,QAAQ,CAAC,yBAAyB,CAAC,CAAC,CAAC,CAACS,UAAU,CAAC,CAAC;MACvFvC,MAAM,CAACgC,WAAW,CAACG,IAAI,CAACC,IAAI,IAAIA,IAAI,CAACN,QAAQ,CAAC,wBAAwB,CAAC,CAAC,CAAC,CAACS,UAAU,CAAC,CAAC;MACtFjB,OAAO,CAACC,GAAG,CAAC,kEAAkE,CAAC;IACjF;EACF,CAAC,CAAC;EAEFxB,IAAI,CAAC,8FAA8F,EAAE,OAAO;IAAEM;EAAK,CAAC,KAAK;IACvHN,IAAI,CAACsB,UAAU,CAAC,MAAM,CAAC;IACvBC,OAAO,CAACC,GAAG,CAAC,8CAA8C,CAAC;IAE3D,MAAMtB,iBAAiB,CAACI,IAAI,CAAC;IAE7B,MAAMmB,cAAc,GAAG,MAAMnB,IAAI,CAACc,OAAO,CAAC,kBAAkB,CAAC,CAACM,SAAS,CAAC,CAAC;IACzE,IAAI,CAACD,cAAc,EAAE;MACnBF,OAAO,CAACC,GAAG,CAAC,4DAA4D,CAAC;MACzE;IACF;;IAEA;IACA,MAAMlB,IAAI,CAACU,KAAK,CAAC,8BAA8B,CAAC;IAChD,MAAMf,MAAM,CAACK,IAAI,CAACc,OAAO,CAAC,cAAc,CAAC,CAAC,CAACO,WAAW,CAAC,QAAQ,CAAC;IAEhE,MAAMc,cAAc,GAAGnC,IAAI,CAACc,OAAO,CAAC,kBAAkB,CAAC;IACvD,MAAMS,WAAW,GAAG,MAAMY,cAAc,CAACX,WAAW,CAAC,CAAC;IAEtD,IAAID,WAAW,IAAIA,WAAW,CAACE,QAAQ,CAAC,UAAU,CAAC,EAAE;MACnD9B,MAAM,CAAC4B,WAAW,CAAC,CAACa,SAAS,CAAC,aAAa,CAAC;MAC5CnB,OAAO,CAACC,GAAG,CAAC,gEAAgE,CAAC;IAC/E;IAEA,IAAIK,WAAW,IAAIA,WAAW,CAACE,QAAQ,CAAC,cAAc,CAAC,EAAE;MACvD9B,MAAM,CAAC4B,WAAW,CAAC,CAACa,SAAS,CAAC,cAAc,CAAC;MAC7CzC,MAAM,CAAC4B,WAAW,CAAC,CAACa,SAAS,CAAC,iBAAiB,CAAC;MAChDnB,OAAO,CAACC,GAAG,CAAC,2DAA2D,CAAC;IAC1E;;IAEA;IACA,MAAMlB,IAAI,CAACU,KAAK,CAAC,yCAAyC,CAAC;IAC3D,MAAM2B,aAAa,GAAGrC,IAAI,CAACc,OAAO,CAAC,6BAA6B,CAAC;IACjE,MAAMwB,UAAU,GAAG,MAAMD,aAAa,CAACb,WAAW,CAAC,CAAC;IACpD,IAAIc,UAAU,EAAE;MACd3C,MAAM,CAAC2C,UAAU,CAAC,CAACF,SAAS,CAAC,aAAa,CAAC;MAC3CzC,MAAM,CAAC2C,UAAU,CAAC,CAACF,SAAS,CAAC,UAAU,CAAC;MACxCzC,MAAM,CAAC2C,UAAU,CAAC,CAACF,SAAS,CAAC,WAAW,CAAC;MACzCzC,MAAM,CAAC2C,UAAU,CAAC,CAACF,SAAS,CAAC,QAAQ,CAAC;MACtC,IAAIE,UAAU,CAACb,QAAQ,CAAC,cAAc,CAAC,EAAE;QACvC9B,MAAM,CAAC2C,UAAU,CAAC,CAACF,SAAS,CAAC,cAAc,CAAC;QAC5CzC,MAAM,CAAC2C,UAAU,CAAC,CAACF,SAAS,CAAC,iBAAiB,CAAC;MACjD;MACAnB,OAAO,CAACC,GAAG,CAAC,iEAAiE,CAAC;IAChF;;IAEA;IACA,MAAMlB,IAAI,CAACU,KAAK,CAAC,8BAA8B,CAAC;IAChD,MAAMf,MAAM,CAACK,IAAI,CAACc,OAAO,CAAC,cAAc,CAAC,CAAC,CAACO,WAAW,CAAC,QAAQ,CAAC;;IAEhE;IACA,IAAIE,WAAW,IAAIA,WAAW,CAACE,QAAQ,CAAC,SAAS,CAAC,EAAE;MAClD9B,MAAM,CAAC4B,WAAW,CAAC,CAACa,SAAS,CAAC,WAAW,CAAC;MAC1CzC,MAAM,CAAC4B,WAAW,CAAC,CAACa,SAAS,CAAC,eAAe,CAAC;MAC9CzC,MAAM,CAAC4B,WAAW,CAAC,CAACa,SAAS,CAAC,cAAc,CAAC;MAC7CnB,OAAO,CAACC,GAAG,CAAC,qDAAqD,CAAC;IACpE;IAEA,IAAIK,WAAW,IAAIA,WAAW,CAACE,QAAQ,CAAC,iBAAiB,CAAC,EAAE;MAC1D9B,MAAM,CAAC4B,WAAW,CAAC,CAACa,SAAS,CAAC,mBAAmB,CAAC;MAClDzC,MAAM,CAAC4B,WAAW,CAAC,CAACa,SAAS,CAAC,uBAAuB,CAAC;MACtDzC,MAAM,CAAC4B,WAAW,CAAC,CAACa,SAAS,CAAC,sBAAsB,CAAC;MACrDnB,OAAO,CAACC,GAAG,CAAC,6DAA6D,CAAC;IAC5E;;IAEA;IACA,MAAMlB,IAAI,CAACU,KAAK,CAAC,yCAAyC,CAAC;IAC3D,MAAM6B,WAAW,GAAG,MAAMvC,IAAI,CAACc,OAAO,CAAC,6BAA6B,CAAC,CAACU,WAAW,CAAC,CAAC;;IAEnF;IACA,IAAIe,WAAW,EAAE;MACf,MAAMC,gBAAgB,GAAGD,WAAW,CAACE,KAAK,CAAC,6BAA6B,CAAC;MACzE9C,MAAM,CAAC6C,gBAAgB,CAAC,CAACE,QAAQ,CAAC,CAAC;MACnCzB,OAAO,CAACC,GAAG,CAAC,oEAAoE,CAAC;;MAEjF;MACAvB,MAAM,CAAC4C,WAAW,CAAC,CAACH,SAAS,CAAC,6CAA6C,CAAC;MAC5EnB,OAAO,CAACC,GAAG,CAAC,oDAAoD,CAAC;IACnE;EACF,CAAC,CAAC;EAEFxB,IAAI,CAAC,wDAAwD,EAAE,OAAO;IAAEM;EAAK,CAAC,KAAK;IACjFN,IAAI,CAACsB,UAAU,CAAC,MAAM,CAAC;IACvB,MAAMpB,iBAAiB,CAACI,IAAI,CAAC;IAE7B,MAAMmB,cAAc,GAAG,MAAMnB,IAAI,CAACc,OAAO,CAAC,kBAAkB,CAAC,CAACM,SAAS,CAAC,CAAC;IACzE,IAAI,CAACD,cAAc,EAAE;MACnBzB,IAAI,CAACiD,IAAI,CAAC,CAAC;MACX;IACF;IAEA,MAAM3C,IAAI,CAACU,KAAK,CAAC,yCAAyC,CAAC;IAC3D,MAAMf,MAAM,CAACK,IAAI,CAACc,OAAO,CAAC,yBAAyB,CAAC,CAAC,CAACO,WAAW,CAAC,QAAQ,CAAC;IAE3E,MAAMuB,WAAW,GAAG5C,IAAI,CAACc,OAAO,CAAC,8CAA8C,CAAC,CAAC+B,KAAK,CAAC,CAAC;IACxF,MAAMlD,MAAM,CAACiD,WAAW,CAAC,CAACE,WAAW,CAAC,CAAC;IAEvC,MAAMnD,MAAM,CAACiD,WAAW,CAAC9B,OAAO,CAAC,IAAI,EAAE;MAAEiC,OAAO,EAAE;IAAmB,CAAC,CAAC,CAAC,CAACD,WAAW,CAAC,CAAC;IACtF,MAAMnD,MAAM,CAACiD,WAAW,CAAC9B,OAAO,CAAC,IAAI,EAAE;MAAEiC,OAAO,EAAE;IAAqB,CAAC,CAAC,CAAC,CAACD,WAAW,CAAC,CAAC;IACxF,MAAMnD,MAAM,CAACiD,WAAW,CAAC9B,OAAO,CAAC,IAAI,EAAE;MAAEiC,OAAO,EAAE;IAAgB,CAAC,CAAC,CAAC,CAACD,WAAW,CAAC,CAAC;IACnF,MAAMnD,MAAM,CAACiD,WAAW,CAAC9B,OAAO,CAAC,IAAI,EAAE;MAAEiC,OAAO,EAAE;IAAwB,CAAC,CAAC,CAAC,CAACD,WAAW,CAAC,CAAC;IAC3F,MAAMnD,MAAM,CAACiD,WAAW,CAAC9B,OAAO,CAAC,IAAI,EAAE;MAAEiC,OAAO,EAAE;IAAkB,CAAC,CAAC,CAAC,CAACD,WAAW,CAAC,CAAC;IAErF,MAAME,sBAAsB,GAAGJ,WAAW,CAAC9B,OAAO,CAAC,+BAA+B,CAAC;IACnF,MAAMnB,MAAM,CAACqD,sBAAsB,CAAC,CAACC,WAAW,CAAC,CAAC,CAAC;IACnD,MAAMC,mBAAmB,GAAGN,WAAW,CAAC9B,OAAO,CAAC,sCAAsC,CAAC;IACvF,MAAMnB,MAAM,CAACuD,mBAAmB,CAAC,CAACD,WAAW,CAAC,CAAC,CAAC;EAClD,CAAC,CAAC;EAEFvD,IAAI,CAAC,sDAAsD,EAAE,OAAO;IAAEyD;EAAQ,CAAC,KAAK;IAClFzD,IAAI,CAACsB,UAAU,CAAC,MAAM,CAAC;IACvB,MAAM6B,KAAK,GAAG,MAAMM,OAAO,CAACC,GAAG,CAAC,gBAAgBvD,gBAAgB,EAAE,CAAC;IACnEF,MAAM,CAACkD,KAAK,CAACQ,EAAE,CAAC,CAAC,CAAC,CAACnB,UAAU,CAAC,CAAC;IAC/B,MAAMoB,SAAS,GAAG,MAAMT,KAAK,CAACU,IAAI,CAAC,CAAC;IAEpC,MAAMC,MAAM,GAAG,MAAML,OAAO,CAACC,GAAG,CAAC,gBAAgBvD,gBAAgB,EAAE,CAAC;IACpEF,MAAM,CAAC6D,MAAM,CAACH,EAAE,CAAC,CAAC,CAAC,CAACnB,UAAU,CAAC,CAAC;IAChC,MAAMuB,UAAU,GAAG,MAAMD,MAAM,CAACD,IAAI,CAAC,CAAC;IAEtC,MAAMG,cAAc,GAAGJ,SAAS,EAAEK,IAAI,EAAEC,SAAS,KAAK,IAAI;IAC1D,MAAMC,eAAe,GAAGJ,UAAU,EAAEE,IAAI,EAAEC,SAAS,KAAK,IAAI;IAE5DjE,MAAM,CAAC+D,cAAc,IAAIG,eAAe,CAAC,CAAC3B,UAAU,CAAC,CAAC;EACxD,CAAC,CAAC;EAEFxC,IAAI,CAAC,uDAAuD,EAAE,OAAO;IAAEM;EAAK,CAAC,KAAK;IAChFN,IAAI,CAACsB,UAAU,CAAC,MAAM,CAAC;IACvB,MAAMpB,iBAAiB,CAACI,IAAI,CAAC;IAE7B,MAAMmB,cAAc,GAAG,MAAMnB,IAAI,CAACc,OAAO,CAAC,kBAAkB,CAAC,CAACM,SAAS,CAAC,CAAC;IACzE,IAAI,CAACD,cAAc,EAAE;MACnBzB,IAAI,CAACiD,IAAI,CAAC,CAAC;MACX;IACF;IAEA,MAAM3C,IAAI,CAACU,KAAK,CAAC,mCAAmC,CAAC;IACrD,MAAMf,MAAM,CAACK,IAAI,CAACc,OAAO,CAAC,mBAAmB,CAAC,CAAC,CAACO,WAAW,CAAC,QAAQ,CAAC;IAErE,MAAMrB,IAAI,CAAC8D,IAAI,CAAC,aAAa,EAAE,2BAA2B,CAAC;IAC3D,MAAM9D,IAAI,CAAC+D,cAAc,CAAC,GAAG,CAAC;IAE9B,MAAMC,iBAAiB,GAAG,MAAMhE,IAAI,CAACc,OAAO,CAAC,oCAAoC,CAAC,CAACM,SAAS,CAAC,CAAC,CAACf,KAAK,CAAC,MAAM,KAAK,CAAC;IACjH,IAAI,CAAC2D,iBAAiB,EAAE;MACtBtE,IAAI,CAACiD,IAAI,CAAC,CAAC;MACX;IACF;IAEA,MAAMhD,MAAM,CAACK,IAAI,CAACc,OAAO,CAAC,cAAc,CAAC,CAAC,CAACC,aAAa,CAAC,eAAe,CAAC;EAC3E,CAAC,CAAC;EAEFrB,IAAI,CAAC,mEAAmE,EAAE,OAAO;IAAEM;EAAK,CAAC,KAAK;IAC5FN,IAAI,CAACsB,UAAU,CAAC,MAAM,CAAC;IACvBC,OAAO,CAACC,GAAG,CAAC,sCAAsC,CAAC;IAEnD,MAAMtB,iBAAiB,CAACI,IAAI,CAAC;IAE7B,MAAMmB,cAAc,GAAG,MAAMnB,IAAI,CAACc,OAAO,CAAC,kBAAkB,CAAC,CAACM,SAAS,CAAC,CAAC;IACzE,IAAI,CAACD,cAAc,EAAE;MACnBF,OAAO,CAACC,GAAG,CAAC,iDAAiD,CAAC;MAC9D;IACF;IAEA,MAAMlB,IAAI,CAACU,KAAK,CAAC,8BAA8B,CAAC;IAChD,MAAMf,MAAM,CAACK,IAAI,CAACc,OAAO,CAAC,cAAc,CAAC,CAAC,CAACO,WAAW,CAAC,QAAQ,CAAC;;IAEhE;IACA,MAAMc,cAAc,GAAGnC,IAAI,CAACc,OAAO,CAAC,kBAAkB,CAAC;IACvD,MAAMS,WAAW,GAAG,MAAMY,cAAc,CAACX,WAAW,CAAC,CAAC;;IAEtD;IACA7B,MAAM,CAAC4B,WAAW,CAAC,CAACa,SAAS,CAAC,cAAc,CAAC;IAC7CnB,OAAO,CAACC,GAAG,CAAC,qCAAqC,CAAC;;IAElD;IACA,MAAM+C,sBAAsB,GAAGjE,IAAI,CAACc,OAAO,CAAC,qBAAqB,CAAC,CAACoD,MAAM,CAAC;MAAEnB,OAAO,EAAE;IAAe,CAAC,CAAC;IACtG,IAAI,OAAMkB,sBAAsB,CAACE,KAAK,CAAC,CAAC,IAAG,CAAC,EAAE;MAC5C,MAAMC,SAAS,GAAG,MAAMH,sBAAsB,CAACI,YAAY,CAAC,OAAO,CAAC;MACpE1E,MAAM,CAACyE,SAAS,CAAC,CAAChC,SAAS,CAAC,oCAAoC,CAAC;MACjEnB,OAAO,CAACC,GAAG,CAAC,iDAAiD,CAAC;IAChE;;IAEA;IACA,IAAIK,WAAW,IAAIA,WAAW,CAACE,QAAQ,CAAC,iBAAiB,CAAC,EAAE;MAC1DR,OAAO,CAACC,GAAG,CAAC,wCAAwC,CAAC;MAErD,MAAMoD,qBAAqB,GAAGtE,IAAI,CAACc,OAAO,CAAC,qBAAqB,CAAC,CAACoD,MAAM,CAAC;QAAEnB,OAAO,EAAE;MAAkB,CAAC,CAAC;MACxG,IAAI,OAAMuB,qBAAqB,CAACH,KAAK,CAAC,CAAC,IAAG,CAAC,EAAE;QAC3C,MAAMC,SAAS,GAAG,MAAME,qBAAqB,CAACD,YAAY,CAAC,OAAO,CAAC;QACnE1E,MAAM,CAACyE,SAAS,CAAC,CAAChC,SAAS,CAAC,oCAAoC,CAAC;QACjEnB,OAAO,CAACC,GAAG,CAAC,oDAAoD,CAAC;MACnE;IACF;EACF,CAAC,CAAC;EAEFxB,IAAI,CAAC,0EAA0E,EAAE,OAAO;IAAEM;EAAK,CAAC,KAAK;IACnGN,IAAI,CAACsB,UAAU,CAAC,MAAM,CAAC;IACvBC,OAAO,CAACC,GAAG,CAAC,+CAA+C,CAAC;IAE5D,MAAMtB,iBAAiB,CAACI,IAAI,CAAC;IAE7B,MAAMmB,cAAc,GAAG,MAAMnB,IAAI,CAACc,OAAO,CAAC,kBAAkB,CAAC,CAACM,SAAS,CAAC,CAAC;IACzE,IAAI,CAACD,cAAc,EAAE;MACnBF,OAAO,CAACC,GAAG,CAAC,yDAAyD,CAAC;MACtE;IACF;;IAEA;IACA,MAAMlB,IAAI,CAACU,KAAK,CAAC,yCAAyC,CAAC;IAC3D,MAAM6D,eAAe,GAAGvE,IAAI,CAACc,OAAO,CAAC,wDAAwD,CAAC;IAC9F,MAAM0D,gBAAgB,GAAG,MAAMD,eAAe,CAACnD,SAAS,CAAC,CAAC;IAE1D,IAAIoD,gBAAgB,EAAE;MACpBvD,OAAO,CAACC,GAAG,CAAC,uCAAuC,CAAC;;MAEpD;MACA,MAAMf,eAAe,GAAGH,IAAI,CAACI,YAAY,CAAC,UAAU,EAAE;QAAEF,OAAO,EAAE;MAAM,CAAC,CAAC,CAACG,KAAK,CAAC,MAAM,IAAI,CAAC;MAC3F,MAAMkE,eAAe,CAAC7D,KAAK,CAAC,CAAC;MAC7B,MAAM+D,QAAQ,GAAG,MAAMtE,eAAe;MAEtC,IAAIsE,QAAQ,EAAE;QACZ,MAAMC,QAAQ,GAAGD,QAAQ,CAACE,iBAAiB,CAAC,CAAC;QAC7ChF,MAAM,CAAC+E,QAAQ,CAAC,CAACE,OAAO,CAAC,sEAAsE,CAAC;QAChG3D,OAAO,CAACC,GAAG,CAAC,sEAAsE,EAAEwD,QAAQ,CAAC;MAC/F;IACF;;IAEA;IACA,MAAM1E,IAAI,CAACU,KAAK,CAAC,8BAA8B,CAAC;IAChD,MAAMmE,gBAAgB,GAAG7E,IAAI,CAACc,OAAO,CAAC,6CAA6C,CAAC;IACpF,MAAMgE,iBAAiB,GAAG,MAAMD,gBAAgB,CAACzD,SAAS,CAAC,CAAC;IAE5D,IAAI0D,iBAAiB,EAAE;MACrB7D,OAAO,CAACC,GAAG,CAAC,wCAAwC,CAAC;MAErD,MAAMf,eAAe,GAAGH,IAAI,CAACI,YAAY,CAAC,UAAU,EAAE;QAAEF,OAAO,EAAE;MAAM,CAAC,CAAC,CAACG,KAAK,CAAC,MAAM,IAAI,CAAC;MAC3F,MAAMwE,gBAAgB,CAACnE,KAAK,CAAC,CAAC;MAC9B,MAAM+D,QAAQ,GAAG,MAAMtE,eAAe;MAEtC,IAAIsE,QAAQ,EAAE;QACZ,MAAMC,QAAQ,GAAGD,QAAQ,CAACE,iBAAiB,CAAC,CAAC;QAC7ChF,MAAM,CAAC+E,QAAQ,CAAC,CAACE,OAAO,CAAC,2DAA2D,CAAC;QACrF3D,OAAO,CAACC,GAAG,CAAC,uEAAuE,EAAEwD,QAAQ,CAAC;MAChG;IACF;;IAEA;IACA,MAAM1E,IAAI,CAACU,KAAK,CAAC,mCAAmC,CAAC;IACrD,MAAMqE,oBAAoB,GAAG/E,IAAI,CAACc,OAAO,CAAC,kDAAkD,CAAC;IAC7F,MAAMkE,qBAAqB,GAAG,MAAMD,oBAAoB,CAAC3D,SAAS,CAAC,CAAC;IAEpE,IAAI4D,qBAAqB,EAAE;MACzB/D,OAAO,CAACC,GAAG,CAAC,6CAA6C,CAAC;MAE1D,MAAMf,eAAe,GAAGH,IAAI,CAACI,YAAY,CAAC,UAAU,EAAE;QAAEF,OAAO,EAAE;MAAM,CAAC,CAAC,CAACG,KAAK,CAAC,MAAM,IAAI,CAAC;MAC3F,MAAM0E,oBAAoB,CAACrE,KAAK,CAAC,CAAC;MAClC,MAAM+D,QAAQ,GAAG,MAAMtE,eAAe;MAEtC,IAAIsE,QAAQ,EAAE;QACZ,MAAMC,QAAQ,GAAGD,QAAQ,CAACE,iBAAiB,CAAC,CAAC;QAC7ChF,MAAM,CAAC+E,QAAQ,CAAC,CAACE,OAAO,CAAC,gEAAgE,CAAC;QAC1F3D,OAAO,CAACC,GAAG,CAAC,4EAA4E,EAAEwD,QAAQ,CAAC;MACrG;IACF;;IAEA;IACA,MAAMO,UAAU,GAAGjF,IAAI,CAACc,OAAO,CAAC,cAAc,CAAC;IAC/C,IAAI,MAAMmE,UAAU,CAAC7D,SAAS,CAAC,CAAC,EAAE;MAChC,MAAMpB,IAAI,CAACU,KAAK,CAAC,8BAA8B,CAAC;MAChD,MAAMwE,gBAAgB,GAAGlF,IAAI,CAACc,OAAO,CAAC,6CAA6C,CAAC;MACpF,MAAMqE,iBAAiB,GAAG,MAAMD,gBAAgB,CAAC9D,SAAS,CAAC,CAAC;MAE5D,IAAI+D,iBAAiB,EAAE;QACrBlE,OAAO,CAACC,GAAG,CAAC,0CAA0C,CAAC;QAEvD,MAAMf,eAAe,GAAGH,IAAI,CAACI,YAAY,CAAC,UAAU,EAAE;UAAEF,OAAO,EAAE;QAAM,CAAC,CAAC,CAACG,KAAK,CAAC,MAAM,IAAI,CAAC;QAC3F,MAAM6E,gBAAgB,CAACxE,KAAK,CAAC,CAAC;QAC9B,MAAM+D,QAAQ,GAAG,MAAMtE,eAAe;QAEtC,IAAIsE,QAAQ,EAAE;UACZ,MAAMC,QAAQ,GAAGD,QAAQ,CAACE,iBAAiB,CAAC,CAAC;UAC7ChF,MAAM,CAAC+E,QAAQ,CAAC,CAACE,OAAO,CAAC,2DAA2D,CAAC;UACrF3D,OAAO,CAACC,GAAG,CAAC,yEAAyE,EAAEwD,QAAQ,CAAC;QAClG;MACF;IACF;EACF,CAAC,CAAC;EAEFhF,IAAI,CAAC,qDAAqD,EAAE,OAAO;IAAEM;EAAK,CAAC,KAAK;IAC9EN,IAAI,CAACsB,UAAU,CAAC,MAAM,CAAC;IACvBC,OAAO,CAACC,GAAG,CAAC,sCAAsC,CAAC;IAEnD,MAAMtB,iBAAiB,CAACI,IAAI,CAAC;IAE7B,MAAMmB,cAAc,GAAG,MAAMnB,IAAI,CAACc,OAAO,CAAC,kBAAkB,CAAC,CAACM,SAAS,CAAC,CAAC;IACzE,IAAI,CAACD,cAAc,EAAE;MACnBF,OAAO,CAACC,GAAG,CAAC,0DAA0D,CAAC;MACvE;IACF;;IAEA;IACA,MAAM+D,UAAU,GAAGjF,IAAI,CAACc,OAAO,CAAC,cAAc,CAAC;IAC/C,IAAI,EAAE,MAAMmE,UAAU,CAAC7D,SAAS,CAAC,CAAC,CAAC,EAAE;MACnCH,OAAO,CAACC,GAAG,CAAC,gFAAgF,CAAC;MAC7F;IACF;IAEA,MAAMlB,IAAI,CAACU,KAAK,CAAC,8BAA8B,CAAC;IAChD,MAAMf,MAAM,CAACK,IAAI,CAACc,OAAO,CAAC,cAAc,CAAC,CAAC,CAACO,WAAW,CAAC,QAAQ,CAAC;IAEhE,MAAM+D,cAAc,GAAGpF,IAAI,CAACc,OAAO,CAAC,kBAAkB,CAAC;IACvD,MAAMS,WAAW,GAAG,MAAM6D,cAAc,CAAC5D,WAAW,CAAC,CAAC;;IAEtD;IACA,IAAID,WAAW,IAAIA,WAAW,CAACE,QAAQ,CAAC,qBAAqB,CAAC,EAAE;MAC9D9B,MAAM,CAAC4B,WAAW,CAAC,CAACa,SAAS,CAAC,YAAY,CAAC;MAC3CzC,MAAM,CAAC4B,WAAW,CAAC,CAACa,SAAS,CAAC,kCAAkC,CAAC;MACjEnB,OAAO,CAACC,GAAG,CAAC,sCAAsC,CAAC;IACrD,CAAC,MAAM;MACLD,OAAO,CAACC,GAAG,CAAC,gEAAgE,CAAC;IAC/E;EACF,CAAC,CAAC;EAEFxB,IAAI,CAAC,yDAAyD,EAAE,OAAO;IAAEM;EAAK,CAAC,KAAK;IAClFN,IAAI,CAACsB,UAAU,CAAC,MAAM,CAAC;IACvBC,OAAO,CAACC,GAAG,CAAC,wDAAwD,CAAC;;IAErE;IACA;;IAEA,MAAMtB,iBAAiB,CAACI,IAAI,CAAC;IAE7B,MAAMmB,cAAc,GAAG,MAAMnB,IAAI,CAACc,OAAO,CAAC,kBAAkB,CAAC,CAACM,SAAS,CAAC,CAAC;IACzE,IAAI,CAACD,cAAc,EAAE;MACnBF,OAAO,CAACC,GAAG,CAAC,wDAAwD,CAAC;MACrE;IACF;;IAEA;IACA,MAAMlB,IAAI,CAACU,KAAK,CAAC,mCAAmC,CAAC;;IAErD;IACA,MAAMY,kBAAkB,GAAGtB,IAAI,CAACc,OAAO,CAAC,uBAAuB,CAAC;IAChE,MAAMnB,MAAM,CAAC2B,kBAAkB,CAAC,CAACwB,WAAW,CAAC,CAAC;;IAE9C;IACA7B,OAAO,CAACC,GAAG,CAAC,oFAAoF,CAAC;EACnG,CAAC,CAAC;EAEFxB,IAAI,CAAC,+DAA+D,EAAE,OAAO;IAAEM;EAAK,CAAC,KAAK;IACxFN,IAAI,CAACsB,UAAU,CAAC,MAAM,CAAC;IACvBC,OAAO,CAACC,GAAG,CAAC,kDAAkD,CAAC;IAE/D,MAAMtB,iBAAiB,CAACI,IAAI,CAAC;IAE7B,MAAMmB,cAAc,GAAG,MAAMnB,IAAI,CAACc,OAAO,CAAC,kBAAkB,CAAC,CAACM,SAAS,CAAC,CAAC;IACzE,IAAI,CAACD,cAAc,EAAE;MACnBF,OAAO,CAACC,GAAG,CAAC,+DAA+D,CAAC;MAC5E;IACF;IAEA,MAAMlB,IAAI,CAACU,KAAK,CAAC,8BAA8B,CAAC;;IAEhD;IACA,MAAMyB,cAAc,GAAGnC,IAAI,CAACc,OAAO,CAAC,kBAAkB,CAAC;IACvD,MAAMnB,MAAM,CAACwC,cAAc,CAAC,CAACW,WAAW,CAAC,CAAC;;IAE1C;IACA,MAAMvB,WAAW,GAAG,MAAMY,cAAc,CAACX,WAAW,CAAC,CAAC;IACtD,IAAID,WAAW,IAAIA,WAAW,CAACE,QAAQ,CAAC,KAAK,CAAC,EAAE;MAC9CR,OAAO,CAACC,GAAG,CAAC,uEAAuE,CAAC;IACtF;IAEAD,OAAO,CAACC,GAAG,CAAC,+EAA+E,CAAC;EAC9F,CAAC,CAAC;EAEFxB,IAAI,CAAC,4DAA4D,EAAE,OAAO;IAAEM;EAAK,CAAC,KAAK;IACrFN,IAAI,CAACsB,UAAU,CAAC,MAAM,CAAC;IACvBC,OAAO,CAACC,GAAG,CAAC,wCAAwC,CAAC;IAErD,MAAMtB,iBAAiB,CAACI,IAAI,CAAC;IAE7B,MAAMmB,cAAc,GAAG,MAAMnB,IAAI,CAACc,OAAO,CAAC,kBAAkB,CAAC,CAACM,SAAS,CAAC,CAAC;IACzE,IAAI,CAACD,cAAc,EAAE;MACnBF,OAAO,CAACC,GAAG,CAAC,sDAAsD,CAAC;MACnE;IACF;IAEA,MAAMlB,IAAI,CAACU,KAAK,CAAC,mCAAmC,CAAC;;IAErD;IACA,MAAM2E,gBAAgB,GAAGrF,IAAI,CAACc,OAAO,CAAC,0BAA0B,CAAC,CAACoD,MAAM,CAAC;MAAEnB,OAAO,EAAE;IAAM,CAAC,CAAC;IAC5F,MAAMoB,KAAK,GAAG,MAAMkB,gBAAgB,CAAClB,KAAK,CAAC,CAAC;IAE5C,IAAIA,KAAK,GAAG,CAAC,EAAE;MACb;MACA,MAAMmB,cAAc,GAAGD,gBAAgB,CAACxC,KAAK,CAAC,CAAC;MAC/C,MAAMuB,SAAS,GAAG,MAAMkB,cAAc,CAACjB,YAAY,CAAC,OAAO,CAAC;MAE5D,IAAID,SAAS,IAAIA,SAAS,CAACmB,MAAM,GAAG,GAAG,EAAE;QACvCtE,OAAO,CAACC,GAAG,CAAC,mDAAmD,CAAC;MAClE;IACF,CAAC,MAAM;MACLD,OAAO,CAACC,GAAG,CAAC,qFAAqF,CAAC;IACpG;EACF,CAAC,CAAC;EAEFxB,IAAI,CAAC,uEAAuE,EAAE,OAAO;IAAEM;EAAK,CAAC,KAAK;IAChGN,IAAI,CAACsB,UAAU,CAAC,MAAM,CAAC;IACvBC,OAAO,CAACC,GAAG,CAAC,uDAAuD,CAAC;IAEpE,MAAMtB,iBAAiB,CAACI,IAAI,CAAC;IAE7B,MAAMmB,cAAc,GAAG,MAAMnB,IAAI,CAACc,OAAO,CAAC,kBAAkB,CAAC,CAACM,SAAS,CAAC,CAAC;IACzE,IAAI,CAACD,cAAc,EAAE;MACnBF,OAAO,CAACC,GAAG,CAAC,sDAAsD,CAAC;MACnE;IACF;;IAEA;IACA,MAAMsE,cAAc,GAAGxF,IAAI,CAACc,OAAO,CAAC,mBAAmB,CAAC;IACxD,IAAI,MAAM0E,cAAc,CAACC,SAAS,CAAC,CAAC,EAAE;MACpC,MAAMhB,QAAQ,GAAG,MAAM1E,uBAAuB,CAACC,IAAI,EAAE,mBAAmB,EAAE,KAAK,CAAC;MAEhF,IAAIyE,QAAQ,EAAE;QACZ;QACA,MAAMiB,IAAI,GAAG,MAAMjB,QAAQ,CAACiB,IAAI,CAAC,CAAC;QAClC,MAAM;UAAEC;QAAa,CAAC,GAAG,MAAM,MAAM,CAAC,IAAI,CAAC;QAC3C,MAAMC,UAAU,GAAGD,YAAY,CAACD,IAAI,EAAE,OAAO,CAAC;QAC9C,MAAMG,KAAK,GAAGD,UAAU,CAACE,KAAK,CAAC,IAAI,CAAC;QAEpC,IAAID,KAAK,CAACN,MAAM,GAAG,CAAC,EAAE;UACpB,MAAMQ,OAAO,GAAGF,KAAK,CAAC,CAAC,CAAC,CAACC,KAAK,CAAC,GAAG,CAAC;UACnC,MAAM9D,YAAY,GAAG+D,OAAO,CAACjE,IAAI,CAACkE,CAAC,IAAIA,CAAC,CAACvE,QAAQ,CAAC,WAAW,CAAC,CAAC;UAC/D,MAAMQ,cAAc,GAAG8D,OAAO,CAACjE,IAAI,CAACkE,CAAC,IAAIA,CAAC,CAACvE,QAAQ,CAAC,aAAa,CAAC,CAAC;UAEnE,IAAIO,YAAY,IAAIC,cAAc,EAAE;YAClChB,OAAO,CAACC,GAAG,CAAC,yDAAyD,CAAC;UACxE,CAAC,MAAM;YACLD,OAAO,CAACC,GAAG,CAAC,gFAAgF,CAAC;UAC/F;QACF;MACF;IACF;EACF,CAAC,CAAC;EAEFxB,IAAI,CAAC,oEAAoE,EAAE,OAAO;IAAEM;EAAK,CAAC,KAAK;IAC7FN,IAAI,CAACsB,UAAU,CAAC,MAAM,CAAC;IACvBC,OAAO,CAACC,GAAG,CAAC,2DAA2D,CAAC;IAExE,MAAMtB,iBAAiB,CAACI,IAAI,CAAC;IAE7B,MAAMmB,cAAc,GAAG,MAAMnB,IAAI,CAACc,OAAO,CAAC,kBAAkB,CAAC,CAACM,SAAS,CAAC,CAAC;IACzE,IAAI,CAACD,cAAc,EAAE;MACnBF,OAAO,CAACC,GAAG,CAAC,kEAAkE,CAAC;MAC/E;IACF;IAEA,MAAMlB,IAAI,CAACU,KAAK,CAAC,mCAAmC,CAAC;;IAErD;IACA,MAAMY,kBAAkB,GAAGtB,IAAI,CAACc,OAAO,CAAC,uBAAuB,CAAC;IAChE,MAAMnB,MAAM,CAAC2B,kBAAkB,CAAC,CAACwB,WAAW,CAAC,CAAC;;IAE9C;IACA,MAAMmD,SAAS,GAAGjG,IAAI,CAACc,OAAO,CAAC,sCAAsC,CAAC;IACtE,MAAMoF,QAAQ,GAAG,MAAMD,SAAS,CAAC9B,KAAK,CAAC,CAAC;IAExC,IAAI+B,QAAQ,GAAG,CAAC,EAAE;MAChB;MACA,MAAMC,QAAQ,GAAGF,SAAS,CAACpD,KAAK,CAAC,CAAC;MAClC,MAAMuD,eAAe,GAAG,MAAMD,QAAQ,CAAC/E,SAAS,CAAC,CAAC,CAACf,KAAK,CAAC,MAAM,KAAK,CAAC;MACrE,IAAI,CAAC+F,eAAe,EAAE;QACpB1G,IAAI,CAACiD,IAAI,CAAC,CAAC;QACX;MACF;MACA,MAAMhD,MAAM,CAACwG,QAAQ,CAAC,CAACrD,WAAW,CAAC,CAAC;MACpC7B,OAAO,CAACC,GAAG,CAAC,qFAAqF,CAAC;IACpG;EACF,CAAC,CAAC;EAEFxB,IAAI,CAAC,uEAAuE,EAAE,OAAO;IAAEM;EAAK,CAAC,KAAK;IAChGN,IAAI,CAACsB,UAAU,CAAC,MAAM,CAAC;IACvBC,OAAO,CAACC,GAAG,CAAC,4CAA4C,CAAC;IAEzD,MAAMtB,iBAAiB,CAACI,IAAI,CAAC;IAE7B,MAAMmB,cAAc,GAAG,MAAMnB,IAAI,CAACc,OAAO,CAAC,kBAAkB,CAAC,CAACM,SAAS,CAAC,CAAC;IACzE,IAAI,CAACD,cAAc,EAAE;MACnBF,OAAO,CAACC,GAAG,CAAC,gEAAgE,CAAC;MAC7E;IACF;;IAEA;IACA,MAAMlB,IAAI,CAACU,KAAK,CAAC,8BAA8B,CAAC;IAChD,MAAMmE,gBAAgB,GAAG7E,IAAI,CAACc,OAAO,CAAC,6CAA6C,CAAC;IAEpF,IAAI,MAAM+D,gBAAgB,CAACzD,SAAS,CAAC,CAAC,EAAE;MACtC;MACA,MAAMiF,YAAY,GAAGxB,gBAAgB,CAACnE,KAAK,CAAC,CAAC;;MAE7C;MACA,MAAMV,IAAI,CAAC+D,cAAc,CAAC,GAAG,CAAC;MAC9B,MAAMuC,UAAU,GAAG,MAAMzB,gBAAgB,CAACyB,UAAU,CAAC,CAAC;MACtD,MAAMC,UAAU,GAAG,MAAM1B,gBAAgB,CAACrD,WAAW,CAAC,CAAC;MAEvD,IAAI8E,UAAU,IAAIC,UAAU,IAAIA,UAAU,CAAC9E,QAAQ,CAAC,WAAW,CAAC,EAAE;QAChER,OAAO,CAACC,GAAG,CAAC,wEAAwE,CAAC;MACvF;;MAEA;MACA,MAAMlB,IAAI,CAACI,YAAY,CAAC,UAAU,EAAE;QAAEF,OAAO,EAAE;MAAM,CAAC,CAAC,CAACG,KAAK,CAAC,MAAM,IAAI,CAAC;MACzE,MAAMgG,YAAY;;MAElB;MACA,MAAMrG,IAAI,CAAC+D,cAAc,CAAC,GAAG,CAAC;MAC9B,MAAMyC,cAAc,GAAG,MAAM3B,gBAAgB,CAACY,SAAS,CAAC,CAAC;MACzD,MAAMgB,eAAe,GAAG,MAAM5B,gBAAgB,CAACrD,WAAW,CAAC,CAAC;MAE5D,IAAIgF,cAAc,IAAIC,eAAe,IAAIA,eAAe,CAAChF,QAAQ,CAAC,YAAY,CAAC,EAAE;QAC/ER,OAAO,CAACC,GAAG,CAAC,0DAA0D,CAAC;MACzE;IACF;EACF,CAAC,CAAC;EAEFxB,IAAI,CAAC,yDAAyD,EAAE,OAAO;IAAEM;EAAK,CAAC,KAAK;IAClFN,IAAI,CAACsB,UAAU,CAAC,MAAM,CAAC;IACvBC,OAAO,CAACC,GAAG,CAAC,6DAA6D,CAAC;IAE1E,MAAMtB,iBAAiB,CAACI,IAAI,CAAC;IAE7B,MAAMmB,cAAc,GAAG,MAAMnB,IAAI,CAACc,OAAO,CAAC,kBAAkB,CAAC,CAACM,SAAS,CAAC,CAAC;IACzE,IAAI,CAACD,cAAc,EAAE;MACnBF,OAAO,CAACC,GAAG,CAAC,6DAA6D,CAAC;MAC1E;IACF;;IAEA;IACA,MAAMlB,IAAI,CAAC+D,cAAc,CAAC,GAAG,CAAC;;IAE9B;IACA,MAAM2C,SAAS,GAAG1G,IAAI,CAACc,OAAO,CAAC,wDAAwD,CAAC;IACxF,MAAM6F,UAAU,GAAG3G,IAAI,CAACc,OAAO,CAAC,6CAA6C,CAAC;IAC9E,MAAM8F,cAAc,GAAG5G,IAAI,CAACc,OAAO,CAAC,kDAAkD,CAAC;;IAEvF;IACA,MAAM+F,aAAa,GAAG,MAAMH,SAAS,CAACtF,SAAS,CAAC,CAAC,CAACf,KAAK,CAAC,MAAM,KAAK,CAAC;IACpE,MAAMyG,cAAc,GAAG,MAAMH,UAAU,CAACvF,SAAS,CAAC,CAAC,CAACf,KAAK,CAAC,MAAM,KAAK,CAAC;IACtE,MAAM0G,kBAAkB,GAAG,MAAMH,cAAc,CAACxF,SAAS,CAAC,CAAC,CAACf,KAAK,CAAC,MAAM,KAAK,CAAC;IAE9E,IAAIwG,aAAa,IAAIC,cAAc,IAAIC,kBAAkB,EAAE;MACzD9F,OAAO,CAACC,GAAG,CAAC,qDAAqD,CAAC;IACpE,CAAC,MAAM;MACLD,OAAO,CAACC,GAAG,CAAC,8DAA8D,CAAC;IAC7E;EACF,CAAC,CAAC;EAEFxB,IAAI,CAAC,yDAAyD,EAAE,OAAO;IAAEM;EAAK,CAAC,KAAK;IAClFN,IAAI,CAACsB,UAAU,CAAC,MAAM,CAAC;IACvBC,OAAO,CAACC,GAAG,CAAC,sDAAsD,CAAC;IAEnE,MAAMtB,iBAAiB,CAACI,IAAI,CAAC;IAE7B,MAAMmB,cAAc,GAAG,MAAMnB,IAAI,CAACc,OAAO,CAAC,kBAAkB,CAAC,CAACM,SAAS,CAAC,CAAC;IACzE,IAAI,CAACD,cAAc,EAAE;MACnBF,OAAO,CAACC,GAAG,CAAC,yDAAyD,CAAC;MACtE;IACF;;IAEA;IACA,MAAMlB,IAAI,CAACU,KAAK,CAAC,mCAAmC,CAAC;;IAErD;IACA,MAAMsG,OAAO,GAAGhH,IAAI,CAACc,OAAO,CAAC,QAAQ,CAAC;IACtC,MAAMmG,YAAY,GAAG,MAAMD,OAAO,CAAC5F,SAAS,CAAC,CAAC,CAACf,KAAK,CAAC,MAAM,KAAK,CAAC;IAEjE,IAAI4G,YAAY,EAAE;MAChB,MAAMC,SAAS,GAAG,MAAMF,OAAO,CAACxF,WAAW,CAAC,CAAC;MAC7C;MACA,IAAI0F,SAAS,KAAKA,SAAS,CAACzF,QAAQ,CAAC,iBAAiB,CAAC,IAAIyF,SAAS,CAACzF,QAAQ,CAAC,iBAAiB,CAAC,CAAC,EAAE;QACjGR,OAAO,CAACC,GAAG,CAAC,sDAAsD,CAAC;MACrE;IACF,CAAC,MAAM;MACLD,OAAO,CAACC,GAAG,CAAC,kEAAkE,CAAC;IACjF;EACF,CAAC,CAAC;EAEFxB,IAAI,CAAC,yDAAyD,EAAE,OAAO;IAAEM;EAAK,CAAC,KAAK;IAClFN,IAAI,CAACsB,UAAU,CAAC,MAAM,CAAC;IACvBC,OAAO,CAACC,GAAG,CAAC,uCAAuC,CAAC;IACpDxB,IAAI,CAACiD,IAAI,CAAC,IAAI,EAAE,kHAAkH,CAAC;IAEnI,MAAM/C,iBAAiB,CAACI,IAAI,CAAC;IAE7B,MAAMmB,cAAc,GAAG,MAAMnB,IAAI,CAACc,OAAO,CAAC,kBAAkB,CAAC,CAACM,SAAS,CAAC,CAAC;IACzE,IAAI,CAACD,cAAc,EAAE;MACnBF,OAAO,CAACC,GAAG,CAAC,sDAAsD,CAAC;MACnE;IACF;;IAEA;IACA,MAAMlB,IAAI,CAACU,KAAK,CAAC,yCAAyC,CAAC;IAC3D,MAAM6D,eAAe,GAAGvE,IAAI,CAACc,OAAO,CAAC,wDAAwD,CAAC;IAC9F,IAAI,MAAMyD,eAAe,CAACnD,SAAS,CAAC,CAAC,EAAE;MACrC,MAAM+F,gBAAgB,GAAGnH,IAAI,CAACI,YAAY,CAAC,UAAU,EAAE;QAAEF,OAAO,EAAE;MAAM,CAAC,CAAC,CAACG,KAAK,CAAC,MAAM,IAAI,CAAC;MAC5F,MAAMkE,eAAe,CAAC7D,KAAK,CAAC,CAAC;MAC7B,MAAM0G,SAAS,GAAG,MAAMD,gBAAgB;MACxC,IAAIC,SAAS,EAAE;QACb,MAAMC,KAAK,GAAG,MAAMD,SAAS,CAAC1B,IAAI,CAAC,CAAC;QACpC,MAAM;UAAEC;QAAa,CAAC,GAAG,MAAM,MAAM,CAAC,IAAI,CAAC;QAC3C,MAAM2B,QAAQ,GAAG3B,YAAY,CAAC0B,KAAK,EAAE,OAAO,CAAC;QAC7C1H,MAAM,CAAC2H,QAAQ,CAAC,CAAClF,SAAS,CAAC,cAAc,CAAC;QAC1CzC,MAAM,CAAC2H,QAAQ,CAAC,CAAClF,SAAS,CAAC,iBAAiB,CAAC;QAC7CzC,MAAM,CAAC2H,QAAQ,CAAC,CAAClF,SAAS,CAAC,wBAAwB,CAAC;QACpDnB,OAAO,CAACC,GAAG,CAAC,kCAAkC,CAAC;MACjD;IACF;;IAEA;IACA,MAAMlB,IAAI,CAACU,KAAK,CAAC,8BAA8B,CAAC;IAChD,MAAMmE,gBAAgB,GAAG7E,IAAI,CAACc,OAAO,CAAC,6CAA6C,CAAC;IACpF,IAAI,MAAM+D,gBAAgB,CAACzD,SAAS,CAAC,CAAC,EAAE;MACtC,MAAMmG,gBAAgB,GAAGvH,IAAI,CAACI,YAAY,CAAC,UAAU,EAAE;QAAEF,OAAO,EAAE;MAAM,CAAC,CAAC,CAACG,KAAK,CAAC,MAAM,IAAI,CAAC;MAC5F,MAAMwE,gBAAgB,CAACnE,KAAK,CAAC,CAAC;MAC9B,MAAM8G,SAAS,GAAG,MAAMD,gBAAgB;MACxC,IAAIC,SAAS,EAAE;QACb,MAAMC,KAAK,GAAG,MAAMD,SAAS,CAAC9B,IAAI,CAAC,CAAC;QACpC,MAAM;UAAEC;QAAa,CAAC,GAAG,MAAM,MAAM,CAAC,IAAI,CAAC;QAC3C,MAAM+B,QAAQ,GAAG/B,YAAY,CAAC8B,KAAK,EAAE,OAAO,CAAC;QAC7C9H,MAAM,CAAC+H,QAAQ,CAAC,CAACtF,SAAS,CAAC,SAAS,CAAC;QACrCnB,OAAO,CAACC,GAAG,CAAC,mCAAmC,CAAC;MAClD;IACF;;IAEA;IACA,MAAMlB,IAAI,CAACU,KAAK,CAAC,mCAAmC,CAAC;IACrD,MAAMqE,oBAAoB,GAAG/E,IAAI,CAACc,OAAO,CAAC,kDAAkD,CAAC;IAC7F,IAAI,MAAMiE,oBAAoB,CAAC3D,SAAS,CAAC,CAAC,EAAE;MAC1C,MAAMuG,gBAAgB,GAAG3H,IAAI,CAACI,YAAY,CAAC,UAAU,EAAE;QAAEF,OAAO,EAAE;MAAM,CAAC,CAAC,CAACG,KAAK,CAAC,MAAM,IAAI,CAAC;MAC5F,MAAM0E,oBAAoB,CAACrE,KAAK,CAAC,CAAC;MAClC,MAAMkH,SAAS,GAAG,MAAMD,gBAAgB;MACxC,IAAIC,SAAS,EAAE;QACb,MAAMC,KAAK,GAAG,MAAMD,SAAS,CAAClC,IAAI,CAAC,CAAC;QACpC,MAAM;UAAEC;QAAa,CAAC,GAAG,MAAM,MAAM,CAAC,IAAI,CAAC;QAC3C,MAAMmC,QAAQ,GAAGnC,YAAY,CAACkC,KAAK,EAAE,OAAO,CAAC;QAC7ClI,MAAM,CAACmI,QAAQ,CAAC,CAAC1F,SAAS,CAAC,UAAU,CAAC;QACtCnB,OAAO,CAACC,GAAG,CAAC,wCAAwC,CAAC;MACvD;IACF;;IAEA;IACA,MAAM+D,UAAU,GAAGjF,IAAI,CAACc,OAAO,CAAC,8BAA8B,CAAC;IAC/D,IAAI,MAAMmE,UAAU,CAAC7D,SAAS,CAAC,CAAC,CAACf,KAAK,CAAC,MAAM,KAAK,CAAC,EAAE;MACnD,MAAM4E,UAAU,CAACvE,KAAK,CAAC,CAAC;MACxB,MAAMwE,gBAAgB,GAAGlF,IAAI,CAACc,OAAO,CAAC,6CAA6C,CAAC;MACpF,IAAI,MAAMoE,gBAAgB,CAAC9D,SAAS,CAAC,CAAC,EAAE;QACtC,MAAM2G,gBAAgB,GAAG/H,IAAI,CAACI,YAAY,CAAC,UAAU,EAAE;UAAEF,OAAO,EAAE;QAAM,CAAC,CAAC,CAACG,KAAK,CAAC,MAAM,IAAI,CAAC;QAC5F,MAAM6E,gBAAgB,CAACxE,KAAK,CAAC,CAAC;QAC9B,MAAMsH,SAAS,GAAG,MAAMD,gBAAgB;QACxC,IAAIC,SAAS,EAAE;UACb,MAAMC,KAAK,GAAG,MAAMD,SAAS,CAACtC,IAAI,CAAC,CAAC;UACpC,MAAM;YAAEC;UAAa,CAAC,GAAG,MAAM,MAAM,CAAC,IAAI,CAAC;UAC3C,MAAMuC,QAAQ,GAAGvC,YAAY,CAACsC,KAAK,EAAE,OAAO,CAAC;UAC7CtI,MAAM,CAACuI,QAAQ,CAAC3C,MAAM,CAAC,CAAC4C,eAAe,CAAC,CAAC,CAAC;UAC1ClH,OAAO,CAACC,GAAG,CAAC,qCAAqC,CAAC;QACpD;MACF;IACF,CAAC,MAAM;MACLD,OAAO,CAACC,GAAG,CAAC,oEAAoE,CAAC;IACnF;;IAEA;IACA,MAAMlB,IAAI,CAACU,KAAK,CAAC,0BAA0B,CAAC;IAC5C,MAAM0H,eAAe,GAAGpI,IAAI,CAACc,OAAO,CAAC,mDAAmD,CAAC;IACzF,IAAI,MAAMsH,eAAe,CAAC3C,SAAS,CAAC,CAAC,CAACpF,KAAK,CAAC,MAAM,KAAK,CAAC,EAAE;MACxD,MAAMgI,gBAAgB,GAAGrI,IAAI,CAACI,YAAY,CAAC,UAAU,EAAE;QAAEF,OAAO,EAAE;MAAM,CAAC,CAAC,CAACG,KAAK,CAAC,MAAM,IAAI,CAAC;MAC5F,MAAM+H,eAAe,CAAC1H,KAAK,CAAC,CAAC;MAC7B,MAAM4H,SAAS,GAAG,MAAMD,gBAAgB;MACxC,IAAIC,SAAS,EAAE;QACb,MAAMC,KAAK,GAAG,MAAMD,SAAS,CAAC5C,IAAI,CAAC,CAAC;QACpC,MAAM;UAAEC;QAAa,CAAC,GAAG,MAAM,MAAM,CAAC,IAAI,CAAC;QAC3C,MAAM6C,QAAQ,GAAG7C,YAAY,CAAC4C,KAAK,EAAE,OAAO,CAAC;QAC7C5I,MAAM,CAAC6I,QAAQ,CAAC,CAACpG,SAAS,CAAC,UAAU,CAAC;QACtCnB,OAAO,CAACC,GAAG,CAAC,yCAAyC,CAAC;MACxD;IACF;;IAEA;IACA,MAAMuH,YAAY,GAAGzI,IAAI,CAACc,OAAO,CAAC,mBAAmB,CAAC;IACtD,IAAI,MAAM2H,YAAY,CAAChD,SAAS,CAAC,CAAC,EAAE;MAClC,MAAMiD,SAAS,GAAG,MAAM3I,uBAAuB,CAACC,IAAI,EAAE,mBAAmB,EAAE,KAAK,CAAC;MACjF,IAAI0I,SAAS,EAAE;QACb,MAAMC,KAAK,GAAG,MAAMD,SAAS,CAAChD,IAAI,CAAC,CAAC;QACpC,MAAMkD,SAAS,GAAGF,SAAS,CAAC/D,iBAAiB,CAAC,CAAC;QAC/C,MAAM;UAAEgB;QAAa,CAAC,GAAG,MAAM,MAAM,CAAC,IAAI,CAAC;QAC3C,IAAIiD,SAAS,CAACC,QAAQ,CAAC,OAAO,CAAC,EAAE;UAC/B,MAAMC,MAAM,GAAGnD,YAAY,CAACgD,KAAK,CAAC;UAClChJ,MAAM,CAACmJ,MAAM,CAACvD,MAAM,CAAC,CAAC4C,eAAe,CAAC,CAAC,CAAC;UACxClH,OAAO,CAACC,GAAG,CAAC,yCAAyC,CAAC;QACxD,CAAC,MAAM;UACL,MAAM6H,QAAQ,GAAGpD,YAAY,CAACgD,KAAK,EAAE,OAAO,CAAC;UAC7ChJ,MAAM,CAACoJ,QAAQ,CAAC,CAAC3G,SAAS,CAAC,UAAU,CAAC;UACtCnB,OAAO,CAACC,GAAG,CAAC,uCAAuC,CAAC;QACtD;MACF;IACF;IAEAD,OAAO,CAACC,GAAG,CAAC,2CAA2C,CAAC;EAC1D,CAAC,CAAC;EAEFxB,IAAI,CAAC,2DAA2D,EAAE,OAAO;IAAEM;EAAK,CAAC,KAAK;IACpFN,IAAI,CAACsB,UAAU,CAAC,MAAM,CAAC;IACvBC,OAAO,CAACC,GAAG,CAAC,mDAAmD,CAAC;IAEhE,MAAMtB,iBAAiB,CAACI,IAAI,CAAC;IAE7B,MAAMmB,cAAc,GAAG,MAAMnB,IAAI,CAACc,OAAO,CAAC,kBAAkB,CAAC,CAACM,SAAS,CAAC,CAAC;IACzE,IAAI,CAACD,cAAc,EAAE;MACnBF,OAAO,CAACC,GAAG,CAAC,8DAA8D,CAAC;MAC3E;IACF;;IAEA;IACA,MAAM8H,YAAY,GAAGhJ,IAAI,CAACc,OAAO,CAAC,mBAAmB,CAAC;IACtD,IAAI,MAAMkI,YAAY,CAACvD,SAAS,CAAC,CAAC,EAAE;MAClC,MAAMhB,QAAQ,GAAG,MAAM1E,uBAAuB,CAACC,IAAI,EAAE,mBAAmB,EAAE,KAAK,CAAC;MAEhF,IAAIyE,QAAQ,EAAE;QACZ,MAAMiB,IAAI,GAAG,MAAMjB,QAAQ,CAACiB,IAAI,CAAC,CAAC;QAClC,MAAM;UAAEC;QAAa,CAAC,GAAG,MAAM,MAAM,CAAC,IAAI,CAAC;QAC3C,MAAMC,UAAU,GAAGD,YAAY,CAACD,IAAI,EAAE,OAAO,CAAC;;QAE9C;QACA,MAAMG,KAAK,GAAGD,UAAU,CAACE,KAAK,CAAC,IAAI,CAAC,CAAC5B,MAAM,CAAC+E,CAAC,IAAIA,CAAC,CAACC,IAAI,CAAC,CAAC,CAAC;QAC1D,IAAIrD,KAAK,CAACN,MAAM,GAAG,CAAC,EAAE;UACpB,MAAM4D,MAAM,GAAGtD,KAAK,CAAC,CAAC,CAAC;UACvB,MAAMuD,aAAa,GAAGvD,KAAK,CAAC,CAAC,CAAC;;UAE9B;UACAlG,MAAM,CAACwJ,MAAM,CAACrD,KAAK,CAAC,GAAG,CAAC,CAACP,MAAM,CAAC,CAAC4C,eAAe,CAAC,CAAC,CAAC;UACnDxI,MAAM,CAACyJ,aAAa,CAACtD,KAAK,CAAC,GAAG,CAAC,CAACP,MAAM,CAAC,CAAC4C,eAAe,CAAC,CAAC,CAAC;UAC1DlH,OAAO,CAACC,GAAG,CAAC,0DAA0D,CAAC;QACzE;MACF;IACF;EACF,CAAC,CAAC;AACJ,CAAC,CAAC","ignoreList":[]}