{"version":3,"names":["test","expect","runDefaultPreview","waitForPreview","captureBrowserTelemetry","describe","page","telemetry","goto","locator","toContainText","toBeVisible","toBeHidden","consoleErrors","toEqual","pageErrors","failedRequests","setTimeout","click","Promise","race","waitForSelector","state","timeout","catch","previewVisible","isVisible","errorVisible","toBeTruthy","skip","toHaveCount","url","includes","endsWith","options","allTextContents","length","toBeGreaterThanOrEqual","check","fill"],"sources":["Jira-Reporting-App-UX-Trust-Validation-Tests.spec.js"],"sourcesContent":["/**\r\n * UX Trust Validation: report, current-sprint, leadership with console (logcat-style)\r\n * and realtime UI assertions at every stage. Fails on UI mismatch or browser errors.\r\n */\r\n\r\nimport { test, expect } from '@playwright/test';\r\nimport { runDefaultPreview, waitForPreview, captureBrowserTelemetry } from './JiraReporting-Tests-Shared-PreviewExport-Helpers.js';\r\n\r\ntest.describe('Jira Reporting App - UX Trust Validation (UI + Console)', () => {\r\n  test('report page loads with expected controls and no console errors', async ({ page }) => {\r\n    const telemetry = captureBrowserTelemetry(page);\r\n    await page.goto('/report');\r\n\r\n    await expect(page.locator('h1')).toContainText('VodaAgileBoard');\r\n    await expect(page.locator('#project-mpsa')).toBeVisible();\r\n    await expect(page.locator('#preview-btn')).toBeVisible();\r\n    await expect(page.locator('#export-excel-btn')).toBeVisible();\r\n    await expect(page.locator('#export-dropdown-trigger')).toBeVisible();\r\n    await expect(page.locator('#preview-content')).toBeHidden();\r\n\r\n    await expect(page.locator('nav.app-nav')).toBeVisible();\r\n    await expect(page.locator('nav.app-nav a[href=\"/current-sprint\"]')).toContainText('Current Sprint');\r\n    await expect(page.locator('nav.app-nav a[href=\"/sprint-leadership\"]')).toContainText('Leadership');\r\n\r\n    expect(telemetry.consoleErrors).toEqual([]);\r\n    expect(telemetry.pageErrors).toEqual([]);\r\n    expect(telemetry.failedRequests).toEqual([]);\r\n  });\r\n\r\n  test('report preview flow: Generate Report then UI shows content or error with no console errors', async ({ page }) => {\r\n    test.setTimeout(180000);\r\n    const telemetry = captureBrowserTelemetry(page);\r\n    await page.goto('/report');\r\n\r\n    await expect(page.locator('#preview-btn')).toBeVisible();\r\n    await page.click('#preview-btn');\r\n\r\n    await Promise.race([\r\n      page.waitForSelector('#preview-content', { state: 'visible', timeout: 120000 }).catch(() => null),\r\n      page.waitForSelector('#error', { state: 'visible', timeout: 120000 }).catch(() => null),\r\n    ]);\r\n    await waitForPreview(page);\r\n\r\n    const previewVisible = await page.locator('#preview-content').isVisible().catch(() => false);\r\n    const errorVisible = await page.locator('#error').isVisible().catch(() => false);\r\n    expect(previewVisible || errorVisible).toBeTruthy();\r\n\r\n    expect(telemetry.consoleErrors).toEqual([]);\r\n    expect(telemetry.pageErrors).toEqual([]);\r\n    expect(telemetry.failedRequests).toEqual([]);\r\n  });\r\n\r\n  test('report tabs and export: after preview, tabs and export controls are visible', async ({ page }) => {\r\n    test.setTimeout(180000);\r\n    const telemetry = captureBrowserTelemetry(page);\r\n    await runDefaultPreview(page);\r\n\r\n    const previewVisible = await page.locator('#preview-content').isVisible().catch(() => false);\r\n    if (!previewVisible) {\r\n      test.skip(true, 'Preview not visible; may require Jira credentials');\r\n      return;\r\n    }\r\n\r\n    await expect(page.locator('.tabs')).toBeVisible();\r\n    await expect(page.locator('.tab-btn')).toHaveCount(4);\r\n    await expect(page.locator('#tab-project-epic-level')).toBeVisible();\r\n    await expect(page.locator('#export-excel-btn')).toBeVisible();\r\n    await expect(page.locator('#export-dropdown-trigger')).toBeVisible();\r\n\r\n    expect(telemetry.consoleErrors).toEqual([]);\r\n    expect(telemetry.pageErrors).toEqual([]);\r\n  });\r\n\r\n  test('current-sprint page loads and shows board selector with no console errors', async ({ page }) => {\r\n    const telemetry = captureBrowserTelemetry(page);\r\n    await page.goto('/current-sprint');\r\n\r\n    if (page.url().includes('login') || page.url().endsWith('/')) {\r\n      test.skip(true, 'Redirected to login; auth may be required');\r\n      return;\r\n    }\r\n\r\n    await expect(page.locator('h1')).toContainText('Current Sprint');\r\n    await expect(page.locator('#board-select')).toBeVisible();\r\n    await expect(page.locator('nav.app-nav a[href=\"/report\"]')).toContainText('Report');\r\n    await expect(page.locator('nav.app-nav a[href=\"/sprint-leadership\"]')).toContainText('Leadership');\r\n    const options = await page.locator('#board-select option').allTextContents();\r\n    expect(options.length).toBeGreaterThanOrEqual(1);\r\n\r\n    expect(telemetry.consoleErrors).toEqual([]);\r\n    expect(telemetry.pageErrors).toEqual([]);\r\n    expect(telemetry.failedRequests).toEqual([]);\r\n  });\r\n\r\n  test('sprint-leadership page loads and shows date inputs and Preview with no console errors', async ({ page }) => {\r\n    const telemetry = captureBrowserTelemetry(page);\r\n    await page.goto('/sprint-leadership');\r\n\r\n    if (page.url().includes('login') || page.url().endsWith('/')) {\r\n      test.skip(true, 'Redirected to login; auth may be required');\r\n      return;\r\n    }\r\n\r\n    await expect(page.locator('h1')).toContainText('Sprint Leadership');\r\n    await expect(page.locator('#leadership-start')).toBeVisible();\r\n    await expect(page.locator('#leadership-end')).toBeVisible();\r\n    await expect(page.locator('#leadership-preview')).toBeVisible();\r\n    await expect(page.locator('#leadership-preview')).toContainText('Preview');\r\n    await expect(page.locator('nav.app-nav a[href=\"/report\"]')).toContainText('Report');\r\n    await expect(page.locator('nav.app-nav a[href=\"/current-sprint\"]')).toContainText('Current Sprint');\r\n\r\n    expect(telemetry.consoleErrors).toEqual([]);\r\n    expect(telemetry.pageErrors).toEqual([]);\r\n    expect(telemetry.failedRequests).toEqual([]);\r\n  });\r\n\r\n  test('validation error: start >= end shows single error banner and no request', async ({ page }) => {\r\n    const telemetry = captureBrowserTelemetry(page);\r\n    await page.goto('/report');\r\n\r\n    await page.check('#project-mpsa');\r\n    await page.fill('#start-date', '2025-09-30T23:59');\r\n    await page.fill('#end-date', '2025-07-01T00:00');\r\n    await page.click('#preview-btn');\r\n\r\n    await expect(page.locator('#error')).toBeVisible();\r\n    await expect(page.locator('#error')).toContainText(/start.*before.*end|date/i);\r\n\r\n    expect(telemetry.consoleErrors).toEqual([]);\r\n    expect(telemetry.pageErrors).toEqual([]);\r\n  });\r\n});\r\n"],"mappings":"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","ignoreList":[]}